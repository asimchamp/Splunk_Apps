<dashboard>
  <label>Cluster Overview</label>
  <row>
		<single>
			<title>Active Nodes</title>
			<searchString>index="cassandra_nodestatus"|dedup HOST |stats count(eval(STATUS="UP")) AS COUNT|eval status=COUNT+" Nodes"</searchString>
            <earliestTime>rt-10m</earliestTime>
      <latestTime>rt</latestTime>
			<option name="field">status</option>
			<option name="linkFields">result</option>
		</single>
        <single>
		
			<title>Down Nodes</title>
			<searchString>index="cassandra_nodestatus" |dedup HOST|stats count(eval(STATUS="DOWN")) AS COUNT|eval status=COUNT+" Nodes"</searchString>
<earliestTime>rt-10m</earliestTime>
      <latestTime>rt</latestTime>
			<option name="field">status</option>
			<option name="linkFields">result</option>
		
		</single>

    <table>
      <title>Cluster Status</title>
      <searchString>index="cassandra_nodestatus"  | dedup HOST | rename DATA_PC AS "Data Share%"|rename HOST AS Node|replace UP with Active in STATUS|eval Load=DATA_VOLUME+" "+UNITS|table Node, STATUS,Load,Tokens,"Data Share%"</searchString>
      <earliestTime>rt-10m</earliestTime>
      <latestTime>rt</latestTime>
      <option name="wrap">true</option>
      <option name="rowNumbers">false</option>
      <option name="dataOverlayMode">none</option>
      <option name="drilldown">row</option>
      <option name="count">10</option>
    </table>
    
  </row> 
  <row>
       
<table>
  <title>Cluster CPU and Memory Used</title>
        <searchString>index="cassandra_cpu" OR (index="cassandra_memory" Type="Memory")| eval used=coalesce(used,100-idle)|rename HOSTADDR AS Node|chart sparkline avg(used) by source|replace source_stats_cpu with CPU in source |replace source_stats_memory with Memory in source|rename sparkline as Trends|fields source Trends</searchString>
        <earliestTime>rt-24h</earliestTime>
        <latestTime>rtnow</latestTime>
      </table>
    <chart>
      <title>Cluster I/O Task Status</title>
      <searchString>index="cassandra_netstat" | timechart span=10s sum(Completed) by Pool_Name</searchString>
      <earliestTime>rt-15m</earliestTime>
      <latestTime>rtnow</latestTime>
      <option name="charting.axisTitleX.visibility">visible</option>
      <option name="charting.axisTitleY.visibility">visible</option>
      <option name="charting.axisX.scale">linear</option>
      <option name="charting.axisY.scale">linear</option>
      <option name="charting.chart">line</option>
      <option name="charting.chart.nullValueMode">zero</option>
      <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.chart.style">shiny</option>
      <option name="charting.drilldown">all</option>
      <option name="charting.layout.splitSeries">0</option>
      <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
      <option name="charting.legend.placement">bottom</option>
      <option name="charting.axisTitleX.text">Time</option>
      <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
      <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
      <option name="charting.axisTitleY.text">No. of Tasks</option>
      <option name="charting.axisTitleY2.visibility">visible</option>
      <option name="charting.axisY2.enabled">false</option>
      <option name="charting.axisY2.scale">inherit</option>
    </chart>
    
<chart>
      <title>Cluster Latency</title>
      <searchString>index=cassandra_readwrite |timechart avg(Write_Latency_ms) AS "Write Latency" avg(Read_Latency_ms) AS "Read Latency"</searchString>
      <earliestTime>rt-60m</earliestTime>
      <latestTime>rtnow</latestTime>
      <option name="charting.axisTitleX.visibility">visible</option>
      <option name="charting.axisTitleY.visibility">visible</option>
      <option name="charting.axisX.scale">linear</option>
      <option name="charting.axisY.scale">linear</option>
      <option name="charting.chart">line</option>
      <option name="charting.chart.nullValueMode">zero</option>
      <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.chart.style">shiny</option>
      <option name="charting.drilldown">all</option>
      <option name="charting.layout.splitSeries">0</option>
      <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
      <option name="charting.legend.placement">bottom</option>
      <option name="charting.axisTitleX.text">Time</option>
      <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
      <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
      <option name="charting.axisTitleY.text">Latency in ms</option>
      <option name="charting.axisTitleY2.visibility">visible</option>
      <option name="charting.axisY2.enabled">false</option>
      <option name="charting.axisY2.scale">inherit</option>
    </chart>
  </row>
</dashboard>