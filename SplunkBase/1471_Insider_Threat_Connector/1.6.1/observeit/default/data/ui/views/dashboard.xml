<!-- Copyright (C) 2010-2019 Sideview LLC.  All Rights Reserved. -->
<view autoCancelInterval="90" isVisible="true" onunloadCancelJobs="true" template="dashboard.html" stylesheet="custom.css" isSticky="False">
  <label>Activity Dashboard</label>
  <module name="AccountBar" layoutPanel="appHeader" />
  <module name="AppBar" layoutPanel="appHeader" />
  <module name="SideviewUtils" layoutPanel="appHeader">
    <param name="customStylesheet">dashboard_tabs.css</param>
  </module>
  
  <module name="Message" layoutPanel="messaging">
    <param name="filter">*</param>
    <param name="maxSize">2</param>
    <param name="clearOnJobDispatch">False</param>
  </module>
  

  <module name="HTML" layoutPanel="viewHeader">
    <param name="html"><![CDATA[
    <h1>Activity Dashboard</h1>
    ]]></param>
  </module>
    


  <module name="URLLoader" layoutPanel="viewHeader" autoRun="True">
    <param name="keepURLUpdated">True</param>
    
    <module name="TimeRangePicker" layoutPanel="mainSearchControls">
      <param name="default">last 7 days</param>

      <module name="TextField">
        <param name="name">searchTerms</param>
        <param name="label">misc. terms</param>

        <module name="CustomBehavior">
          <param name="customBehavior">clearPushes</param>
        </module>

        <module name="Tabs" layoutPanel="panel_row1_col1">
          <param name="name">selectedField</param>
          <param name="staticTabs">
            <list>
              <param name="value">ApplicationName</param>
              <param name="label">Windows Applications</param>
            </list>
            <list>
              <param name="value">Command</param>
              <param name="label">Unix Commands</param>
            </list>
          </param>

          <module name="Search" layoutPanel="panel_row1_col1_grp1">
            <param name="search">`oit_cmlog` $searchTerms$ | top $selectedField$</param>

            <!-- 
            <module name="HTML">
              <param name="html"><![CDATA[      <h3>$selectedField.label$</h3>      ]]></param>
            </module>
            -->

            <module name="JobProgressIndicator"></module>

            <module name="HiddenChartFormatter">
              <param name="charting.chart">pie</param>

              <module name="FlashChart">
                <param name="enableResize">False</param>

                <module name="CustomBehavior">
                  <param name="customBehavior">sendPushesToDrilldownTable</param>
                </module>

              </module>
            </module>
          </module>
        </module>

        <module name="Tabs" layoutPanel="panel_row1_col2">
          <param name="name">selectedField</param>
          <param name="staticTabs">
            <list>
              <param name="value">UserName</param>
              <param name="label">User Names</param>
            </list>
            <list>
              <param name="value">LoginName</param>
              <param name="label">Login Names</param>
            </list>
          </param>
          <module name="Search" layoutPanel="panel_row1_col2_grp1">
            <param name="search">`oit_cmlog` $searchTerms$ | top $selectedField$</param>

            
            <module name="JobProgressIndicator"></module>

            <module name="HiddenChartFormatter">
              <param name="charting.chart">pie</param>

              <module name="FlashChart">
                <param name="enableResize">False</param>

                <module name="CustomBehavior">
                  <param name="customBehavior">sendPushesToDrilldownTable</param>
                </module>
              </module>
            </module>
          </module>
        </module>



        <module name="Tabs" layoutPanel="panel_row1_col3">
          <param name="name">selectedField</param>
          <param name="staticTabs">
            <list>
              <param name="value">ServerName</param>
              <param name="label">Servers</param>
            </list>
            <list>
              <param name="value">ClientName</param>
              <param name="label">Client Names</param>
            </list>
          </param>
          <module name="Search" layoutPanel="panel_row1_col3_grp1">
            <param name="search">`oit_cmlog` $searchTerms$ | top $selectedField$</param>

            <module name="JobProgressIndicator"></module>

            <module name="HiddenChartFormatter">
              <param name="charting.chart">pie</param>

              <module name="FlashChart">
                <param name="enableResize">False</param>

                <module name="CustomBehavior">
                  <param name="customBehavior">sendPushesToDrilldownTable</param>
                </module>
              </module>
            </module>
          </module>
        </module>


        <module name="CustomBehavior" layoutPanel="panel_row2_col1">
          <param name="customBehavior">receivePushes</param>

          <module name="Search">
            <param name="search">
`oit_cmlog` [search `oit_cmlog` $searchTerms$ $customSearchTerms$ | dedup SessionId | fields SessionId ] 

`merge_applications_and_commands`
| `standard_stats_for_session_list`  
| `conversions_for_session_list`
| fields `fields_for_session_list`
| eval actions=""
            </param>
            
            <module name="HTML">
              <param name="html"><![CDATA[      <h3>$results.count$ sessions found for $customSearchTerms$ $search.timeRange.label$</h3>
              ]]></param>
            </module>

            <module name="JobProgressIndicator"></module>

            <module name="Pager">
              
              <module name="Table">
                <param name="hiddenFields">SessionId ViewerURL</param>

                <module name="HTML" group="row.fields.actions">
                  <param name="html"><![CDATA[
                    <a href="$row.fields.ViewerURL$" target="_blank"><img width="16" height="16" src="../../static/app/observeit/images/icon_video.gif"/></a>
                  ]]></param>
                </module>
                <module name="Redirector">
                  <param name="url">session_detail</param>
                  <param name="arg.SessionId">$click.fields.SessionId$</param>
                  <param name="arg.searchTerms">$searchTerms.rawValue$</param>
                  <param name="arg.$selectedField$">$customSearchValue$</param>
                  
                  
                  <param name="arg.earliest">$search.timeRange.earliest$</param>
                  <param name="arg.latest">$search.timeRange.latest$</param>
                  <param name="arg.autoRun">True</param>

                </module>
              </module>

            </module>
          </module>
        </module>
      </module>
    </module>
  </module>

</view>