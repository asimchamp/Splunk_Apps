# Copyright 2012 Splunk, Inc.
#
#   Licensed under the Apache License, Version 2.0 (the "License");
#   you may not use this file except in compliance with the License.
#   You may obtain a copy of the License at
#
#       http://www.apache.org/licenses/LICENSE-2.0
#
#   Unless required by applicable law or agreed to in writing, software
#   distributed under the License is distributed on an "AS IS" BASIS,
#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#   See the License for the specific language governing permissions and
#   limitations under the License.
#
# DO NOT EDIT THIS FILE!
# 
# Modifications for deployment should be made in "../local"
#
#########################
# BEGIN HOMEPAGE SEARCHES
#########################


# Shuttl - Activity #


## Error & Failures ##

[Shuttl Is Jetty Server Running]
search = `jetty_errors` | head 1 | stats count as error | rangemap field=error Ok=0-0 default=Down
dispatch.earliest_time = rt-30s
dispatch.latest_time = rt

[Shuttl Failed Archived Buckets]
search = `shuttl_failed_archived_buckets` | rex "/(?<indexName>).+/(colddb|db)/(?<bucketName>db_\d+_\d+_\d+)" | dedup bucketName | stats count | rangemap field=count Green=0-0 default=Red
dispatch.earliest_time = rt-30s
dispatch.latest_time = rt


## Archived Buckets ##

[Shuttl Archived Buckets Last Hour]
search = `shuttl_archived_bucket` | stats count
dispatch.earliest_time = rt-1h
dispatch.latest_time = rt

[Shuttl Archived Buckets Last Day]
search = `shuttl_archived_bucket` | stats count
dispatch.earliest_time = rt-1d
dispatch.latest_time = rt

[Shuttl Archived Buckets Last Week]
search = `shuttl_archived_bucket` | stats count
dispatch.earliest_time = rt-1w
dispatch.latest_time = rt


## Indexes ##

[Shuttl All Indexes]
search = `shuttl` | dedup indexName

[Shuttl All Indexes Table]
search = `shuttl` | dedup indexName | `shuttl_index_table`

[Shuttl Archived Buckets per Index Stats]
search = `shuttl_archived_bucket` | `shuttl_buckets_per_index_stats`

[Shuttl Thawed Buckets per Index Stats]
search = `shuttl_thawed_bucket` | `shuttl_buckets_per_index_stats`


## Counts ##

[Shuttl Number of Thawed Buckets]
search = `shuttl_thawed_bucket` | stats count

[Shuttl Number of Archived Buckets]
search = `shuttl_archived_bucket` | stats count


## Tables ##

[Shuttl All Archived Buckets]
search = `shuttl_archived_bucket` | `shuttl_bucket_table`

[Shuttl All Thawed Buckets]
search = `shuttl_thawed_bucket` | `shuttl_bucket_table`



# FlashChart stuff

[HC events]
description = Total events
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=per_source_thruput" | timechart bins=1000 sum(ev)

[HC thruput]
description = Total bytes
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=per_source_thruput" | timechart bins=1000 sum(kb)

[HC total events]
description = Total events
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=per_source_thruput" | chart sum(ev) as "Total Events"

[HC source events]
description = Total events
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=per_source_thruput" | timechart bins=1000 sum(ev) by series

[HC source thruput]
description = Total bytes
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=per_source_thruput" | timechart bins=1000 sum(kb) by series

[HC source event list]
description = Total events
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=per_source_thruput" | chart sum(ev) by series

[HC source thruput list]
description = Total bytes
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=per_source_thruput" | chart avg(kb) by series

[HC sourcetype events]
description = Total events
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=per_sourcetype_thruput" | timechart bins=1000 sum(ev) by series

[HC sourcetype thruput]
description = Total bytes
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=per_sourcetype_thruput" | timechart bins=1000 sum(kb) by series

[HC sourcetype event list]
description = Total events
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=per_sourcetype_thruput" | chart sum(ev) by series

[HC sourcetype thruput list]
description = Total events
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=per_sourcetype_thruput" | chart avg(kb) by series

[HC host events]
description = Total events
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=per_host_thruput" | timechart bins=1000 sum(ev) by series

[HC host thruput]
description = Total bytes
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=per_host_thruput" | timechart bins=1000 sum(kb) by series

[HC host event list]
description = Total events
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=per_host_thruput" | chart sum(ev) by series

[HC host thrput list]
description = Total thruputs
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=per_host_thruput" | chart avg(kb) by series

[HC REST api calls]
description = Total REST api calls timechart
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=REST" | timechart span=5m sum(call) by series

[HC REST api calls list]
description = Total REST api events list
displayview = report_builder_display
request.ui_dispatch_view = report_builder_display
search = index="_internal" source="shuttl" "group=REST" | chart sum(call) by series
