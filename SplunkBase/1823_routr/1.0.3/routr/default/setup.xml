<setup>

  <block title="Configuraton page for routr">
    <text>
      <![CDATA[

        <script>

          $(document).ready(function(){

            $('#item-blockFieldset-1').hide();
            $('#item-blockFieldset-2').hide();
            $('.jmFormActions').hide();

            $('#messagingServ').change(function() {
              // or $(this).val()
              if ( this.value == 'Twitter' ) {
                $('#item-blockFieldset-1').show();
                $('#item-blockFieldset-2').hide();
                $('.jmFormActions').show();
              } else if ( this.value == 'Tumblr' ) {
                $('#item-blockFieldset-2').show();
                $('#item-blockFieldset-1').hide();
                $('.jmFormActions').show();
              } else {
                $('#item-blockFieldset-2').hide();
                $('#item-blockFieldset-1').hide();
                $('.jmFormActions').hide();
              }
            });

          });

        </script>

        <div>
          <div>Select a messaging service:</div>
          <select id="messagingServ">
            <option selected value="None">--- Messaging service ---</option>
            <option value="Twitter">Twitter</option>
            <option value="Tumblr">Tumblr</option>
          </select>
        </div>
      ]]>
    </text>
  </block>

  <!-- Unable to perform 2 POST requests to different entities "twittercreds" and "tumblrcreds" in setup.xml 
       Using a dummy entity "socialmediacreds" instead -->
  <block title="Setup Twitter messaging service" endpoint="routrsetup/routrconfig" entity="socialmediacreds">
    <text>
      <![CDATA[
        <div class="setup_header">
          Complete the setup page with your credentials from 
          <b><a target="_blank" href="https://apps.twitter.com">https://apps.twitter.com</a></b>
        </div>
      ]]>
    </text>
  
    <input field="twitter_consumer_key">
      <label>Twitter consumer key (API key):</label>
      <type>text</type>
    </input>

    <input field="twitter_consumer_secret">
      <label>Twitter consumer secret (API secret):</label>
      <type>text</type>
    </input>

    <input field="twitter_access_token">
      <label>Twitter access token:</label>
      <type>text</type>
    </input>

    <input field="twitter_access_token_secret">
      <label>Twitter access token secret:</label>
      <type>text</type>
    </input>
  </block>

  <block title="Setup Tumblr messaging service" endpoint="routrsetup/routrconfig" entity="socialmediacreds">
    <text>
      <![CDATA[
        <div class="setup_header">
          Complete the setup page with your credentials from 
          <b><a target="_blank" href="https://api.tumblr.com/console/calls/user/info">https://api.tumblr.com/console/calls/user/info</a></b>
        </div>
      ]]>
    </text>
  
    <input field="tumblr_blogname">
      <label>Tumblr blogname (eg: username.tumblr.com):</label>
      <type>text</type>
    </input>

    <input field="tumblr_consumer_key">
      <label>Tumblr consumer key (API key):</label>
      <type>text</type>
    </input>

    <input field="tumblr_consumer_secret">
      <label>Tumblr consumer secret (API secret):</label>
      <type>text</type>
    </input>

    <input field="tumblr_access_token">
      <label>Tumblr access token:</label>
      <type>text</type>
    </input>

    <input field="tumblr_access_token_secret">
      <label>Tumblr access token secret:</label>
      <type>text</type>
    </input>
  </block>

</setup>
