<view autoCancelInterval="90" isVisible="true" objectMode="SimpleDashboard" onunloadCancelJobs="true" refresh="-1" template="dashboard.html">
	<label>Informes RT</label>
	<module name="AccountBar" layoutPanel="appHeader"/>
	<module name="AppBar" layoutPanel="navigationHeader"/>
	<module name="Message" layoutPanel="messaging">
		<param name="filter">*</param>
		<param name="clearOnJobDispatch">False</param>
		<param name="maxSize">1</param>
	</module>
	<module name="Message" layoutPanel="messaging">
		<param name="filter">splunk.search.job</param>
		<param name="clearOnJobDispatch">True</param>
		<param name="maxSize">1</param>
	</module>
	<module name="TitleBar" layoutPanel="viewHeader">
		<param name="actionsMenuFilter">dashboard</param>
	</module>

		<module name="TimeRangePicker" layoutPanel="panel_row1_col1">
			<param name="searchWhenChanged">True</param>
			<param name="selected">Last 15 minutes</param>

			<module name="SearchSelectLister" layoutPanel="panel_row1_col2">
				<param name="staticFieldsToDisplay">
					<list>
						<param name="value">%</param>
						<param name="label">Todos</param>
					</list>
				</param>
				<param name="search">
					index="*" sourcetype="rt" earliest=-1d@d | search Field="Status-real"  | dedup Owner| fields Owner	
				</param>

				<param name="label">Persona</param>
				<param name="settingToCreate">Owner_setting</param>
				<param name="searchFieldsToDisplay">
					<list>
						<param name="value">Owner</param>
						<param name="label">Owner</param>
					</list>
				</param>
				<param name="searchWhenChanged">False</param>
				<module name="ConvertToIntention">
					<param name="settingToConvert">Owner_setting</param>
					<param name="intention">
						<param name="name">stringreplace</param>
						<param name="arg">
							<param name="Owner">
								<param name="fillOnEmpty">True</param>
								<param name="value">$target$</param>
							</param>
						</param>
					</param>
                                  <module name="SearchSelectLister" layoutPanel="panel_row1_col2">
				<param name="staticFieldsToDisplay">
					<list>
						<param name="value">%</param>
						<param name="label">Todos</param>
					</list>
				</param>
				<param name="search">
					index="*" sourcetype="rt" earliest=-1d@d | search Field="Status-real"  | dedup Queue| fields Queue
				</param>

				<param name="label">Cliente</param>
				<param name="settingToCreate">Queue_setting</param>
				<param name="searchFieldsToDisplay">
					<list>
						<param name="value">Queue</param>
						<param name="label">Queue</param>
					</list>
				</param>
				<param name="searchWhenChanged">False</param>
				<module name="ConvertToIntention">
					<param name="settingToConvert">Queue_setting</param>
					<param name="intention">
						<param name="name">stringreplace</param>
						<param name="arg">
							<param name="Queue">
								<param name="fillOnEmpty">True</param>
								<param name="value">$target$</param>
							</param>
						</param>
					</param>


						<module name="SubmitButton" layoutPanel="panel_row1_col3">
								<param name="allowSoftSubmit">True</param>
								<param name="label">Buscar</param>
                                          
                                                  
                                                  		<module name="HiddenSearch" layoutPanel="panel_row2_col1" group="Tickets Abiertos" autoRun="True">
									<param name="search">index="*" sourcetype="rt" |   search  Field="Status-real" |eval Prop=if(like("$Owner$",""),"%","$Owner$") |  where like(Owner,Prop) | eval Client=if(like("$Queue$",""),"%","$Queue$") |  where like(Queue,Client) |  |  rename Owner as Propietario |  addinfo |  eval time=info_max_time-info_min_time |  chart  dc(DataUpdated) as Tiempo_Update2, values(time) as Tiempo by Propietario |  eval Tiempo_Update=round(Tiempo/(Tiempo_Update2*3600)) | fields - Tiempo,Tiempo_Update2</param>
									<param name="groupLabel">Tickets Abiertos</param>
									<module name="ViewstateAdapter">
										<param name="suppressionList">
											<item>drilldown</item>
										</param>
										<module name="HiddenFieldPicker">
											<param name="strictMode">True</param>
											<module name="JobProgressIndicator">
												<module name="EnablePreview">
													<param name="enable">True</param>
													<param name="display">False</param>
													<module name="HiddenChartFormatter">
														<param name="charting.chart">area</param>
														<param name="charting.axisTitleX.text" />
														<param name="charting.legend.placement">left</param>
                                                                                                          	<param name="charting.chart.stackMode">stacked</param>
														<param name="charting.axisTitleY.text" />
														<module name="FlashChart">
															<param name="width">100%</param>
															<module name="ConvertToDrilldownSearch">
																<module name="ViewRedirector">
																	<param name="viewTarget">flashtimeline</param>
																</module>
															</module>
														</module>
														<module name="ViewRedirectorLink">
															<param name="viewTarget">flashtimeline</param>
														</module>
													</module>
												</module>
											</module>
										</module>
									</module>
								</module>
                                                  
                                                  <module name="HiddenSearch" layoutPanel="panel_row3_col1" group="Tickets Abiertos por Usuario" autoRun="True">
									<param name="search">index="*" sourcetype="rt" |   search  Field="Status-real" |eval Prop=if(like("$Owner$",""),"%","$Owner$") | dedup TicketID |   where like(Owner,Prop)  | eval Client=if(like("$Queue$",""),"%","$Queue$") |  where like(Queue,Client)|  rename Owner as Propietario | chart count(TicketID) as Numero_Tickets by Propietario,NewValue</param>
									<param name="groupLabel">Tickets Abiertos por Usuario</param>
									<module name="ViewstateAdapter">
										<param name="suppressionList">
											<item>drilldown</item>
										</param>
										<module name="HiddenFieldPicker">
											<param name="strictMode">True</param>
											<module name="JobProgressIndicator">
												<module name="EnablePreview">
													<param name="enable">True</param>
													<param name="display">False</param>
													<module name="HiddenChartFormatter">
														<param name="charting.chart">bar</param>
                                                                                                          <param name="charting.chart.stackMode">stacked</param>
														<param name="charting.axisTitleX.text">Numero Tickets</param>
														
                                                                                                          <param name="charting.legend.placement">bottom</param>
                                                                                                          	<param name="charting.axisTitleY.text" />
														<module name="FlashChart">
															<param name="width">100%</param>
															<module name="ConvertToDrilldownSearch">
																<module name="ViewRedirector">
																	<param name="viewTarget">flashtimeline</param>
																</module>
															</module>
														</module>
														<module name="ViewRedirectorLink">
															<param name="viewTarget">flashtimeline</param>
														</module>
													</module>
												</module>
											</module>
										</module>
									</module>
								</module>
                                                  
                                                  <module name="HiddenSearch" layoutPanel="panel_row3_col2" group="Tickets Abiertos por Cliente" autoRun="True">
									<param name="search">index="*" sourcetype="rt" |   search  Field="Status-real" |eval Prop=if(like("$Owner$",""),"%","$Owner$") |  where like(Owner,Prop)  | dedup TicketID| eval Client=if(like("$Queue$",""),"%","$Queue$") |  where like(Queue,Client)|  rename Queue as Cliente |chart count(TicketID) as Numero_Tickets by Cliente,NewValue</param>
									<param name="groupLabel">Tickets Abiertos por Cliente</param>
									<module name="ViewstateAdapter">
										<param name="suppressionList">
											<item>drilldown</item>
										</param>
										<module name="HiddenFieldPicker">
											<param name="strictMode">True</param>
											<module name="JobProgressIndicator">
												<module name="EnablePreview">
													<param name="enable">True</param>
													<param name="display">False</param>
													<module name="HiddenChartFormatter">
														<param name="charting.chart">bar</param>
														<param name="charting.axisTitleX.text">Numero Tickets</param>
														
                                                                                                          <param name="charting.legend.placement">bottom</param>
                                                                                                          <param name="charting.chart.stackMode">stacked</param>
														<param name="charting.axisTitleY.text" />
														<module name="FlashChart">
															<param name="width">100%</param>
															<module name="ConvertToDrilldownSearch">
																<module name="ViewRedirector">
																	<param name="viewTarget">flashtimeline</param>
																</module>
															</module>
														</module>
														<module name="ViewRedirectorLink">
															<param name="viewTarget">flashtimeline</param>
														</module>
													</module>
												</module>
											</module>
										</module>
									</module>
								</module>
                                                  
                                                  
                                                  
                                                <module name="HiddenSearch" layoutPanel="panel_row4_col1" group="Tickets por usuario" autoRun="True">
						<param name="search">
							
							index="*" sourcetype="rt" |   search  Field="Status-real" |eval Prop=if(like("$Owner$",""),"%","$Owner$") | dedup TicketID |   where like(Owner,Prop)  | eval Client=if(like("$Queue$",""),"%","$Queue$") |  where like(Queue,Client)|  eval Tiempo=now()-strptime(DateCreated,"%Y-%m-%d %H:%M:%S")  | chart  eval(sum(Tiempo)/count(TicketID)) as seconds, count(TicketID) as Numero_Tickets by Owner | sort -num(seconds) |  eval my_days=floor(seconds/86400) | eval my_hours=floor(seconds / 3600 - my_days * 24) | eval my_minutes = floor(seconds / 60 - my_hours * 60 - my_days *  1440) | eval my_seconds = floor(seconds - my_days * 86400 - my_hours * 3600 - my_minutes * 60) | strcat my_days "d " my_hours "h " my_minutes "m " my_seconds "s" Tiempo_Medio | rename Owner as Propietario |  table Propietario,Numero_Tickets,Tiempo_Medio
							
						</param>

						<param name="groupLabel">Tabla Tickets por usuario</param>
        			    <module name="ViewstateAdapter">
				 	<module name="HiddenFieldPicker">
                                        	<param name="strictMode">True</param>
                                            <module name="JobProgressIndicator">
						<module name="EnablePreview">
                                                    <param name="enable">True</param>
                                                    <param name="display">False</param>
                                                                       <module name="Paginator">
											<param name="count">10</param>
											<param name="entityName">results</param>
											<param name="maxPages">5</param>

							<module name="SimpleResultsTable">
												<param name="count">10</param>
												<param name="drilldown">row</param>
												<param name="allowTransformedFieldSelect">True</param>
                                                            <module name="ConvertToDrilldownSearch">
													<module name="ViewRedirector">
														<param name="viewTarget">flashtimeline</param>
													</module>
                                                            </module>
                                                        </module>
											<module name="ViewRedirectorLink">
												<param name="viewTarget">flashtimeline</param>
											</module>
                                                  

						</module>
	</module>
                                            </module>
					</module>
                                    </module>
                               
 </module>
 
                                                  
                                                             
                                                <module name="HiddenSearch" layoutPanel="panel_row4_col2" group="Tickets por Cliente" autoRun="True">
						<param name="search">
							
							index="*" sourcetype="rt" |   search  Field="Status-real" |eval Prop=if(like("$Owner$",""),"%","$Owner$") |  where like(Owner,Prop)  | dedup TicketID| eval Client=if(like("$Queue$",""),"%","$Queue$") |  where like(Queue,Client) | eval Tiempo=now()-strptime(DateCreated,"%Y-%m-%d %H:%M:%S")  | chart  eval(sum(Tiempo)/count(TicketID)) as seconds, count(TicketID) as Numero_Tickets by Queue | sort -num(seconds) |  eval my_days=floor(seconds/86400) | eval my_hours=floor(seconds / 3600 - my_days * 24) | eval my_minutes = floor(seconds / 60 - my_hours * 60 - my_days *  1440) | eval my_seconds = floor(seconds - my_days * 86400 - my_hours * 3600 - my_minutes * 60) | strcat my_days "d " my_hours "h " my_minutes "m " my_seconds "s" Tiempo_Medio | rename Queue as Cliente|   table Cliente,Numero_Tickets,Tiempo_Medio
							
						</param>

						<param name="groupLabel">Tabla Tickets por Cliente</param>
        			    <module name="ViewstateAdapter">
				 	<module name="HiddenFieldPicker">
                                        	<param name="strictMode">True</param>
                                            <module name="JobProgressIndicator">
						<module name="EnablePreview">
                                                    <param name="enable">True</param>
                                                    <param name="display">False</param>
                                                                       <module name="Paginator">
											<param name="count">10</param>
											<param name="entityName">results</param>
											<param name="maxPages">5</param>

							<module name="SimpleResultsTable">
												<param name="count">10</param>
												<param name="drilldown">row</param>
												<param name="allowTransformedFieldSelect">True</param>
                                                            <module name="ConvertToDrilldownSearch">
													<module name="ViewRedirector">
														<param name="viewTarget">flashtimeline</param>
													</module>
                                                            </module>
                                                        </module>
											<module name="ViewRedirectorLink">
												<param name="viewTarget">flashtimeline</param>
											</module>
                                                  

						</module>
	</module>
                                            </module>
					</module>
                                    </module>
                               
                                                  
                                                  
                                                  
                                                  	<module name="HiddenSearch" layoutPanel="panel_row5_col1" group="Tiempo medio vida Tickets" autoRun="True">
									<param name="search">index="*" sourcetype="rt" | search Field="Status-real" | eval Prop=if(like("$Owner$",""),"%","$Owner$") | where like(Owner,Prop)  | eval Client=if(like("$Queue$",""),"%","$Queue$") |  where like(Queue,Client)| dedup TicketID | eval Tiempo=now()-strptime(DateCreated,"%Y-%m-%d %H:%M:%S") | chart  eval(sum(Tiempo)/(count(TicketID)*86400)) as TM by Owner,NewValue | eval Tiempo_Medio=round(TM) | fields - TM | rename Owner as Propietario | sort -num(Tiempo_Medio)  </param>
									<param name="groupLabel">Tiempo medio vida Tickets</param>
									<module name="ViewstateAdapter">
										<param name="suppressionList">
											<item>drilldown</item>
										</param>
										<module name="HiddenFieldPicker">
											<param name="strictMode">True</param>
											<module name="JobProgressIndicator">
												<module name="EnablePreview">
													<param name="enable">True</param>
													<param name="display">False</param>
													<module name="HiddenChartFormatter">
														<param name="charting.chart">bar</param>
														<param name="charting.axisTitleY.text" />
														<param name="charting.legend.placement">bottom</param>
                                                                                                                <param name="charting.chart.stackMode">stacked</param>
														<param name="charting.axisTitleX.text">Dias</param>
														<module name="FlashChart">
															<param name="width">100%</param>
															<module name="ConvertToDrilldownSearch">
																<module name="ViewRedirector">
																	<param name="viewTarget">flashtimeline</param>
																</module>
															</module>
														</module>
														<module name="ViewRedirectorLink">
															<param name="viewTarget">flashtimeline</param>
														</module>
													</module>
												</module>
											</module>
										</module>
									</module>
								</module>
                                                  
                                                  </module>
						</module>
					</module>
				</module>
                  </module>
                           </module>
                     </module>
			
</view>