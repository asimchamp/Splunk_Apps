<form>
 <label>Basic Sentiment Dashboard</label>


 <fieldset autoRun="true">
  <input type="text" token="basesearch" >
      <label>Search:</label>
      <default>*</default>
  </input>
    
  <input type="dropdown" token="model">
      <label>Select Model:</label>
      <choice>twitter</choice>
      <choice>imdb</choice>
      <default>imdb</default>
  </input>

  <input type="dropdown" token="srcfield">
      <label>Select Opinion Field:</label>
      <populatingSearch fieldForValue="column" fieldForLabel="column">
         <![CDATA[* | head 100 | stats count(*) as * | transpose | rename "row 1" as count | sort 50 - count | search count>10 ]]>
      </populatingSearch>
      <choice>_raw</choice>
      <default>_raw</default>
  </input>

  <input type="dropdown" token="split">
      <label>Select Field to Split Time Chart:</label>
      <populatingSearch fieldForValue="column" fieldForLabel="column">
         <![CDATA[* | head 100 | stats count(*) as * | transpose | rename "row 1" as count | sort 50 - count | search count>10]]>
    </populatingSearch>
    
  </input>     
     
  <input type="time" />
     
 </fieldset>

    
 <row>

   <chart>
          <title>Overall Sentiment</title>
          <searchTemplate>
                  $basesearch$ | sentiment $model$ $srcfield$| eval sentiment=if(sentiment==1.0, "Positive", "Negative") | top sentiment 
          </searchTemplate>
          <option name="charting.chart">pie</option>         
   </chart>    
    
   <chart>
          <title>Sentiment over Time</title>
          <searchTemplate>
                  $basesearch$ | sentiment $model$ $srcfield$ | timechart avg(sentiment) by $split$
          </searchTemplate>
          <option name="charting.chart">line</option>
          <option name="charting.primaryAxisTitle.text">Time</option>
          <option name="charting.secondaryAxisTitle.text">Sentiment</option>
          <option name="charting.legend.placement">right</option>
   </chart>    
  </row>


</form>
