(window.webpackJsonp=window.webpackJsonp||[]).push([["experiment_alerts"],{"./node_modules/@splunk/swc-mltk/dist/build_tools/web_loaders/splunk-public-path-injection-loader.js?/static/app/Splunk_ML_Toolkit/!./src/main/webapp/pages/experiment_alerts.es":function(e,t,s){var i,l;s.p=function(){function e(e,t){if(window.$C&&window.$C.hasOwnProperty(e))return window.$C[e];if(void 0!==t)return t;throw new Error("getConfigValue - "+e+" not set, no default provided")}return function(){for(var t,s,i="",l=0,o=arguments.length;l<o;l++)(s=(t=arguments[l].toString()).length)>1&&"/"==t.charAt(s-1)&&(t=t.substring(0,s-1)),"/"!=t.charAt(0)?i+="/"+t:i+=t;if("/"!=i){var n=i.split("/"),r=n[1];if("static"==r||"modules"==r){var a=i.substring(r.length+2,i.length);i="/"+r,window.$C.BUILD_NUMBER&&(i+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(i+="."+window.$C.BUILD_PUSH_NUMBER),"app"==n[2]&&(i+=":"+e("APP_BUILD",0)),i+="/"+a}}var d=e("MRSPARKLE_ROOT_PATH","/"),c=e("LOCALE","en-US"),p="/"+c+i;return""==d||"/"==d?p:d+p}("/static/app/Splunk_ML_Toolkit/")+"/"}(),i=[s("./src/main/webapp/routers/ExperimentAlerts.es"),s("./node_modules/@splunk/swc-mltk/dist/index.js")],void 0===(l=function(e,t){"use strict";var s;new(e=(s=e)&&s.__esModule?s:{default:s}).default,t.routerUtils.start_backbone_history()}.apply(t,i))||(e.exports=l)},"./src/main/webapp/routers/ExperimentAlerts.es":function(e,t,s){var i,l;i=[t,s("./node_modules/core-js/modules/es.regexp.exec.js"),s("./node_modules/core-js/modules/es.string.split.js"),s("./node_modules/@splunk/swc-mltk/dist/index.js"),s("./node_modules/@splunk/ui-utils/i18n.js"),s("./src/main/webapp/util/loadLayout.es"),s("./src/main/webapp/collections/Alerts.es"),s("./src/main/webapp/models/PolymorphicExperiment.es"),s("experimentAlerts/Master")],void 0===(l=function(s,i,l,o,n,r,a,d,c){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=void 0,r=p(r),a=p(a),d=p(d),c=p(c);var u=o.BaseListingsRouter.extend({initialize:function(){var e=this;o.BaseListingsRouter.prototype.initialize.apply(this,arguments),this.setPageTitle((0,n.gettext)("Experiment Alerts")),this.loadingMessage=(0,n.gettext)("Loading..."),this.stateModel.set({sortKey:"name",sortDirection:"asc",count:100,offset:0}),this.stateModel.set("fetching",!0),this.deferreds.layout=o.jquery.Deferred(),(0,r.default)((function(t){e.deferreds.layout.resolve(t.create())})),this.deferreds.experimentFetch=o.jquery.Deferred(),this.savedAlertsCollection=new a.default,this.alertActionsCollection=new o.ModAlertActionsCollection,this.flashMessageView=new o.FlashMessagesView({collection:{savedAlertsCollection:this.savedAlertsCollection}}),this.deferredAlertActionCollection=this.alertActionsCollection.fetch({data:{app:this.model.application.get("app"),owner:this.model.application.get("owner"),search:"disabled!=1"},addListInTriggeredAlerts:!0}),this.stateModel.on("change:sortDirection change:sortKey change:search change:offset",o.underscore.debounce((function(){e.fetchListCollection()}),0),this),this.savedAlertsCollection.on("destroy",(function(){e.fetchListCollection()}),this)},addError:function(e,t){var s={type:o.splunkDUtils.ERROR,html:t};this.flashMessageView.flashMsgHelper.addGeneralMessage(e,s),this.isError=!0},renderFlashMessages:function(){var e=this.flashMessageView.render().el;this.pageView.$(".main-section-body").html(e)},initializeAndRenderViews:function(){var e=this;this.isError&&this.renderFlashMessages(),this.model.user.canUseAlerts()?o.jquery.when(this.deferredAlertActionCollection,this.deferreds.experimentFetch,this.deferreds.layout).then((function(t,s,i){e.alertsView=new c.default({model:{experiment:e.model.experiment,state:e.stateModel,application:e.model.application,appLocal:e.model.appLocal,classicurl:e.model.classicurl,user:e.model.user,uiPrefs:e.uiPrefsModel,serverInfo:e.model.serverInfo,rawSearch:e.rawSearch},collection:{savedAlerts:e.savedAlertsCollection,roles:e.rolesCollection,apps:e.collection.appLocals,alertActions:e.alertActionsCollection}}),i.getContainerElement().appendChild(e.alertsView.render().el),e.uiPrefsModel.entry.content.on("change",(function(){this.populateUIPrefs()}),e),e.uiPrefsModel.entry.content.on("change:display.prefs.aclFilter",(function(){this.fetchListCollection()}),e)})):(this.paywallView=new o.PaywallView({title:(0,n.gettext)("Experiment Alerts"),model:{application:this.model.application,serverInfo:this.model.serverInfo}}),this.pageView.$(".main-section-body").html(this.paywallView.render().el))},fetchListCollection:function(){var e=this;if(this.model.user.canUseAlerts()){this.model.classicurl.fetch(),this.model.classicurl.get("search")&&(this.stateModel.set("search",this.model.classicurl.get("search"),{silent:!0}),this.model.classicurl.unset("search"),this.model.classicurl.save({},{replaceState:!0})),this.model.classicurl.get("rawSearch")&&(this.rawSearch.set("rawSearch",this.model.classicurl.get("rawSearch"),{silent:!0}),this.model.classicurl.unset("rawSearch"),this.model.classicurl.save({},{replaceState:!0}));var t=this.stateModel.get("search")||"",s=this.getButtonFilterSearch();if(t&&(t+=" AND "),s&&(t+="".concat(s," AND ")),t+="".concat(a.default.availableWithUserWildCardSearchString(this.model.application.get("owner"))," AND is_visible=1"),this.model.classicurl.get("experimentId")){this.model.experiment||(this.model.experiment=new d.default({entry:[{content:{type:this.model.classicurl.get("experimentType")}}]},{parse:!0}),this.flashMessageView.register(this.model.experiment));var i=this.model.classicurl.get("experimentId");this.model.experiment.set(this.model.experiment.idAttribute,i),this.model.experiment.fetch({success:function(t,s){e.deferreds.experimentFetch.resolve()},error:function(t,s){e.renderFlashMessages()}})}else{this.addError("missing_experiment_id_in_query_parameters","This page cannot be used without an experiment ID in the query parameters.")}o.jquery.when(this.deferreds.experimentFetch).then((function(){var s=e.model.experiment.entry.get("name");return t+=" AND name=*".concat(s,"*"),e.stateModel.set("fetching",!0),e.savedAlertsCollection.fetch({requireExperiment:!0,experimentName:s,data:{app:e.model.application.get("app"),owner:e.model.application.get("owner"),sort_dir:e.stateModel.get("sortDirection"),sort_key:e.stateModel.get("sortKey").split(","),sort_mode:["natural","natural"],search:t,count:e.stateModel.get("count"),listDefaultActionArgs:!0,offset:e.stateModel.get("offset")},success:function(){e.stateModel.set("fetching",!1)}})}))}else this.stateModel.set("fetching",!1)}});s.default=u,e.exports=t.default}.apply(t,i))||(e.exports=l)},"experimentAlerts/Master":function(e,t,s){(function(e){var i,l;i=[t,s("./node_modules/@splunk/ui-utils/i18n.js"),e,s("./node_modules/@splunk/swc-mltk/dist/index.js"),s("experimentAlerts/table/Master"),s("experimentAlerts/Title")],void 0===(l=function(e,s,i,l,o,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i=r(i),o=r(o),n=r(n);var a=l.AlertsView.extend({moduleId:i.default.id,initialize:function(){l.AlertsView.prototype.initialize.apply(this,arguments),this.children.title=new n.default({model:{experiment:this.model.experiment,serverInfo:this.model.serverInfo,state:this.model.state}}),this.children.caption=new l.TableCaptionView({countLabel:(0,s.gettext)("Alerts"),model:{state:this.model.state,application:this.model.application,uiPrefs:this.model.uiPrefs,user:this.model.user,serverInfo:this.model.serverInfo,rawSearch:this.model.rawSearch},filterKey:["args.mltk.experiment.title"],collection:this.collection.savedAlerts,noFilter:!1,noFilterButtons:!0,showListModeButtons:!1})},_renderTable:function(){this.children.tiles&&(this.children.tiles.remove(),delete this.children.tiles),this.children.table||(this.children.table=new o.default({model:{experiment:this.model.experiment,state:this.model.state,application:this.model.application,uiPrefs:this.model.uiPrefs,userPref:this.model.userPref,user:this.model.user,appLocal:this.model.appLocal,serverInfo:this.model.serverInfo},collection:{savedAlerts:this.collection.savedAlerts,roles:this.collection.roles,apps:this.collection.apps,alertActions:this.collection.alertActions}})),this.children.table.render().appendTo(this.$el)}});e.default=a,i.default.exports=t.default}.apply(t,i))||(e.exports=l)}).call(this,s("./node_modules/webpack/buildin/module.js")(e))},"experimentAlerts/Title":function(e,t,s){(function(e){var i,l;i=[t,s("./node_modules/@splunk/swc-mltk/dist/index.js"),s("./node_modules/@splunk/ui-utils/i18n.js"),e],void 0===(l=function(e,s,i,l){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,l=(o=l)&&o.__esModule?o:{default:o};var n=s.AlertsTitleView.extend({moduleId:l.default.id,render:function(){return this.$el.html(this.compiledTemplate({underscore:s.underscore,isLite:!1,title:s.splunkUtil.sprintf((0,i.gettext)("Alerts for Experiment: %s"),this.model.experiment.entry.content.get("title"))})),this}});e.default=n,l.default.exports=t.default}.apply(t,i))||(e.exports=l)}).call(this,s("./node_modules/webpack/buildin/module.js")(e))},"experimentAlerts/table/Master":function(e,t,s){(function(e){var i,l;i=[t,s("./node_modules/core-js/modules/es.array.map.js"),s("./node_modules/@splunk/swc-mltk/dist/index.js"),s("./node_modules/@splunk/ui-utils/i18n.js"),e,s("experimentAlerts/table/MoreInfo"),s("experimentAlerts/table/TableRow")],void 0===(l=function(e,s,i,l,o,n,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,o=a(o),n=a(n),r=a(r);var d=i.AlertsTableView.extend({moduleId:o.default.id,initialize:function(){i.BaseView.prototype.initialize.apply(this,arguments),this.children.tableRowToggle=new i.TableRowToggleView({el:this.el,collapseOthers:!0});var e=[];e.push({label:"i",className:"col-info",html:'<i class="icon-info"></i>'}),e.push({label:(0,l.gettext)("Title"),sortKey:"args.mltk.experiment.title"}),e.push({label:(0,l.gettext)("Alert Type"),className:"col-alert-type"}),e.push({label:(0,l.gettext)("Trigger Conditions"),className:"col-alert-trigger"}),e.push({label:(0,l.gettext)("Trigger Actions"),className:"col-alert-actions"}),e.push({label:(0,l.gettext)("Status"),className:"col-status",sortKey:"disabled"}),e.push({label:(0,l.gettext)("Actions"),className:"col-actions"}),this.children.head=new i.TableHeadView({model:this.model.state,columns:e}),this.children.rows=this.rowsFromCollection(),this.children.tableDock=new i.TableDockView({el:this.el,offset:36,dockScrollBar:!1,defaultLayout:"fixed",flexWidthColumn:1}),this.activate()},rowsFromCollection:function(){return i.underscore.flatten(this.collection.savedAlerts.map((function(e,t){return[new r.default({model:{experiment:this.model.experiment,savedAlert:e,application:this.model.application,state:this.model.state,appLocal:this.model.appLocal,user:this.model.user,serverInfo:this.model.serverInfo},collection:{roles:this.collection.roles,apps:this.collection.apps,alertActions:this.collection.alertActions},index:t}),new n.default({model:{experiment:this.model.experiment,savedAlert:e,application:this.model.application,appLocal:this.model.appLocal,user:this.model.user,serverInfo:this.model.serverInfo},collection:{roles:this.collection.roles,alertActions:this.collection.alertActions},index:t})]}),this))}});e.default=d,o.default.exports=t.default}.apply(t,i))||(e.exports=l)}).call(this,s("./node_modules/webpack/buildin/module.js")(e))},"experimentAlerts/table/MoreInfo":function(e,t,s){(function(e){var i,l;i=[t,e,s("./node_modules/@splunk/swc-mltk/dist/index.js"),s("experimentAlerts/alertcontrols/details/Master")],void 0===(l=function(e,s,i,l){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,s=o(s),l=o(l);var n=i.AlertsTableMoreInfoView.extend({moduleId:s.default.id,initialize:function(){i.AlertsTableMoreInfoView.prototype.initialize.apply(this,arguments),this.children.detailsView=new l.default({model:{experiment:this.model.experiment,savedAlert:this.model.savedAlert,application:this.model.application,appLocal:this.model.appLocal,user:this.model.user,serverInfo:this.model.serverInfo},collection:{roles:this.collection.roles,alertActions:this.collection.alertActions}})},render:function(){return this.$el.html(this.compiledTemplate({description:this.model.savedAlert.entry.content.get("description"),cols:6})),this.children.detailsView.render().appendTo(this.$("td.details")),this}});e.default=n,s.default.exports=t.default}.apply(t,i))||(e.exports=l)}).call(this,s("./node_modules/webpack/buildin/module.js")(e))},"experimentAlerts/table/TableRow":function(e,t,s){(function(e){var i,l;i=[t,s("./node_modules/@splunk/swc-mltk/dist/index.js"),s("./node_modules/@splunk/ui-utils/i18n.js"),e,s("experimentAlerts/alertcontrols/EditMenu")],void 0===(l=function(e,s,i,l,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,l=n(l),o=n(o);var r=s.BaseView.extend({moduleId:l.default.id,tagName:"tr",className:"expand",initialize:function(){s.BaseView.prototype.initialize.apply(this,arguments),this.$el.addClass(this.options.index%2?"even":"odd"),this.children.triggerTextView=new s.AlertControlsDetailsTriggerView({model:this.model.savedAlert}),this.children.typeTextView=new s.AlertControlsDetailsTypeView({model:this.model.savedAlert}),this.children.actionsTextView=new s.ActionsDetailsView({model:{document:this.model.savedAlert,application:this.model.application},collection:{alertActions:this.collection.alertActions}}),this.children.editmenu=new o.default({model:{experiment:this.model.experiment,savedAlert:this.model.savedAlert,application:this.model.application,appLocal:this.model.appLocal,user:this.model.user,serverInfo:this.model.serverInfo},collection:{roles:this.collection.roles,alertActions:this.collection.alertActions,appLocals:this.collection.apps},button:!1,showOpenActions:!1}),this.activate()},startListening:function(){this.listenTo(this.model.savedAlert,"updateCollection",(function(){this.model.state.trigger("change:search")})),this.listenTo(this.model.savedAlert.entry.content,"change:disabled",this.updateStatus)},updateStatus:function(){this.$("td.status").text(this.model.savedAlert.entry.content.get("disabled")?(0,i.gettext)("Disabled"):(0,i.gettext)("Enabled"))},render:function(){var e=this.model.savedAlert.entry.content.get("args.mltk.experiment.title"),t=this.model.application.get("app"),l=s.route.alert(this.model.application.get("root"),this.model.application.get("locale"),t,{data:{s:this.model.savedAlert.id}});return this.$el.html(this.compiledTemplate({underscore:s.underscore,alertName:e,alertLink:l,index:this.options.index,status:this.model.savedAlert.entry.content.get("disabled")?(0,i.gettext)("Disabled"):(0,i.gettext)("Enabled"),isLite:!1})),this.children.typeTextView.render().prependTo(this.$("td.alert-type")),this.children.triggerTextView.render().prependTo(this.$("td.alert-trigger")),this.children.actionsTextView.render().prependTo(this.$("td.alert-actions")),this.children.editmenu.render().appendTo(this.$(".actions")),this},template:'\n                <td class="expands">\n                    <a href="#"><i class="icon-triangle-right-small"></i></a>\n                </td>\n                <td class="title">\n                    <a href="<%= alertLink %>" title="<%- alertName %>"><%- alertName %></a>\n                </td>\n                <td class="alert-type"></td>\n                <td class="alert-trigger"></td>\n                <td class="alert-actions"></td>\n                <td class="status"><%- status %></td>\n                <td class="actions"></td>\n           '});e.default=r,l.default.exports=t.default}.apply(t,i))||(e.exports=l)}).call(this,s("./node_modules/webpack/buildin/module.js")(e))}},[["./node_modules/@splunk/swc-mltk/dist/build_tools/web_loaders/splunk-public-path-injection-loader.js?/static/app/Splunk_ML_Toolkit/!./src/main/webapp/pages/experiment_alerts.es","pages_common"]]]);