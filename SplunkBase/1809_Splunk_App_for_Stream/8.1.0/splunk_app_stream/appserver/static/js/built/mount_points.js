streamJsonp([4],{0:function(a,b,c){var d,e;c.p=function(){function a(){for(var a,c,d="",e=0,f=arguments.length;e<f;e++)a=arguments[e].toString(),c=a.length,c>1&&"/"==a.charAt(c-1)&&(a=a.substring(0,c-1)),d+="/"!=a.charAt(0)?"/"+a:a;if("/"!=d){var g=d.split("/"),h=g[1];if("static"==h||"modules"==h){var i=d.substring(h.length+2,d.length);d="/"+h,window.$C.BUILD_NUMBER&&(d+="/@"+window.$C.BUILD_NUMBER),window.$C.BUILD_PUSH_NUMBER&&(d+="."+window.$C.BUILD_PUSH_NUMBER),"app"==g[2]&&(d+=":"+b("APP_BUILD",0)),d+="/"+i}}var j=b("MRSPARKLE_ROOT_PATH","/"),k=b("DJANGO_ROOT_PATH",""),l=b("LOCALE","en-US"),m="";return m=k&&d.substring(0,k.length)===k?d.replace(k,k+"/"+l.toLowerCase()):"/"+l+d,""==j||"/"==j?m:j+m}function b(a,b){if(window.$C&&window.$C.hasOwnProperty(a))return window.$C[a];if(void 0!==b)return b;throw new Error("getConfigValue - "+a+" not set, no default provided")}return a("/static/app/splunk_app_stream/js/built")+"/"}(),d=[c(1),c(2),c(6),c(12),c(75),c(82),c(7)],e=function(a,b,c,d,e,f,g){var h=h||{};h.mediator=new d;var i=b.Deferred(),j=new f;j.fetch({success:function(a){i.resolve(a)},error:function(a){}}),b.when(i.promise()).done(function(a){g(function(b){var c=new e({mountPointsCollection:a,app:h});b.create().getContainerElement().appendChild(c.render().el)})})}.apply(b,d),!(void 0!==e&&(a.exports=e))},75:function(a,b,c){var d,e;d=[c(1),c(2),c(6),c(3),c(76),c(77),c(78),c(80),c(30)],e=function(a,b,c,d,e,f,g,h){d.Controller;return c.View.extend({initialize:function(c){this.options=a.extend({},this.options,c),this.app=this.options.app,this.template=a.template(b(e).html()),this.collection=this.options.mountPointsCollection,this.collection.on("change add remove",this.render.bind(this));var d=location.search.split("=");if(2==d.length&&"?file_server"==d[0]){var f=d[1],h=this.collection.get(f);h&&(editMountPointView=new g({mountPointModel:h,collection:this.collection}).show())}},events:{"keyup #mount-point-search-input":"filterTable","click a.clear":"resetSearch","click #add-file-server-mount-point":"addMountPoint"},filterTable:function(){var a=b("#mount-point-search-input").val();this.app.mediator.publish("search-filtered",a)},resetSearch:function(a){a.preventDefault(),this.render()},addMountPoint:function(a){a.preventDefault();var b=new f;new g({create:!0,mountPointModel:b,collection:this.collection}).show()},render:function(){var a=this,b=a.template({mountPointCount:a.collection.length});a.$el.empty(),a.$el.append(b);var c=a.$("#mount-point-table");return a.collection.each(function(b){new h({model:b,app:a.app,mountPointsCollection:a.collection}).render().$el.appendTo(c)}),c.tablesorter({headers:{0:{sorter:"text"},1:{sorter:"text"},2:{sorter:!1}}}),this},removeSelf:function(){return this.unbind(),this.$el.empty(),this.undelegateEvents(),this}})}.apply(b,d),!(void 0!==e&&(a.exports=e))},76:function(a,b){a.exports='<script id="mount-points-template" type="text/template">\n<div id="mount-points-page">\n    <div class="container-fluid" id="mount-points-main-body">\n\n        <!-- ===== -->\n        <!-- Title -->\n        <!-- ===== -->\n        <div class="row-fluid top-header">\n            <div class="header-wrapper">\n              <h1 class="top-wrapper">\n                  File Server Mount Points\n                  <span id="mount-points-config-button-panel">\n                      <button id="add-file-server-mount-point" class="btn btn-primary">Add File Server</button>\n                  </span>\n              </h1>\n              <h3 class="page-subtitle">\n                   Edit mount points for known file servers or add a new one.\n              </h3>\n            </div>\n        </div>\n\n        <!-- ============ -->\n        <!-- Search Input -->\n        <!-- ============ -->\n        <div class="row-fluid">\n\n          <span id="mount-point-count"> <span> <%- mountPointCount %> </span> file servers </span>\n\n          <span class="table-search">\n             <input type="text" class="input-medium search-query" placeholder="Search" id="mount-point-search-input" value=""/>\n             <a class="clear"><i class="icon-x-circle"></i></a>\n          </span>\n\n        </div>\n\n        <!-- ===== -->\n        <!-- Table -->\n        <!-- ===== -->\n        <div class="row-fluid">\n\n           <table class="table table-chrome table-hover" id="mount-point-table">\n\n             <thead>\n                 <tr>\n                     <th style="width:45%">File Server</th>\n                     <th style="width:50%">Mount Point</th>\n                     <th style="width:5%">Actions</th>\n                 </tr>\n             </thead>\n\n             <tbody id="mount-point-table-body"></tbody>\n\n           </table>\n        </div>\n    </div>\n</div>\n</script>\n'},77:function(a,b,c){var d,e;d=[c(2),c(1),c(6),c(3)],e=function(a,b,c,d){const e=d.SplunkUtils;return c.Model.extend({urlRoot:e.make_url(["custom","splunk_app_stream","fileservermountpoints"].join("/")),idAttribute:"_key",validate:function(a,b){}})}.apply(b,d),!(void 0!==e&&(a.exports=e))},78:function(a,b,c){var d,e;d=[c(2),c(1),c(6),c(79)],e=function(a,b,c,d){return c.View.extend({className:"modal",initialize:function(c){this.template=b.template(a(d).html()),this.create=c.create,this.mountPointModel=c.mountPointModel,this.collection=c.collection},events:{"click .save":"save","click .cancel":"cancel"},show:function(){var a=this.mountPointModel.toJSON();return this.$el.html(this.template({mountPointModel:a,create:this.create})),this.$el.on("hide",function(){this.remove()}.bind(this)),this.$el.modal("show"),this},save:function(b){var c=this;if(this.mountPointModel.isNew()){var d=a("input.file-server").val();if(!d)return void alert("Please specify a file server.");this.mountPointModel.set("id",d)}var e={mount_point:a("input.mount-point").val()};return e.mount_point?void this.mountPointModel.save(e,{success:function(a,b){c.create&&c.collection.add(c.mountPointModel),c.$el.modal("hide"),c.remove(),location.search&&(location=location.origin+location.pathname)},error:function(a,b){alert(b.responseJSON.error)}}):void alert("Please specify a mount point.")},cancel:function(){this.remove()}})}.apply(b,d),!(void 0!==e&&(a.exports=e))},79:function(a,b){a.exports='<script id="mount-point-editor-modal-template" type="text/template">\n    <div class="modal-dialog modal-lg">\n        <div class="modal-content">\n            <div class="modal-header">\n                <% if (create) { %>\n                <h4 class="modal-title">Add File Server and Mount Point</h4>\n                <% } else { %>\n                <h4 class="modal-title">Edit Mount Point</h4>\n                <% } %>\n            </div>\n            <div class="modal-body">\n                <div class="container-fluid">\n                     <!-- =========== -->\n                     <!-- File Server -->\n                     <!-- =========== -->\n                     <div class="row-fluid">\n                        <div class="span4">File Server: </div>\n                        <div class="span8 ce-field">\n                             <input type="text"\n                                    class="file-server"\n                                    placeholder="required"\n                                    value="<%- mountPointModel.id %>"\n                                    <% if (! create) { %> disabled <% } %> >\n                        </div>\n                     </div>\n\n                     <!-- =========== -->\n                     <!-- Mount Point -->\n                     <!-- =========== -->\n                     <div class="row-fluid">\n                        <div class="span4">Mount Point: </div>\n                        <div class="span8 ce-field">\n                             <input type="text"\n                                    class="mount-point"\n                                    placeholder="required"\n                                    value="<%- mountPointModel.mount_point %>"\n                                    >\n                        </div>\n                     </div>\n                </div>\n            </div>\n            <div class="modal-footer">\n                <a href="#" data-dismiss="modal" aria-hidden="true" class="btn cancel">Cancel</a>\n                <% if (create) { %>\n                <a href="#" class="btn btn-primary save">Create</a>\n                <% } else { %>\n                <a href="#" class="btn btn-primary save">Save</a>\n                <% } %>\n            </div>\n        </div>\n    </div>\n</script>\n'},80:function(a,b,c){var d,e;d=[c(2),c(1),c(6),c(81),c(78),c(46),c(3)],e=function(a,b,c,d,e,f,g){const h=g.Popdown;return c.View.extend({tagName:"tr",className:"mount-point-table-row",attributes:function(){return{"data-id":this.model.get("id")}},initialize:function(c){this.app=c.app,this.template=b.template(a(d).html()),this.model=c.model;var e=this;this.app.mediator.subscribe("search-filtered",function(a){e._showHideBasedOnRegex(a)}),this.listenTo(this.model,"change",function(){e.render()})},_showHideBasedOnRegex:function(a){var c=this,d=new RegExp(a,"i"),e=b.flatten([c.model.get("id"),c.model.get("mount_point")]),f=b.some(b.map(e,function(a){return d.test(a)}));f?c.$el.show():c.$el.hide()},events:{"click .mount-point-edit":"editMountPoint","click .mount-point-delete":"deleteMountPoint"},editMountPoint:function(a){a.preventDefault();new e({mountPointModel:this.model}).show()},deleteMountPoint:function(a){a.preventDefault();var b=this.model;new f({action:"delete",model:{text:this.model.get("id")},command:function(){b.destroy({success:function(a,b){},error:function(){alert("error: failed to delete"),location.reload()}})}}).show()},render:function(){var b=this;return this.$el.html(b.template({model:this.model.toJSON()})),new h({el:this.$(".mount-point-action-popdown")}),this.model.has("mount_point")&&""!=this.model.get("mount_point")||a(this.el).addClass("missing-mount-point"),b},removeSelf:function(){return this.unbind(),this.$el.empty(),this.undelegateEvents(),this}})}.apply(b,d),!(void 0!==e&&(a.exports=e))},81:function(a,b){a.exports='<script id="mount-point-table-row-template" type="text/template">\n\n        <!-- =========== -->\n        <!-- File Server -->\n        <!-- =========== -->\n        <td>\n            <%- model.id %>\n        </td>\n\n        <!-- =========== -->\n        <!-- Mount Point -->\n        <!-- =========== -->\n        <td>\n            <% if (model.mount_point) { %>\n            <%- model.mount_point %>\n            <% } else { %>\n            <div class="alert alert-error"><i class="icon-alert"></i></div>\n            <% } %>\n        </td>\n\n        <!-- ======= -->\n        <!-- Actions -->\n        <!-- ======= -->\n        <td>\n            <div class="mount-point-action-popdown btn-combo">\n                <a class="dropdown-toggle btn-pill" href="#"><span class="icon-chevron-down"></span></a>\n\n                <div class="dropdown-menu dropdown-menu-narrow">\n                    <div class="arrow"></div>\n                    <ul>\n                        <li><a href="#" class="mount-point-edit">Edit Mount Point</a></li>\n                        <li><a href="#" class="mount-point-delete">Delete</a></li>\n                    </ul>\n                </div>\n            </div>\n        </td>\n</script>\n'},82:function(a,b,c){var d,e;d=[c(2),c(1),c(6),c(77),c(3)],e=function(a,b,c,d,e){const f=e.SplunkUtils;return c.Collection.extend({model:d,url:f.make_url(["custom","splunk_app_stream","fileservermountpoints"].join("/")),comparator:"id"})}.apply(b,d),!(void 0!==e&&(a.exports=e))}});
//# sourceMappingURL=mount_points.js.map