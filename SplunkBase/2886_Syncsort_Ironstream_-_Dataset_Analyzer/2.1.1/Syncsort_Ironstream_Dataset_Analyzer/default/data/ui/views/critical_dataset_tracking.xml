<form script="Syncsort_Ironstream_Dataset_Analyzer_Help.js" stylesheet="Syncsort_Ironstream_Dataset_Analyzer_Help.css">

  	
  <label>Critical Dataset Tracking</label>
  <description></description>
  <fieldset submitButton="true">

<!-- ****************************** -->     
<!-- SET DEFAULT TIME TOKEN HERE    -->     
<!-- ****************************** -->          
    <input type="time" token="tokTimeRange">
      <label>Date/Time</label>
      <default>
        <earliest>0</earliest>
        <latest>now</latest>
      </default>
      <change>
        <unset token="tokSMFJBN"></unset>
        <unset token="tokSMFRSD"></unset>
        <unset token="tokSMFRST"></unset>
        <unset token="tokSMFSID"></unset>
        <unset token="tokDataset"></unset>
        <unset token="tokAccesstype"></unset>
      </change>
    </input>
    
<!-- ****************************** -->     
<!-- SET DEFAULT INDEX TOKEN HERE   -->     
<!-- ****************************** -->      
    <input type="text" token="tokINDEX">
      <label>Index</label>
      <default>*</default>
      <change>
        <unset token="tokSMFJBN"></unset>
        <unset token="tokSMFRSD"></unset>
        <unset token="tokSMFRST"></unset>
        <unset token="tokSMFSID"></unset>
        <unset token="tokDataset"></unset>
        <unset token="tokAccesstype"></unset>
      </change>
    </input>
  </fieldset>  

  <!-- Chart Panel              -->
  <row>
    <panel depends="$tokINDEX$">
      <chart>
        <title>Summary Access to Critical Datasets</title>
        <search>
          <query>
            index=$tokINDEX$
             AND
             ((MFSOURCETYPE=SMF014 OR 
               MFSOURCETYPE=SMF015 OR	
               MFSOURCETYPE=SMF14  OR
               MFSOURCETYPE=SMF15
               [|inputlookup CriticalDatasets.csv
                |fields Dataset
                |rename Dataset as JFCBDSNM])	
              OR
              (MFSOURCETYPE=SMF017 OR	
               MFSOURCETYPE=SMF17
               [|inputlookup CriticalDatasets.csv
                |fields Dataset
                |rename Dataset as SMF17DSN])
             )
                        
            |eval "Access Type"		= case((MFSOURCETYPE=="SMF014" OR MFSOURCETYPE=="SMF14"),"INPUT",
            							   (MFSOURCETYPE=="SMF015" OR MFSOURCETYPE=="SMF15"),"OUTPUT",
            							   (MFSOURCETYPE=="SMF017" OR MFSOURCETYPE=="SMF17"),"Scratch")

            |eval "Data Set Name"	= case((MFSOURCETYPE=="SMF014" OR MFSOURCETYPE=="SMF14"),JFCBDSNM,
            							   (MFSOURCETYPE=="SMF015" OR MFSOURCETYPE=="SMF15"),JFCBDSNM,
            							   (MFSOURCETYPE=="SMF017" OR MFSOURCETYPE=="SMF17"),SMF17DSN)
            
            |eval "Job Name/Userid"	= case((MFSOURCETYPE=="SMF014" OR MFSOURCETYPE=="SMF14"),SMF14JBN,
            							   (MFSOURCETYPE=="SMF015" OR MFSOURCETYPE=="SMF15"),SMF14JBN,
            							   (MFSOURCETYPE=="SMF017" OR MFSOURCETYPE=="SMF17"),SMF17JBN)
               
            |eval "Date Submitted"	= case((MFSOURCETYPE=="SMF014" OR MFSOURCETYPE=="SMF14"),SMF14RSD,
            							   (MFSOURCETYPE=="SMF015" OR MFSOURCETYPE=="SMF15"),SMF14RSD,
            							   (MFSOURCETYPE=="SMF017" OR MFSOURCETYPE=="SMF17"),SMF17RSD)
            
            |eval "Time Submitted"	= case((MFSOURCETYPE=="SMF014" OR MFSOURCETYPE=="SMF14"),SMF14RST,
            							   (MFSOURCETYPE=="SMF015" OR MFSOURCETYPE=="SMF15"),SMF14RST,
            							   (MFSOURCETYPE=="SMF017" OR MFSOURCETYPE=="SMF17"),SMF17RST)
            
            |dedup	"Date Submitted" "Time Submitted" "Data Set Name" "Access Type" keepempty=t
            
            |chart	count over "Data Set Name" by "Access Type"   
          
          </query>
          <earliest>$tokTimeRange.earliest$</earliest>
          <latest>$tokTimeRange.latest$</latest>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">stacked</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
        <drilldown>
          <set token="tokAccesstype">$click.name2$</set>
          <set token="tokDataset">$click.value$</set>
        
          <unset token="tokSMFJBN"></unset>
          <unset token="tokSMFRSD"></unset>
          <unset token="tokSMFRST"></unset>
          <unset token="tokSMFSID"></unset>	
          </drilldown>
      </chart>
    </panel>
  </row>
  
  <!-- Summary Panel -->
  <row>
    <panel>
      <table depends="$tokDataset$">
        <title>Summary Access to Data Set $tokDataset$</title>
        <search>
          <query>
            
            index=$tokINDEX$ `SMFDatasetAccessSummary($tokDataset$)`
                                    
          </query>
          <earliest>$tokTimeRange.earliest$</earliest>
          <latest>$tokTimeRange.latest$</latest>
        </search>
        
        <fields>SystemID "Job Name/Userid" "Job on Queue" "Data Set Name" "Access Type"</fields>
        
        <drilldown>
          <set token="tokSMFSID">$row.SystemID$</set>
          <set token="tokSMFJBN">$row.Job Name/Userid$</set>
          <set token="tokSMFRSD">$row.Date Submitted$</set>
          <set token="tokSMFRST">$row.Time Submitted$</set>
        </drilldown>
        
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
        <option name="wrap">true</option>
        <option name="rowNumbers">false</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">cell</option>
        <option name="count">10</option>
        
      </table>
    </panel>
  </row>

  <!-- Job Details Panel  -->
  <row>
    <panel depends="$tokSMFJBN$">
      <table>
        <title>Datasets Accessed by Job $tokSMFJBN$</title>
        <search>
          <query>
            
             index=$tokINDEX$ `SMFJobDetails($tokSMFSID$,$tokSMFJBN$,$tokSMFRSD$,$tokSMFRST$)`
          
          </query>
          <earliest>$tokTimeRange.earliest$</earliest>
          <latest>$tokTimeRange.latest$</latest>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
        <option name="wrap">true</option>
        <option name="rowNumbers">false</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">off</option>
        <option name="count">50</option>
      </table>
    </panel>
  </row>

</form>