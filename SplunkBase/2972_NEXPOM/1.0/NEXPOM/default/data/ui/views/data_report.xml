<form>
  <label>Data report</label>
  <fieldset submitButton="false">
    <input type="time" token="time" searchWhenChanged="true">
      <label></label>
      <default>
        <earliest>0</earliest>
        <latest></latest>
      </default>
    </input>
    <input type="dropdown" token="sourcetype" searchWhenChanged="true">
      <label>Sourcetype</label>
      <search>
        <query>index="nexpom" sourcetype="*"  | dedup sourcetype | table sourcetype</query>
      </search>
      <fieldForLabel>sourcetype</fieldForLabel>
      <fieldForValue>sourcetype</fieldForValue>
    </input>
    <input type="dropdown" token="planid" searchWhenChanged="true">
      <label>Plan Id</label>
      <search>
        <query>index="nexpom" sourcetype="$sourcetype$" planid!="END" | dedup planid | table planid</query>
      </search>
      <fieldForLabel>planid</fieldForLabel>
      <fieldForValue>planid</fieldForValue>
    </input>
    <input type="dropdown" token="featureid" searchWhenChanged="true">
      <label>Feature Id</label>
      <search>
        <query>index="nexpom" sourcetype="$sourcetype$" |  where planid="$planid$"  | dedup featureid | table featureid</query>
        <earliest>0</earliest>
      </search>
      <fieldForLabel>featureid</fieldForLabel>
      <fieldForValue>featureid</fieldForValue>
      <choice value="*">all</choice>
      <default>*</default>
    </input>
    <input type="dropdown" token="partnb" searchWhenChanged="true">
      <label>Part Number</label>
      <search>
        <query>index="nexpom" sourcetype="$sourcetype$" |  where planid="$planid$" and featureid="$featureid$" | dedup partnb | table partnb</query>
        <earliest>0</earliest>
      </search>
      <fieldForLabel>partnb</fieldForLabel>
      <fieldForValue>partnb</fieldForValue>
      <choice value="*">all</choice>
      <default>*</default>
    </input>
    <input type="dropdown" token="idsymbol" searchWhenChanged="true">
      <label>Id Symbol</label>
      <search>
        <query>index="nexpom" sourcetype="$sourcetype$"|  where planid="$planid$" and featureid="$featureid$" and partnb="$partnb$" | dedup idsymbol | table idsymbol</query>
        <earliest>0</earliest>
      </search>
      <fieldForLabel>idsymbol</fieldForLabel>
      <fieldForValue>idsymbol</fieldForValue>
      <choice value="*">all</choice>
      <default>*</default>
    </input>
    <input type="dropdown" token="id" searchWhenChanged="true">
      <label>ID</label>
      <choice value="*">all</choice>
      <search>
        <query>index="nexpom" sourcetype="$sourcetype$" |  where planid="$planid$" and featureid="$featureid$" and partnb="$partnb$" and idsymbol="$idsymbol$"| dedup id | table id</query>
      </search>
      <fieldForLabel>id</fieldForLabel>
      <fieldForValue>id</fieldForValue>
      <default>*</default>
    </input>
  </fieldset>
  <row>
    <panel>
      <chart>
        <title>CHART</title>
        <search>
          <query>index="nexpom" sourcetype="$sourcetype$"  planid="$planid$" featureid="$featureid$" partnb="$partnb$" idsymbol="$idsymbol$" id="$id$"   | fields uppertol nominal actual lowertol sourcetype planid featureid partnb idsymbol id   | rename nominal as NOMINAL uppertol as UPPERTOL lowertol as LOWERTOL actual as ACTUAL   | eval LSL=(NOMINAL+LOWERTOL)    | eval USL=(NOMINAL+UPPERTOL) |  eval test=case(USL &lt; ACTUAL ,"NG",USL &gt; ACTUAL ,"OK") | eval test1=case(LSL &gt; ACTUAL ,"NG",LSL &lt; ACTUAL ,"OK")   | eval test3=if(test="NG" OR test1="NG","NG","OK") | chart count by test3</query>
          <earliest>0</earliest>
          <latest></latest>
        </search>
        <option name="charting.chart">pie</option>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
      </chart>
    </panel>
    <panel>
      <chart>
        <search>
          <query>index="nexpom" sourcetype="$sourcetype$"  planid="$planid$" featureid="$featureid$" partnb="$partnb$" idsymbol="$idsymbol$" id="$id$"   | fields uppertol nominal actual lowertol sourcetype planid featureid partnb idsymbol id   | rename nominal as NOMINAL uppertol as UPPERTOL lowertol as LOWERTOL actual as ACTUAL   | eval LSL=(NOMINAL+LOWERTOL)    | eval USL=(NOMINAL+UPPERTOL) |  eval test=case(USL &lt; ACTUAL ,"NG",USL &gt; ACTUAL ,"OK") | eval test1=case(LSL &gt; ACTUAL ,"NG",LSL &lt; ACTUAL ,"OK")   | eval test3=if(test="NG" OR test1="NG","NG","OK") | timechart count by test3</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="charting.chart">column</option>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">-45</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">all</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">stacked</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <chart>
        <title>X chart</title>
        <search>
          <query>index="nexpom" sourcetype="$sourcetype$"  planid="$planid$" featureid="$featureid$" partnb="$partnb$" idsymbol="$idsymbol$" id="$id$" | eval USL=(nominal+uppertol) | eval LSL=(nominal+lowertol) | rename nominal as NOMINAL, actual as ACTUAL | delta ACTUAL as RANGE  | eval MR=abs(RANGE) | eventstats avg(ACTUAL) as Average, avg(MR) as AverageR | eval UCLx=Average+(2.66*AverageR)  | eval LCLx=Average-(2.66*AverageR) | eval StDevR=AverageR/1.128 | table _time, UCLx, LCLx, Average, ACTUAL</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="charting.chart">line</option>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">log</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
      </chart>
    </panel>
    <panel>
      <chart>
        <title>percentage</title>
        <search>
          <query>index="nexpom" sourcetype="$sourcetype$"  planid="$planid$" featureid="$featureid$" partnb="$partnb$" idsymbol="$idsymbol$" id="$id$" | eval USL=(nominal+uppertol) | eval LSL=(nominal+lowertol) | rename nominal as NOMINAL, actual as ACTUAL | delta ACTUAL as RANGE  | eval MR=abs(RANGE) | eventstats avg(ACTUAL) as Average, avg(MR) as AverageR | eval UCLx=Average+(2.66*AverageR)  | eval LCLx=Average-(2.66*AverageR) | eval Average=round(Average,2) | eval ACTUAL=round(ACTUAL,2) | eval perc=if(ACTUAL&gt;=Average,((ACTUAL-Average)/(UCLx-Average))*100, ((ACTUAL-Average)/(LCLx-Average))*100) | eval perc_range=if(perc &gt;= 0 AND perc &lt;= 50, "0~50", if(perc &gt; 50 AND perc &lt;= 75, "50~75", if(perc &gt; 75 AND perc &lt;= 100, "75~100", "100~"))) | stats count by perc_range | sort 0 - count</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="charting.chart">pie</option>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.legend.labels">["0~50","50~75","75~100","100~"]</option>
        <option name="charting.seriesColors">[0xFF5E00,0xFF0000,0x008100,0x8C8C8C]</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <table>
        <title>List</title>
        <search>
          <query>index="nexpom" sourcetype="$sourcetype$"  planid="$planid$" featureid="$featureid$" partnb="$partnb$" idsymbol="$idsymbol$" id="$id$"  | fields uppertol nominal actual lowertol sourcetype planid featureid partnb idsymbol id   | rename nominal as NOMINAL uppertol as UPPERTOL lowertol as LOWERTOL actual as ACTUAL   | eval LSL=(NOMINAL+LOWERTOL)    | eval USL=(NOMINAL+UPPERTOL) |  eval test=case(USL &lt; ACTUAL ,"NG",USL &gt; ACTUAL ,"OK") | eval test1=case(LSL &gt; ACTUAL ,"NG",LSL &lt; ACTUAL ,"OK")   | eval status=if(test="NG" OR test1="NG","NG","OK") |table  _time,id, USL,LSL,NOMINAL,ACTUAL,status</query>
          <earliest>0</earliest>
        </search>
        <option name="wrap">true</option>
        <option name="rowNumbers">true</option>
        <option name="drilldown">cell</option>
        <option name="dataOverlayMode">none</option>
        <option name="count">10</option>
      </table>
    </panel>
  </row>
</form>