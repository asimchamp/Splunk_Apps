<?xml version='1.0' encoding='utf-8'?>
<form version="1.1" script="main.js" stylesheet="main.css, machine_scores.css">

   <label>Machine Scores</label>
   <description>This dashboard displays detailed information about machine scores. The lowest score is 0.0. The highest score is 10.0. The higher, the better. The data is updated every full and half hour. Click on a value of interest, to get a drilldown.</description>

   <fieldset autoRun="true">
      <input type="time" searchWhenChanged="true">
         <label>Time range:</label>
         <default>
            <earliest>@d</earliest>
            <latest>now</latest>
         </default>
         <change>
            <eval token="TimeRangePickerSpan">relative_time(now(), latest) - relative_time(now(), earliest)</eval>
            <eval token="PivotPeriodAutoSolo">case('TimeRangePickerSpan' &lt; 350000, "auto", 'TimeRangePickerSpan' &lt; 610000, "hour", 1=1, "auto")</eval>
            <eval token="PivotPeriodAutoTimechart">case('TimeRangePickerSpan' &lt; 1200, "second", 'TimeRangePickerSpan' &lt; 300000, "minute", 'TimeRangePickerSpan' &lt; 700000, "hour", 1=1, "day")</eval>
         </change>
      </input>
      <input type="dropdown" token="FilterField" id="Input_FilterField">
         <label>Filter field:</label>
      </input>
      <input type="dropdown" token="FilterOperator" id="Input_FilterOperator">
         <label>Filter operator:</label>
      </input>
      <input type="text" token="FilterExpression" id="Input_FilterExpression">
         <label>Filter expression:</label>
         <default>*</default>
      </input>
      <input type="dropdown" token="FilterField2" id="Input_FilterField2" depends="$FilterLevel2$">
      </input>
      <input type="dropdown" token="FilterOperator2" id="Input_FilterOperator2" depends="$FilterLevel2$">
      </input>
      <input type="text" token="FilterExpression2" id="Input_FilterExpression2" depends="$FilterLevel2$">
      </input>
      <input type="dropdown" token="FilterField3" id="Input_FilterField3" depends="$FilterLevel3$">
      </input>
      <input type="dropdown" token="FilterOperator3" id="Input_FilterOperator3" depends="$FilterLevel3$">
      </input>
      <input type="text" token="FilterExpression3" id="Input_FilterExpression3" depends="$FilterLevel3$">
      </input>
      <input type="dropdown" token="FilterField4" id="Input_FilterField4" depends="$FilterLevel4$">
      </input>
      <input type="dropdown" token="FilterOperator4" id="Input_FilterOperator4" depends="$FilterLevel4$">
      </input>
      <input type="text" token="FilterExpression4" id="Input_FilterExpression4" depends="$FilterLevel4$">
      </input>
      <input type="dropdown" token="FilterField5" id="Input_FilterField5" depends="$FilterLevel5$">
      </input>
      <input type="dropdown" token="FilterOperator5" id="Input_FilterOperator5" depends="$FilterLevel5$">
      </input>
      <input type="text" token="FilterExpression5" id="Input_FilterExpression5" depends="$FilterLevel5$">
      </input>
      <input type="dropdown" token="FilterField6" id="Input_FilterField6" depends="$FilterLevel6$">
      </input>
      <input type="dropdown" token="FilterOperator6" id="Input_FilterOperator6" depends="$FilterLevel6$">
      </input>
      <input type="text" token="FilterExpression6" id="Input_FilterExpression6" depends="$FilterLevel6$">
      </input>
      <input type="text" token="FilterLevels" id="Input_FilterLevels" depends="$FilterLevels_Hidden$">
      </input>
      <input type="text" token="FilterDatamodel" id="Input_FilterDatamodel" depends="$FilterDatamodel_Hidden$">
         <default>System_SystemPerformanceSummary</default>
      </input>
   </fieldset>

   <search id="Search_AllowedIndexesFilter">
        <query>
            | tstats count WHERE index=`uberAgent_index` by index | table index | mvcombine delim="," index | nomv index
        </query>
        <earliest>-30m</earliest>
        <latest>now</latest>
        <progress>
            <set token="AllowedIndexesFilter">filter SourceIndex in ($result.index$)</set>
        </progress>
    </search>

   <search id="Search_Base_Good_Medium_Bad">
      <query>
         | pivot `uA_DM_Score_Machine` Score_Machine 
            avg(machine_score) as machine_score
            splitrow host
            $SearchFilter$
            $AllowedIndexesFilter$
         | eval IsBad = if(machine_score &lt; 4,1,0)
         | eval IsMedium = if(machine_score &gt;= 4 AND machine_score &lt; 7,1,0)
         | eval IsGood = if(machine_score &gt;= 7,1,0)
         | stats 
            sum(IsBad) as IsBad
            sum(IsMedium) as IsMedium
            sum(IsGood) as IsGood
      </query>
   </search>
   
   <!-- Row 1 -->
    <row>
      <panel>
         <title>Machine score distribution</title>
         <single>
            <title>Bad scores</title>
                <search base="Search_Base_Good_Medium_Bad">
                    <query>
                        | table IsBad
                    </query>
                </search>
                <option name="colorMode">block</option>
                <option name="drilldown">none</option>
                <option name="numberPrecision">0</option>
                <option name="rangeColors">["0xdc4e41","0xdc4e41"]</option>
                <option name="rangeValues">[1]</option>
                <option name="underLabel"># Machines</option>
                <option name="useColors">1</option>
                <option name="drilldown">none</option>
         </single>
         <single>
            <title>Medium scores</title>
                <search base="Search_Base_Good_Medium_Bad">
                    <query>
                        | table IsMedium
                    </query>
                </search>
                <option name="colorMode">block</option>
                <option name="drilldown">none</option>
                <option name="numberPrecision">0</option>
                <option name="rangeColors">["0xf8be34","0xf8be34"]</option>
                <option name="rangeValues">[1]</option>
                <option name="underLabel"># Machines</option>
                <option name="useColors">1</option>
         </single>
         <single>
            <title>Good scores</title>
                <search base="Search_Base_Good_Medium_Bad">
                    <query>
                        | table IsGood
                    </query>
                </search>
                <option name="colorMode">block</option>
                <option name="drilldown">none</option>
                <option name="numberPrecision">0</option>
                <option name="rangeColors">["0x53a051","0x53a051"]</option>
                <option name="rangeValues">[1]</option>
                <option name="underLabel"># Machines</option>
                <option name="useColors">1</option>
         </single>
      </panel>
   </row>
   
   <search id="Search_Lowest_10_Charts">
      <query>
         | pivot `uA_DM_Score_Machine` Score_Machine
            $Panel41Function1$(machine_cpu) as machine_cpu
            $Panel42Function1$(machine_diskio) as machine_diskio
            $Panel51Function1$(machine_ram) as machine_ram
            $Panel52Function1$($Panel52Field1$) as Panel52Raw
            splitrow
               host as Machine
            $SearchFilter$
            $AllowedIndexesFilter$
         | eval "$Panel41Function1$(machine_cpu)" = round(machine_cpu, 1)
         | eval "$Panel42Function1$(machine_diskio)" = round(machine_diskio, 1)
         | eval "$Panel51Function1$(machine_ram)" = round(machine_ram, 1)
         | eval "$Panel52Function1$($Panel52Field1$)" = round(Panel52Raw, 1)
      </query>
   </search>

   <search id="Search_ScoresOverTime">
      <query>
         | pivot `uA_DM_Score_Machine` Score_Machine
            avg(machine_cpu) as machine_cpu
            avg(machine_ram) as machine_ram
            avg(machine_diskio) as machine_diskio
            avg(machine_networkavailability) as machine_networkavailability
            avg(machine_stoperrors) as machine_stoperrors
            avg(machine_diskspace) as machine_diskspace
            avg(machine_score) as machine_score
            splitrow 
               _time 
                  period minute
            $SearchFilter$
            $AllowedIndexesFilter$
         | timechart span=30m
            eval(round(avg(machine_cpu),1)) as CPU
            eval(round(avg(machine_ram),1)) as RAM
            eval(round(avg(machine_diskio),1)) as "Disk IO"
            eval(round(avg(machine_networkavailability),1)) as "Network availability"
            eval(round(avg(machine_stoperrors),1)) as "Stop errors"
            eval(round(avg(machine_diskspace),1)) as "Disk space"
            eval(round(avg(machine_score),1)) as "Machine score"
      </query>
   </search>
   
   <!-- Row 2 -->
   <row>
      <!-- Column 1 -->
      <panel>
         <title>Machine score over time</title>
         <chart id="Chart_Pane21">
            <search base="Search_ScoresOverTime">
               <query>
                  | fields _time "Machine score"
               </query>
            </search>
            <option name="charting.axisTitleX.visibility">collapsed</option>
            <option name="charting.axisTitleY.visibility">collapsed</option>
            <option name="charting.axisY.maximumNumber">10.0</option>
            <option name="charting.axisY.minimumNumber">0.0</option>
            <option name="charting.chart">line</option>
            <option name="charting.chart.nullValueMode">connect</option>
            <option name="charting.chart.showDataLabels">none</option>
            <option name="charting.drilldown">none</option>
            <option name="charting.layout.splitSeries">0</option>
            <option name="charting.legend.mode">standard</option>
            <option name="charting.seriesColors">["0x5A4575","0x43B5C6","0x6B6B6B","0x3D8A94","0x333333","0xC6DBDE","0xb98b73"]</option>
            <option name="charting.chart.nullValueMode">connect</option>
         </chart>
      </panel>

   </row>

   <!-- Row 3 -->
   <row>
      <!-- Column 1 -->
      <panel>
         <title>Component scores over time</title>
         <chart id="Chart_Pane31">
            <search base="Search_ScoresOverTime">
               <query>
                  | fields _time CPU RAM "Disk IO" "Network availability" "Stop errors" "Disk space"
               </query>
            </search>
            <option name="charting.axisTitleX.visibility">collapsed</option>
            <option name="charting.axisY.maximumNumber">10.0</option>
            <option name="charting.axisY.minimumNumber">0.0</option>
            <option name="charting.chart">line</option>
            <option name="charting.chart.nullValueMode">connect</option>
            <option name="charting.chart.showDataLabels">none</option>
            <option name="charting.drilldown">none</option>
            <option name="charting.layout.splitSeries">0</option>
            <option name="charting.legend.mode">standard</option>
            <option name="charting.seriesColors">["0x5A4575","0x43B5C6","0x6B6B6B","0x3D8A94","0x333333","0xC6DBDE","0xb98b73"]</option>
            <option name="charting.chart.nullValueMode">connect</option>
         </chart>
      </panel>

   </row>
   
   <!-- Row 4 -->
   <row>

      <!-- Column 1 -->
      <panel>
         <title>CPU scores (worst 10 machines)</title>
         <input type="dropdown" token="Panel41Function1" searchWhenChanged="true">
            <choice value="avg">average</choice>
            <choice value="count">count</choice>
            <choice value="max">maximum</choice>
            <choice value="median">median</choice>
            <choice value="min">minimum</choice>
            <choice value="stdev">standard deviation</choice>
            <choice value="sum">sum</choice>
            <default>avg</default>
            <label>Function:</label>
            <prefix></prefix>
            <suffix></suffix>
         </input>
         <chart>
            <search base="Search_Lowest_10_Charts">
               <query>
                  | sort limit=10 "$Panel41Function1$(machine_cpu)"
                  | fields
                     Machine
                     "$Panel41Function1$(machine_cpu)"
               </query>
            </search>
            <option name="height">250</option>
            <option name="charting.chart">bar</option>
            <option name="charting.legend.placement">none</option>
            <option name="charting.axisTitleX.visibility">collapsed</option>
            <option name="charting.seriesColors">["0x5A4575"]</option>
            <option name="charting.axisY.maximumNumber">10</option>
            <drilldown>
               <link>
                  <![CDATA[
                     single_machine_detail?earliest=$earliest$&latest=$latest$&form.FilterField=shost&form.FilterOperator=in&form.FilterExpression=$click.value|s$
                  ]]>
               </link>
            </drilldown>
         </chart>
      </panel>

      <!-- Column 2 -->
      <panel>
         <title>Disk IO scores (worst 10 machines)</title>
         <input type="dropdown" token="Panel42Function1" searchWhenChanged="true">
            <choice value="avg">average</choice>
            <choice value="count">count</choice>
            <choice value="max">maximum</choice>
            <choice value="median">median</choice>
            <choice value="min">minimum</choice>
            <choice value="stdev">standard deviation</choice>
            <choice value="sum">sum</choice>
            <default>avg</default>
            <label>Function:</label>
            <prefix></prefix>
            <suffix></suffix>
         </input>
         <chart>
            <search base="Search_Lowest_10_Charts">
               <query>
                  | sort limit=10 "$Panel42Function1$(machine_diskio)"
                  | fields
                     Machine
                     "$Panel42Function1$(machine_diskio)"
               </query>
            </search>
            <option name="height">250</option>
            <option name="charting.chart">bar</option>
            <option name="charting.legend.placement">none</option>
            <option name="charting.axisTitleX.visibility">collapsed</option>
            <option name="charting.seriesColors">["0x43B5C6"]</option>
            <option name="charting.axisY.maximumNumber">10</option>
            <drilldown>
               <link>
                  <![CDATA[
                     single_machine_detail?earliest=$earliest$&latest=$latest$&form.FilterField=shost&form.FilterOperator=in&form.FilterExpression=$click.value|s$
                  ]]>
               </link>
            </drilldown>
         </chart>
      </panel>
   </row>
   
   <!-- Row 5 -->
   <row>

      <!-- Column 1 -->
      <panel>
         <title>RAM scores (worst 10 machines)</title>
         <input type="dropdown" token="Panel51Function1" searchWhenChanged="true">
            <choice value="avg">average</choice>
            <choice value="count">count</choice>
            <choice value="max">maximum</choice>
            <choice value="median">median</choice>
            <choice value="min">minimum</choice>
            <choice value="stdev">standard deviation</choice>
            <choice value="sum">sum</choice>
            <default>avg</default>
            <label>Function:</label>
            <prefix></prefix>
            <suffix></suffix>
         </input>
         <chart>
            <search base="Search_Lowest_10_Charts">
               <query>
                  | sort limit=10 "$Panel51Function1$(machine_ram)"
                  | fields
                     Machine
                     "$Panel51Function1$(machine_ram)"
               </query>
            </search>
            <option name="height">250</option>
            <option name="charting.chart">bar</option>
            <option name="charting.legend.placement">none</option>
            <option name="charting.axisTitleX.visibility">collapsed</option>
            <option name="charting.seriesColors">["0x6B6B6B"]</option>
            <option name="charting.axisY.maximumNumber">10</option>
            <drilldown>
               <link>
                  <![CDATA[
                     single_machine_detail?earliest=$earliest$&latest=$latest$&form.FilterField=shost&form.FilterOperator=in&form.FilterExpression=$click.value|s$
                  ]]>
               </link>
            </drilldown>
         </chart>
      </panel>

      <!-- Column 2 -->
      <panel>
         <title>Other scores per machine (worst 10 machines)</title>
         <input type="dropdown" token="Panel52Function1" id="Input_Panel52Function1" searchWhenChanged="true">
            <choice value="avg">average</choice>
            <choice value="count">count</choice>
            <choice value="max">maximum</choice>
            <choice value="median">median</choice>
            <choice value="min">minimum</choice>
            <choice value="stdev">standard deviation</choice>
            <choice value="sum">sum</choice>
            <default>avg</default>
            <label>Function:</label>
            <prefix></prefix>
            <suffix></suffix>
         </input>
         <input type="dropdown" token="Panel52Field1" id="Input_Panel52Field1" searchWhenChanged="true">
            <choice value="machine_networkavailability">Network availability</choice>
            <choice value="machine_stoperrors">Stop errors</choice>
            <choice value="machine_diskspace">Disk space</choice>
            <default>machine_networkavailability</default>
            <label>Field:</label>
            <prefix></prefix>
            <suffix></suffix>
         </input>
         <chart>
            <search base="Search_Lowest_10_Charts">
               <query>
                  | sort limit=10 "$Panel52Function1$($Panel52Field1$)"
                  | fields
                     Machine
                     "$Panel52Function1$($Panel52Field1$)"
               </query>
            </search>
            <option name="height">250</option>
            <option name="charting.chart">bar</option>
            <option name="charting.legend.placement">none</option>
            <option name="charting.axisTitleX.visibility">collapsed</option>
            <option name="charting.seriesColors">["0x3D8A94"]</option>
            <option name="charting.axisY.maximumNumber">10</option>
            <drilldown>
               <link>
                  <![CDATA[
                     single_machine_detail?earliest=$earliest$&latest=$latest$&form.FilterField=shost&form.FilterOperator=in&form.FilterExpression=$click.value|s$
                  ]]>
               </link>
            </drilldown>
         </chart>
      </panel>
   </row>

   <!-- Row 6 -->
   <row>
      <panel>
         <title>Machine scores grouped</title>
         <input type="dropdown" token="Panel61GroupBy" searchWhenChanged="true">
            <choice value="AdDomainDns">AD domain DNS</choice>
            <choice value="AdOu">AD OU</choice>
            <choice value="AdSite">AD site</choice>
            <choice value="CtxDeliveryGroupName">Citrix delivery group</choice>
            <choice value="CtxFarmName">Citrix site</choice>
            <choice value="CtxMachineCatalogName">Citrix machine catalog</choice>
            <choice value="CPUCoresLogical">CPU cores (logical)</choice>
            <choice value="CPUCoresPhysical">CPU cores (physical)</choice>
            <choice value="CPUName">CPU name</choice>
            <choice value="CPUSockets">CPU sockets</choice>
            <choice value="CPUMaxMhz">CPU speed (MHz)</choice>
            <choice value="HwIsVirtualMachine">Hardware: is VM?</choice>
            <choice value="HwHypervisorVendor">Hardware: hypervisor</choice>
            <choice value="IsBatteryPresent">Hardware: has battery?</choice>
            <choice value="HwManufacturer">Hardware manufacturer</choice>
            <choice value="HwModel">Hardware model</choice>
            <choice value="OsBuild">OS build number</choice>
            <choice value="OsPlatform">OS platform [Windows|macOS]</choice>
            <choice value="OsType">OS type</choice>
            <choice value="OsUpdateBuildRevision">OS UBR (Update Build Revision)</choice>
            <choice value="OsVersion">OS version number</choice>
            <choice value="RAMSizeGB">RAM size (GB)</choice>
            <default>HwModel</default>
            <label>Group by:</label>
            <change>
               <condition value="*">
                  <set token="Panel61GroupByDisplay">$label$</set>
                  <unset token="DrilldownFilterBy61"></unset>
               </condition>
            </change>
         </input>
         <input type="dropdown" token="Panel61Function1" searchWhenChanged="true">
            <choice value="avg">average</choice>
            <choice value="count">count</choice>
            <choice value="max">maximum</choice>
            <choice value="median">median</choice>
            <choice value="min">minimum</choice>
            <choice value="stdev">standard deviation</choice>
            <choice value="sum">sum</choice>
            <default>avg</default>
            <label>Function:</label>
            <prefix></prefix>
            <suffix></suffix>
            <change>
               <condition value="avg">
                  <set token="Panel61Function1Display">Avg.</set>
               </condition>
               <condition value="count">
                  <set token="Panel61Function1Display">Count</set>
               </condition>
               <condition value="max">
                  <set token="Panel61Function1Display">Max.</set>
               </condition>
               <condition value="median">
                  <set token="Panel61Function1Display">Med.</set>
               </condition>
               <condition value="min">
                  <set token="Panel61Function1Display">Min.</set>
               </condition>
               <condition value="stdev">
                  <set token="Panel61Function1Display">Stdev</set>
               </condition>
               <condition value="sum">
                  <set token="Panel61Function1Display">Sum</set>
               </condition>
            </change>
         </input>
         <table>
            <search>
               <query>
                  | pivot `uA_DM_Score_Machine` Score_Machine
                     $Panel61Function1$(machine_cpu) as machine_cpu
                     $Panel61Function1$(machine_ram) as machine_ram
                     $Panel61Function1$(machine_diskio) as machine_diskio
                     $Panel61Function1$(machine_networkavailability) as machine_networkavailability
                     $Panel61Function1$(machine_stoperrors) as machine_stoperrors
                     $Panel61Function1$(machine_diskspace) as machine_diskspace
                     $Panel61Function1$(machine_score) as machine_score
                     latest(host) as Machine
                     dc(host) as "# Machines"
                     splitrow
                        $Panel61GroupBy$ as "$Panel61GroupByDisplay$"
                     $SearchFilter$
                     $AllowedIndexesFilter$
                  | eval "$Panel61Function1Display$ Machine score" = round(machine_score,1)
                  | eval "$Panel61Function1Display$ CPU score" = round(machine_cpu,1)
                  | eval "$Panel61Function1Display$ RAM score" = round(machine_ram,1)
                  | eval "$Panel61Function1Display$ Disk IO score" = round(machine_diskio,1)
                  | eval "$Panel61Function1Display$ Network availability score" = round(machine_networkavailability,1)
                  | eval "$Panel61Function1Display$ Stop errors score" = round(machine_stoperrors,1)
                  | eval "$Panel61Function1Display$ Disk space score" = round(machine_diskspace,1)
                  | eval sortfield=lower(Machine)
                  | table
                     "$Panel61GroupByDisplay$"
                     "# Machines"
                     "$Panel61Function1Display$ Machine score"
                     "$Panel61Function1Display$ CPU score"
                     "$Panel61Function1Display$ RAM score"
                     "$Panel61Function1Display$ Disk IO score"
                     "$Panel61Function1Display$ Network availability score"
                     "$Panel61Function1Display$ Stop errors score"
                     "$Panel61Function1Display$ Disk space score"
                     sortfield
                  | sort limit=0 sortfield
                  | fields - sortfield
               </query>
            </search>
            <option name="count">20</option>
            <option name="drilldown">row</option>
            <format type="color" field="$Panel61Function1Display$ Machine score">
               <colorPalette type="list">[#DC4E41,#F8BE34,#53A051]</colorPalette>
               <scale type="threshold">4,7</scale>
            </format>
            <format type="color" field="$Panel61Function1Display$ CPU score">
               <colorPalette type="list">[#DC4E41,#F8BE34,#53A051]</colorPalette>
               <scale type="threshold">4,7</scale>
            </format>
            <format type="color" field="$Panel61Function1Display$ RAM score">
               <colorPalette type="list">[#DC4E41,#F8BE34,#53A051]</colorPalette>
               <scale type="threshold">4,7</scale>
            </format>
            <format type="color" field="$Panel61Function1Display$ Disk IO score">
               <colorPalette type="list">[#DC4E41,#F8BE34,#53A051]</colorPalette>
               <scale type="threshold">4,7</scale>
            </format>
            <format type="color" field="$Panel61Function1Display$ Network availability score">
               <colorPalette type="list">[#DC4E41,#F8BE34,#53A051]</colorPalette>
               <scale type="threshold">4,7</scale>
            </format>
            <format type="color" field="$Panel61Function1Display$ Stop errors score">
               <colorPalette type="list">[#DC4E41,#F8BE34,#53A051]</colorPalette>
               <scale type="threshold">4,7</scale>
            </format>
            <format type="color" field="$Panel61Function1Display$ Disk space score">
               <colorPalette type="list">[#DC4E41,#F8BE34,#53A051]</colorPalette>
               <scale type="threshold">4,7</scale>
            </format>
            <drilldown>
                <set token="DrilldownFilterBy61">$click.value|s$</set>
            </drilldown>
         </table>
      </panel>
   </row>
   
   <!-- Row 7 -->
   <row depends="$DrilldownFilterBy61$">
      <panel>
         <title>Machines in selected group: $Panel61GroupByDisplay$ = $DrilldownFilterBy61$</title>
         <input type="dropdown" token="Panel71Function1" searchWhenChanged="true">
            <choice value="avg">average</choice>
            <choice value="count">count</choice>
            <choice value="max">maximum</choice>
            <choice value="median">median</choice>
            <choice value="min">minimum</choice>
            <choice value="stdev">standard deviation</choice>
            <choice value="sum">sum</choice>
            <default>avg</default>
            <label>Function:</label>
            <prefix></prefix>
            <suffix></suffix>
            <change>
               <condition value="avg">
                  <set token="Panel71Function1Display">Avg.</set>
               </condition>
               <condition value="count">
                  <set token="Panel71Function1Display">Count</set>
               </condition>
               <condition value="max">
                  <set token="Panel71Function1Display">Max.</set>
               </condition>
               <condition value="median">
                  <set token="Panel71Function1Display">Med.</set>
               </condition>
               <condition value="min">
                  <set token="Panel71Function1Display">Min.</set>
               </condition>
               <condition value="stdev">
                  <set token="Panel71Function1Display">Stdev</set>
               </condition>
               <condition value="sum">
                  <set token="Panel71Function1Display">Sum</set>
               </condition>
            </change>
         </input>
         <table>
            <search>
               <query>
                  | pivot `uA_DM_Score_Machine` Score_Machine
                     $Panel71Function1$(machine_cpu) as machine_cpu
                     $Panel71Function1$(machine_ram) as machine_ram
                     $Panel71Function1$(machine_diskio) as machine_diskio
                     $Panel71Function1$(machine_networkavailability) as machine_networkavailability
                     $Panel71Function1$(machine_stoperrors) as machine_stoperrors
                     $Panel71Function1$(machine_diskspace) as machine_diskspace
                     $Panel71Function1$(machine_score) as machine_score
                     splitrow
                        host as Machine
                     filter $Panel61GroupBy$ is $DrilldownFilterBy61|s$
                     $SearchFilter$
                     $AllowedIndexesFilter$
                  | eval "$Panel71Function1Display$ Machine score" = round(machine_score,1)
                  | eval "$Panel71Function1Display$ CPU score" = round(machine_cpu,1)
                  | eval "$Panel71Function1Display$ RAM score" = round(machine_ram,1)
                  | eval "$Panel71Function1Display$ Disk IO score" = round(machine_diskio,1)
                  | eval "$Panel71Function1Display$ Network availability score" = round(machine_networkavailability,1)
                  | eval "$Panel71Function1Display$ Stop errors score" = round(machine_stoperrors,1)
                  | eval "$Panel71Function1Display$ Disk space score" = round(machine_diskspace,1)
                  | eval sortfield=lower(Machine)
                  | table
                     Machine
                     "$Panel71Function1Display$ Machine score"
                     "$Panel71Function1Display$ CPU score"
                     "$Panel71Function1Display$ RAM score"
                     "$Panel71Function1Display$ Disk IO score"
                     "$Panel71Function1Display$ Network availability score"
                     "$Panel71Function1Display$ Stop errors score"
                     "$Panel71Function1Display$ Disk space score"
                     sortfield
                  | sort limit=0 sortfield
                  | fields - sortfield
               </query>
            </search>
            <option name="count">50</option>
            <option name="drilldown">row</option>
            <format type="color" field="$Panel71Function1Display$ Machine score">
               <colorPalette type="list">[#DC4E41,#F8BE34,#53A051]</colorPalette>
               <scale type="threshold">4,7</scale>
            </format>
            <format type="color" field="$Panel71Function1Display$ CPU score">
               <colorPalette type="list">[#DC4E41,#F8BE34,#53A051]</colorPalette>
               <scale type="threshold">4,7</scale>
            </format>
            <format type="color" field="$Panel71Function1Display$ RAM score">
               <colorPalette type="list">[#DC4E41,#F8BE34,#53A051]</colorPalette>
               <scale type="threshold">4,7</scale>
            </format>
            <format type="color" field="$Panel71Function1Display$ Disk IO score">
               <colorPalette type="list">[#DC4E41,#F8BE34,#53A051]</colorPalette>
               <scale type="threshold">4,7</scale>
            </format>
            <format type="color" field="$Panel71Function1Display$ Network availability score">
               <colorPalette type="list">[#DC4E41,#F8BE34,#53A051]</colorPalette>
               <scale type="threshold">4,7</scale>
            </format>
            <format type="color" field="$Panel71Function1Display$ Stop errors score">
               <colorPalette type="list">[#DC4E41,#F8BE34,#53A051]</colorPalette>
               <scale type="threshold">4,7</scale>
            </format>
            <format type="color" field="$Panel71Function1Display$ Disk space score">
               <colorPalette type="list">[#DC4E41,#F8BE34,#53A051]</colorPalette>
               <scale type="threshold">4,7</scale>
            </format>
            <drilldown>
               <link>
                  <![CDATA[
                     single_machine_detail?earliest=$earliest$&latest=$latest$&form.FilterField=shost&form.FilterOperator=in&form.FilterExpression=$click.value|s$
                  ]]>
               </link>
            </drilldown>
         </table>
      </panel>
   </row>

</form>
