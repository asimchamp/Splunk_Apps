<?xml version='1.0' encoding='utf-8'?>
<form version="1.1" script="main.js, application_ui_delays.js" stylesheet="main.css, application_ui_delays.css">

   <label>Application UI Unresponsiveness</label>
   <description>This dashboard displays information about times of unresponsiveness, i.e. when application user interfaces do not react to user input. Events are generated every time applications do not process window messages for 200 ms (or longer).</description>

   <fieldset autoRun="true">
      <input type="time" searchWhenChanged="true">
         <label>Time range:</label>
         <default>
            <earliest>-1h</earliest>
            <latest>now</latest>
         </default>
         <change>
            <eval token="TimeRangePickerSpan">relative_time(now(), latest) - relative_time(now(), earliest)</eval>
            <eval token="PivotPeriodAutoSolo">case('TimeRangePickerSpan' &lt; 350000, "auto", 'TimeRangePickerSpan' &lt; 610000, "hour", 1=1, "auto")</eval>
            <eval token="PivotPeriodAutoTimechart">case('TimeRangePickerSpan' &lt; 1200, "second", 'TimeRangePickerSpan' &lt; 300000, "minute", 'TimeRangePickerSpan' &lt; 700000, "hour", 1=1, "day")</eval>
         </change>
      </input>
      <input type="dropdown" token="FilterField" id="Input_FilterField">
         <label>Filter field:</label>
      </input>
      <input type="dropdown" token="FilterOperator" id="Input_FilterOperator">
         <label>Filter operator:</label>
      </input>
      <input type="text" token="FilterExpression" id="Input_FilterExpression">
         <label>Filter expression:</label>
         <default>*</default>
      </input>
      <input type="dropdown" token="FilterField2" id="Input_FilterField2" depends="$FilterLevel2$">
      </input>
      <input type="dropdown" token="FilterOperator2" id="Input_FilterOperator2" depends="$FilterLevel2$">
      </input>
      <input type="text" token="FilterExpression2" id="Input_FilterExpression2" depends="$FilterLevel2$">
      </input>
      <input type="dropdown" token="FilterField3" id="Input_FilterField3" depends="$FilterLevel3$">
      </input>
      <input type="dropdown" token="FilterOperator3" id="Input_FilterOperator3" depends="$FilterLevel3$">
      </input>
      <input type="text" token="FilterExpression3" id="Input_FilterExpression3" depends="$FilterLevel3$">
      </input>
      <input type="dropdown" token="FilterField4" id="Input_FilterField4" depends="$FilterLevel4$">
      </input>
      <input type="dropdown" token="FilterOperator4" id="Input_FilterOperator4" depends="$FilterLevel4$">
      </input>
      <input type="text" token="FilterExpression4" id="Input_FilterExpression4" depends="$FilterLevel4$">
      </input>
      <input type="dropdown" token="FilterField5" id="Input_FilterField5" depends="$FilterLevel5$">
      </input>
      <input type="dropdown" token="FilterOperator5" id="Input_FilterOperator5" depends="$FilterLevel5$">
      </input>
      <input type="text" token="FilterExpression5" id="Input_FilterExpression5" depends="$FilterLevel5$">
      </input>
      <input type="dropdown" token="FilterField6" id="Input_FilterField6" depends="$FilterLevel6$">
      </input>
      <input type="dropdown" token="FilterOperator6" id="Input_FilterOperator6" depends="$FilterLevel6$">
      </input>
      <input type="text" token="FilterExpression6" id="Input_FilterExpression6" depends="$FilterLevel6$">
      </input>
      <input type="text" token="FilterLevels" id="Input_FilterLevels" depends="$FilterLevels_Hidden$">
      </input>
      <input type="text" token="FilterDatamodel" id="Input_FilterDatamodel" depends="$FilterDatamodel_Hidden$">
         <default>Application_UIDelay</default>
      </input>
   </fieldset>

   <search id="Search_Single">
      <query>
      | pivot `uA_DM_Application_UIDelay` Application_UIDelay
            sum(UIDelayMs) as SumUIDelayMs
            avg(UIDelayMs) as AvgUIDelayMs
            count(UIDelayMs) as CountUIDelay
            $SearchFilter$
         | eval SumUIDelayS = round(SumUIDelayMs/1000,1)
         | eval AvgUIDelayS = round(AvgUIDelayMs/1000,1)
      </query>
   </search>

   <search id="Search_Single2">
      <query>
      </query>
   </search>

   <search id="Search_Table">
      <query>
      </query>
   </search>

   <!-- Row 0 -->
   <row>
      <panel>
         <title>Wait times for unresponsive $ModeLowerPlural$</title>
         <viz type="uberAgent.uberagent-singlevalue">
            <search base="Search_Single" />
            <option name="uberAgent.uberagent-singlevalue.1-field">SumUIDelayS</option>
            <option name="uberAgent.uberagent-singlevalue.1-title">Total wait time:</option>
            <option name="uberAgent.uberagent-singlevalue.1-afterLabel">s</option>
            <option name="uberAgent.uberagent-singlevalue.2-field">AvgUIDelayS</option>
            <option name="uberAgent.uberagent-singlevalue.2-title">Average wait time:</option>
            <option name="uberAgent.uberagent-singlevalue.2-afterLabel">s</option>
            <option name="uberAgent.uberagent-singlevalue.3-field">CountUIDelay</option>
            <option name="uberAgent.uberagent-singlevalue.3-title">Wait count:</option>
            <option name="uberAgent.uberagent-singlevalue.3-afterLabel"></option>
         </viz>
      </panel>
   </row>

   <!-- Row 1 -->
   <row>
      <panel>
         <title>$ModeUpper$ unresponsiveness over time</title>
         <chart>
            <search base="Search_Single2">
               <query>
               </query>
            </search>
            <option name="height">250</option>
            <option name="charting.chart">column</option>
            <option name="charting.chart.stackMode">stacked</option>
            <option name="charting.legend.placement">right</option>
            <option name="charting.axisY.includeZero">true</option>
            <option name="charting.axisTitleX.visibility">collapsed</option>
            <option name="charting.axisTitleY.text">Unresponsiveness (s)</option>
            <option name="charting.drilldown">none</option>
         </chart>
      </panel>
   </row>

   <!-- Row 2 -->
   <row>

      <!-- Column 1 -->
      <panel>
         <title>$ModeUpper$ unresponsiveness per host (top 10)</title>
         <input type="dropdown" token="Panel21Function1" id="Input_Panel21Function1" searchWhenChanged="true">
            <choice value="avg">average</choice>
            <choice value="count">count</choice>
            <choice value="max">maximum</choice>
            <choice value="median">median</choice>
            <choice value="min">minimum</choice>
            <choice value="stdev">standard deviation</choice>
            <choice value="sum">sum</choice>
            <default>sum</default>
            <label>Function:</label>
            <change>
               <condition value="avg">
                  <set token="Panel21Function1Display">Avg.</set>
               </condition>
               <condition value="count">
                  <set token="Panel21Function1Display">Count</set>
               </condition>
               <condition value="max">
                  <set token="Panel21Function1Display">Max.</set>
               </condition>
               <condition value="median">
                  <set token="Panel21Function1Display">Med.</set>
               </condition>
               <condition value="min">
                  <set token="Panel21Function1Display">Min.</set>
               </condition>
               <condition value="stdev">
                  <set token="Panel21Function1Display">Stdev</set>
               </condition>
               <condition value="sum">
                  <set token="Panel21Function1Display">Sum</set>
               </condition>
            </change>
         </input>
         <chart id="Chart_Panel21">
            <search>
               <query>
                  | pivot `uA_DM_Application_UIDelay` Application_UIDelay
                     $Panel21Function1$(UIDelayMs) as "FuncUIDelayMs"
                     splitrow
                        host
                     $SearchFilter$
                     | eval "$Panel21Function1Display$ $ModeLower$ UI unresponsiveness (s) per host" = round(FuncUIDelayMs/1000,1)
                     | sort limit=10 - "$Panel21Function1Display$ $ModeLower$ UI unresponsiveness (s) per host"
                     | fields
                        host
                        "$Panel21Function1Display$ $ModeLower$ UI unresponsiveness (s) per host"
               </query>
            </search>
            <option name="height">250</option>
            <option name="charting.chart">bar</option>
            <option name="charting.legend.placement">none</option>
            <option name="charting.axisTitleX.visibility">collapsed</option>
         </chart>
      </panel>

      <!-- Column 2 -->
      <panel>
         <title>$ModeUpper$ unresponsiveness per user (top 10)</title>
         <input type="dropdown" token="Panel22Function1" id="Input_Panel22Function1" searchWhenChanged="true">
            <choice value="avg">average</choice>
            <choice value="count">count</choice>
            <choice value="max">maximum</choice>
            <choice value="median">median</choice>
            <choice value="min">minimum</choice>
            <choice value="stdev">standard deviation</choice>
            <choice value="sum">sum</choice>
            <default>sum</default>
            <label>Function:</label>
            <change>
               <condition value="avg">
                  <set token="Panel22Function1Display">Avg.</set>
               </condition>
               <condition value="count">
                  <set token="Panel22Function1Display">Count</set>
               </condition>
               <condition value="max">
                  <set token="Panel22Function1Display">Max.</set>
               </condition>
               <condition value="median">
                  <set token="Panel22Function1Display">Med.</set>
               </condition>
               <condition value="min">
                  <set token="Panel22Function1Display">Min.</set>
               </condition>
               <condition value="stdev">
                  <set token="Panel22Function1Display">Stdev</set>
               </condition>
               <condition value="sum">
                  <set token="Panel22Function1Display">Sum</set>
               </condition>
            </change>
         </input>
         <chart id="Chart_Panel22">
            <search>
               <query>
                  | pivot `uA_DM_Application_UIDelay` Application_UIDelay
                     $Panel22Function1$(UIDelayMs) as "FuncUIDelayMs"
                     splitrow
                        User
                     $SearchFilter$
                     | eval "$Panel22Function1Display$ $ModeLower$ UI unresponsiveness (s) per user" = round(FuncUIDelayMs/1000,1)
                     | sort limit=10 - "$Panel22Function1Display$ $ModeLower$ UI unresponsiveness (s) per user"
                     | fields
                        User
                        "$Panel22Function1Display$ $ModeLower$ UI unresponsiveness (s) per user"
               </query>
            </search>
            <option name="height">250</option>
            <option name="charting.chart">bar</option>
            <option name="charting.legend.placement">none</option>
            <option name="charting.axisTitleX.visibility">collapsed</option>
         </chart>
      </panel>
   </row>

   <!-- Row 3 -->
   <row>

      <!-- Column 1 -->
      <panel>
         <title>$ModeUpper$ unresponsiveness per application (top 10)</title>
         <input type="dropdown" token="Panel31Function1" id="Input_Panel31Function1" searchWhenChanged="true">
            <choice value="avg">average</choice>
            <choice value="count">count</choice>
            <choice value="max">maximum</choice>
            <choice value="median">median</choice>
            <choice value="min">minimum</choice>
            <choice value="stdev">standard deviation</choice>
            <choice value="sum">sum</choice>
            <default>sum</default>
            <label>Function:</label>
            <change>
               <condition value="avg">
                  <set token="Panel31Function1Display">Avg.</set>
               </condition>
               <condition value="count">
                  <set token="Panel31Function1Display">Count</set>
               </condition>
               <condition value="max">
                  <set token="Panel31Function1Display">Max.</set>
               </condition>
               <condition value="median">
                  <set token="Panel31Function1Display">Med.</set>
               </condition>
               <condition value="min">
                  <set token="Panel31Function1Display">Min.</set>
               </condition>
               <condition value="stdev">
                  <set token="Panel31Function1Display">Stdev</set>
               </condition>
               <condition value="sum">
                  <set token="Panel31Function1Display">Sum</set>
               </condition>
            </change>
         </input>
         <chart id="Chart_Panel31">
            <search>
               <query>
                  | pivot `uA_DM_Application_UIDelay` Application_UIDelay
                     $Panel31Function1$(UIDelayMs) as "FuncUIDelayMs"
                     splitrow
                        AppName as Application
                     $SearchFilter$
                     | eval "$Panel31Function1Display$ $ModeLower$ UI unresponsiveness (s) per application" = round(FuncUIDelayMs/1000,1)
                     | sort limit=10 - "$Panel31Function1Display$ $ModeLower$ UI unresponsiveness (s) per application"
                     | fields
                        Application
                        "$Panel31Function1Display$ $ModeLower$ UI unresponsiveness (s) per application"
               </query>
            </search>
            <option name="height">250</option>
            <option name="charting.chart">bar</option>
            <option name="charting.legend.placement">none</option>
            <option name="charting.axisTitleX.visibility">collapsed</option>
         </chart>
      </panel>

      <!-- Column 2 -->
      <panel>
         <title>$ModeUpper$ unresponsiveness per process (top 10)</title>
         <input type="dropdown" token="Panel32Function1" id="Input_Panel32Function1" searchWhenChanged="true">
            <choice value="avg">average</choice>
            <choice value="count">count</choice>
            <choice value="max">maximum</choice>
            <choice value="median">median</choice>
            <choice value="min">minimum</choice>
            <choice value="stdev">standard deviation</choice>
            <choice value="sum">sum</choice>
            <default>sum</default>
            <label>Function:</label>
            <change>
               <condition value="avg">
                  <set token="Panel32Function1Display">Avg.</set>
               </condition>
               <condition value="count">
                  <set token="Panel32Function1Display">Count</set>
               </condition>
               <condition value="max">
                  <set token="Panel32Function1Display">Max.</set>
               </condition>
               <condition value="median">
                  <set token="Panel32Function1Display">Med.</set>
               </condition>
               <condition value="min">
                  <set token="Panel32Function1Display">Min.</set>
               </condition>
               <condition value="stdev">
                  <set token="Panel32Function1Display">Stdev</set>
               </condition>
               <condition value="sum">
                  <set token="Panel32Function1Display">Sum</set>
               </condition>
            </change>
         </input>
         <chart id="Chart_Panel32">
            <search>
               <query>
                  | pivot `uA_DM_Application_UIDelay` Application_UIDelay
                     $Panel32Function1$(UIDelayMs) as "FuncUIDelayMs"
                     splitrow
                        ProcessName as Process
                     $SearchFilter$
                     | eval "$Panel32Function1Display$ $ModeLower$ UI unresponsiveness (s) per process" = round(FuncUIDelayMs/1000,1)
                     | sort limit=10 - "$Panel32Function1Display$ $ModeLower$ UI unresponsiveness (s) per process"
                     | fields
                        Process
                        "$Panel32Function1Display$ $ModeLower$ UI unresponsiveness (s) per process"
               </query>
            </search>
            <option name="height">250</option>
            <option name="charting.chart">bar</option>
            <option name="charting.legend.placement">none</option>
            <option name="charting.axisTitleX.visibility">collapsed</option>
         </chart>
      </panel>
   </row>

   <!-- Row 4 -->
   <row>
      <panel>
         <title>Data table</title>
         <input type="dropdown" token="Panel41Function1" id="Input_Panel41Function1" searchWhenChanged="true">
            <choice value="avg">average</choice>
            <choice value="count">count</choice>
            <choice value="max">maximum</choice>
            <choice value="median">median</choice>
            <choice value="min">minimum</choice>
            <choice value="stdev">standard deviation</choice>
            <choice value="sum">sum</choice>
            <default>sum</default>
            <label>Function:</label>
            <prefix></prefix>
            <suffix></suffix>
            <change>
               <condition value="avg">
                  <set token="Panel41Function1Display">Avg.</set>
               </condition>
               <condition value="count">
                  <set token="Panel41Function1Display">Count</set>
               </condition>
               <condition value="max">
                  <set token="Panel41Function1Display">Max.</set>
               </condition>
               <condition value="median">
                  <set token="Panel41Function1Display">Med.</set>
               </condition>
               <condition value="min">
                  <set token="Panel41Function1Display">Min.</set>
               </condition>
               <condition value="stdev">
                  <set token="Panel41Function1Display">Stdev</set>
               </condition>
               <condition value="sum">
                  <set token="Panel41Function1Display">Sum</set>
               </condition>
            </change>
         </input>
         <table id="Table_Panel41">
            <search base="Search_Table">
               <query>
               </query>
            </search>
            <option name="count">50</option>
            <option name="drilldown">row</option>
         </table>

      <html src="application_ui_delays_explanation.html">
      </html>
      </panel>
   </row>

</form>
