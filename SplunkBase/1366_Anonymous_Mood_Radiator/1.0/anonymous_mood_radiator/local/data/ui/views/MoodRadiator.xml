<?xml version='1.0' encoding='utf-8'?>
<view template="dashboard.html">
	<label>Anonymous Mood Radiator</label>
	<module name="AccountBar" layoutPanel="appHeader"/>
	<module name="AppBar" layoutPanel="navigationHeader"/>
	<module name="SideviewUtils" layoutPanel="appHeader"/>
	<module name="Message" layoutPanel="messaging">
		<param name="filter">*</param>
		<param name="clearOnJobDispatch">False</param>
		<param name="maxSize">1</param>
	</module>

	<module name="TitleBar" layoutPanel="viewHeader">
		<param name="actionsMenuFilter">dashboard</param>
	</module>
	<module name="TimeRangePicker" layoutPanel="splSearchControls-inline" autoRun="True">
		<param name="searchWhenChanged">true</param>
		<param name="selected">Last 7 days</param>
              	
	<module name="Search" layoutPanel="splSearchControls-inline" autoRun="True">
             <param name="search"> sourcetype=moodLog | stats count by project </param>
  
		<module name="Pulldown">
	        	<param name="name">project_selected</param>
                	<param name="label">Select Project</param>

	                <param name="postProcess"> dedup project | sort project </param>

                     	<param name="searchFieldsToDisplay">
                        	<list>
                            	<param name="label">project</param>
                            	<param name="value">project</param>
                        	</list>
               	      </param>
               
                 <module name="SubmitButton" layoutPanel="splSearchControls-inline">
			<param name="allowSoftSubmit">True</param>
			<param name="label">Go</param>
                 
                 
		<module name="Search" autoRun="True">
			<!--
				This is the base search for ongard-stomp. Executed when the StaticSelect is changed (or the SubmitButton   is clicked)
			-->
			<param name="search"> 
				sourcetype=moodLog | extract pairdelim=" ", kvdelim="=:", auto=f   
                                
                                | stats count as total_responses avg(your_mood) as your_mood avg(team_work) as team_work avg(process) as process avg(leadership) as leadership avg(deadline) as deadline  by _time, timestamp, project
                                | fields + *
			</param>


                  
		<module name="StaticContentSample" layoutPanel="panel_row2_col1" autoRun="True">
                	<param name="text"><![CDATA[<div align="center"><h2><b>Mood graph for selected project </b></h2></div>]]></param>                  
                </module>                  
                  
        	<module name="GenericHeader" layoutPanel="panel_row2_col1_grp1">
				<param name="label">'Your Mood'</param>
				<module name="PostProcess">
					<param name="search"><![CDATA[
						| search project="$project_selected$"
                   				 | chart avg(your_mood) 
					]]>
					</param>
					<module name="HiddenChartFormatter">                               	                                                 						
						<param name="chart">markerGauge</param>  
						<param name="charting.chart.rangeValues">[1,3,5]</param>
						<param name="charting.gaugeColors">[0xbf3030,0xffe800,0x84e900]</param>
						<param name="charting.chart.style">minimal</param>
						<module name="FlashChart">
							<param name="width">50%</param>
							<param name="height">200px</param>
						</module>
					</module>                                                                 
				</module>
			</module> 
					                  
			<module name="GenericHeader" layoutPanel="panel_row2_col1_grp2">
				<param name="label">'Team Work'</param>
				<module name="PostProcess">
					<param name="search"><![CDATA[
						| search project="$project_selected$"
                   				 | chart avg(team_work) 
					]]>
					</param>

					<module name="HiddenChartFormatter">                               	                                                 						
						<param name="chart">markerGauge</param>  
						<param name="charting.chart.rangeValues">[1,3,5]</param>
						<param name="charting.gaugeColors">[0xbf3030,0xffe800,0x84e900]</param>
						<param name="charting.chart.style">minimal</param>
						<module name="FlashChart">
							<param name="width">50%</param>
							<param name="height">200px</param>
						</module>
					</module>                                 
				</module>
			</module> 
				                  
			<module name="GenericHeader" layoutPanel="panel_row2_col1_grp3">
				<param name="label">'Process'</param>
				<module name="PostProcess">
					<param name="search"><![CDATA[
						| search project="$project_selected$"
                   				 | chart avg(process) 
					]]>
					</param>

					<module name="HiddenChartFormatter">                               	                                                 						
						<param name="chart">markerGauge</param>  
						<param name="charting.chart.rangeValues">[1,3,5]</param>
						<param name="charting.gaugeColors">[0xbf3030,0xffe800,0x84e900]</param>
						<param name="charting.chart.style">minimal</param>
						<module name="FlashChart">
							<param name="width">50%</param>
							<param name="height">200px</param>
						</module>
					</module>                                 
				</module>
			</module> 								  
  
  			<module name="GenericHeader" layoutPanel="panel_row2_col1_grp4">
				<param name="label">'Leadership'</param>
				<module name="PostProcess">
					<param name="search"><![CDATA[
						| search project="$project_selected$"
                   				 | chart avg(leadership) 
					]]>
					</param>

					<module name="HiddenChartFormatter">                               	                                                 						
						<param name="chart">markerGauge</param>  
						<param name="charting.chart.rangeValues">[1,3,5]</param>
						<param name="charting.gaugeColors">[0xbf3030,0xffe800,0x84e900]</param>
						<param name="charting.chart.style">minimal</param>
						<module name="FlashChart">
							<param name="width">50%</param>
							<param name="height">200px</param>
						</module>
					</module>                                 
				</module>
			</module> 
  
			<module name="GenericHeader" layoutPanel="panel_row2_col1_grp5">
				<param name="label">'Deadline'</param>
				<module name="PostProcess">
					<param name="search"><![CDATA[
						| search project="$project_selected$"
                   				 | chart avg(deadline) 
					]]>
					</param>

					<module name="HiddenChartFormatter">                               	                                                 						
						<param name="chart">markerGauge</param>  
						<param name="charting.chart.rangeValues">[1,3,5]</param>
						<param name="charting.gaugeColors">[0xbf3030,0xffe800,0x84e900]</param>
						<param name="charting.chart.style">minimal</param>
						<module name="FlashChart">
							<param name="width">50%</param>
							<param name="height">200px</param>
						</module>
					</module>                                 
				</module>
			</module> 	  
                  
			<module name="GenericHeader" layoutPanel="panel_row3_col1">
				<param name="label">Overall Mood Over Time</param>
				<module name="PostProcess">
					<param name="search"><![CDATA[
						| search project="$project_selected$"
                                                
                   				 | chart  avg(your_mood) over timestamp
					]]>
					</param>

					<module name="HiddenChartFormatter">
							<param name="chart">line</param>
							
                                			<param name="primaryAxisTitle.text">_time</param>
							<param name="legend.placement">right</param>
                                
                                			<param name="charting.axisLabelsX.majorLabelStyle.rotation">90</param>
                        			        <param name="charting.axisLabelsX.majorLabelStyle.overflowMode">default</param> 							
							<module name="FlashChart"/>
														 
					</module>
				</module>         				
			</module> 	                    
                       	                                                 
	</module> <!--/BaseSearch-->
        </module> <!--/Project Pulldown-->
        </module> <!--/SearchForDropDown-->
          </module> <!--/Submit-->  
	</module>  <!--/TimerangePicker-->
                 
</view>
