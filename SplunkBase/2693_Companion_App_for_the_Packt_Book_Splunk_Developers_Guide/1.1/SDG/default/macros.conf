[boxPlot(1)]
args = metric
definition = stats min($metric$) as lout perc25($metric$) as q1 avg($metric$) as mean perc75($metric$) as q3 max($metric$) as rout | eval iqr = q3 - q1 | eval lw = (q1 - ( iqr * 1.5 )) | eval lw = if (lw < lout, lout, lw) | eval rw = (q3 + ( iqr * 1.5 )) | eval rw = if (rw > rout, rout, rw) | fields lout lw q1 mean q3 rw rout
[currentSalesStats]
definition = `meh_base` sourcetype=meh_details | head 1 | stats latest(results.collection1{}.title.text) as "Product" latest(results.collection1{}.meh_clicks) as "Meh Clicks" latest(results.collection1{}.visitors) as "Visitors" latest(results.collection1{}.no_bite) as "% Didn't Fall for It" latest(results.collection1{}.product_sold) as "Items Sold" latest(results.collection1{}.product_total_revenue) as "Total Revenue"|transpose | rename column as " " "row 1" as "  "
[detailsExtraction]
definition = rename results.collection1{}.title.text as dpt results.collection1{}.meh_clicks as meh_clicks results.collection1{}.product_sold as product_sold results.collection1{}.product_total_revenue as product_total_revenue results.collection1{}.visitors as visitors results.collection1{}.no_bite as product_bite
[forumExtraction]
definition = spath | rename results.meh_forum{}.op.text AS post_op results.meh_forum{}.op_action.text as poa results.meh_forum{}.post_activity.text as post_activity results.meh_forum{}.post_title.text as post_title results.meh_forum{}.post_votes as post_votes results.meh_forum{}.post_title.href as post_url | rex field=poa "[^\s]*(?<post_op_action>[^\r\n]*)" |  eval a = mvzip(post_title, post_votes) | eval b = mvzip(a, post_op) | eval c = mvzip(b, post_op_action) | eval da = mvzip(c, post_activity) | eval d = mvzip(da, post_url) | table _time d thisversionrun | mvexpand d | eval d = split(d,",") | eval title = mvindex(d,0) | eval votes = mvindex(d,1) | eval op = mvindex(d,2) | eval op_action = mvindex(d,3) | eval activity = mvindex(d,4) | eval url = mvindex(d,5)
[forumSummary]
definition = index=summary category=meh_forum
[forumSummaryGen]
definition = sourcetype=meh_forum index=splunk_developers_guide earliest=-5m@m latest=@m |dedup version | `forumExtraction` | table _time title votes activity op op_action url | eval category="meh_forum" | collect index=summary
[mehExtraction]
definition = rename deal.title as mpt deal.items{}.condition as product_condition deal.items{}.price as product_price deal.soldOutAt as product_sellout deal.specifications as product_specs deal.url as product_url deal.id as product_id
[mehToCA(1)]
args = price
definition = "$price$ * 1.24"
iseval = true
[meh_base]
definition = index = splunk_developers_guide sourcetype=meh OR sourcetype=meh_details
iseval = 0
[meh_product_summary_gen]
definition = `meh_base` earliest=-1d@d | spath | `detailsExtraction`| `mehExtraction` | eval product_title = coalesce(mpt, dpt) | transaction maxspan=1m product_title | stats latest(product_condition) as product_condition latest(product_price) as product_price latest(product_title) as product_title values(eventtype) as product_type earliest(timestamp) as product_date latest(product_sellout) as product_sellout latest(product_specs) as product_specs latest(product_url) as product_url latest(visitors) as product_visitors latest(meh_clicks) as product_meh_clicks latest(product_sold) as product_sold latest(product_total_revenue) as product_total_revenue by product_id | inputlookup meh_products append=t | eval product_soldout = if(isnotnull(product_sellout), "true", "false")| dedup product_id  | outputlookup meh_products
[pollExtraction]
definition = rename poll.answers{}.text as PollText poll.answers{}.voteCount as PollVote poll.title AS PollTitle poll.id as PollId|  eval x=mvzip(PollText,PollVote,"~") | table _time,PollText,PollVote,x, PollTitle, timestamp, PollId | mvexpand x | eval x = split(x,"~") | eval answer=mvindex(x,0) | eval votes=mvindex(x,1)
[productBoxPlot]
definition = inputlookup meh_products | `boxPlot(product_price)`
[productBoxPlots]
definition = inputlookup meh_products | table product_price product_sold product_meh_clicks product_visitors product_total_revenue | transpose 10000
