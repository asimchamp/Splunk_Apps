<dashboard>
  <label>Dashboards &amp; General Information</label>
  <description/>
  <row>
    <html>
      <h1>Purpose</h1>
      <p>This area is to provide a little more background into how portions of this app work under the covers.</p>
    </html>
  </row>
  <row>
    <html>
      <h2>Field Macros</h2>
      <p>You will see a number of macros labeled ct_fields_&lt;config&gt;. The primary way these are used is to make the various stats commands dynamic. This is done by referencing the appropriate macro in the split by section. In other words if you are looking at the props config elements the query would look like <pre>... | stats count by host `ct_fields_props`| ... </pre>While the order of the fields doesn't particularly matter it is important to understand the implications for adding or removing fields in these macros.</p>
    </html>
  </row>
  <row>
    <html>
      <h2>Change Overview</h2>
      <p>This dashboard is the central focus of this app. The following are a couple items relative to how it works</p>
      <ul>
        <li>The following states are in place for changes: New, Updated, New &amp; Updated, Deleted, and No Change</li>
        <li>One of the development goals was to make the change categorization relative to the report period covered. In other words if your reporting interval is 1 week and you create something new in one week and make a change the next week the report will show "New" and "Updated" respectively. If you were to adjust the report period to the last 30 days that report would show the state as being "New &amp; Updated". If in week three you were to delete the object and you were still looking at the 30 day report the state would just show "Deleted".</li>
        <li>Because all states are relative to the reporting period you will not see any results in this dashboard when it is first deployed.</li>
        <li>If you make a change to the queries in the TA you will likely want to blacklist those dates; depending on the change you could potentially see all content for that config show up as new. This was useful during the development of this app so was left in. To do so adjust the ct_blacklisted_dates macro.</li>
        <li>The difference between the ct_display_change and ct_display_change_no_app is the field "app" is used in the master macro ct_change_state but depending on the configuration item the listed "app" isn't particularly relevant. Generally for those the app will be "system". Because of the complexity of the ct_change_state macro and the desire to use it across all configs it was easier to adjust the final format than to account for it elsewhere.</li>
        <li>You might notice the queries in the TA product a field labeled "app_label" that is never used. It might be used in future versions of this app and depending on the use case for developing your on content and config item could be useful for showing a user friendly string name for the app the content is in. For example this app's file name is CTCM but the app_label would show "Config Tracker &amp; Change Management</li>
        
        
      </ul>
    </html>
  </row>
  <row>
    <html>
      <h2>Change Investigation</h2>
      <p>The idea behind this app was to give the admin a quick glance into changes without having to develop their own queries. Additionally you could run a | rest query to look at how something is configured within the UI but that will just show how it is configured now - not what it was.</p>
      <ul>
        <li>It was decided that to help in invetigating change once you select the config of interest the top would show a summary of activity and the bottom the details. This helps in that you don't need to flip back and forth between this and the Change Overview dashboard.</li>
        <li>The drop down menu in the details section will start to populate once you've selected a config of interest. By default it will show all items but perhaps you want to focus in on one item. In this case the limiting field is "title" which can be thought of in terms of the item's name or stanza name.</li>
        <li>You will need to edit the Host drop down item with your search head and indexer naming convention in order to use the "All Indexers" or "All Search Heads" selections.</li>
        <li>Unlike the Change Overview dashboard the Change Details portion of this dashboard does not use the ct_display_change* macros so the field "app" will show up for all.</li>
        <li>Change Details dates for updated content: The earliest date you see is the first time that config item was seen relative to your search timeframe (selection at the top of the dashboard). Subsequent dates show day when the item was changed. Recall that by default the data collection queries in the TA run at 11:30pm. Any number of changes might have occurred during the day; what is recorded is the object's current state as of when the TA qureies run.</li>
        
      </ul>
    </html>
  </row>
  <row>
    <html>
      <h2>Creating New Queries</h2>
      <p>By all means feel free to add to the collection queries for config items you have interest in. The methodology is pretty straight forward.</p>
      <ol>
        <li>Create the appropriate REST query in your UI</li>
        <li>Make sure to include the following fields: app, author, &amp; title. Optionally consider adding: sharing, status, and app_label. Refer to the queries in the TA for examples of how REST searches can work within Splunk and how these fields are being populated.</li>
        <li>Transfer the new query to the TA and deploy. To make things easier you can simply copy/paste an existing one and change the appropriate elements.</li>
        <li>Create a corresponding ct_fields macro. The order of the list isn't particularly important though it does impact the view in the Change Investigation &gt; Change Details dashboard panel.</li>
        <li>Change Overivew Dashboard - Copy an existing panel and make the appropriate changes to the query: field macros, config name,etc.</li> 
        
      </ol>
    </html>
  </row>
</dashboard>