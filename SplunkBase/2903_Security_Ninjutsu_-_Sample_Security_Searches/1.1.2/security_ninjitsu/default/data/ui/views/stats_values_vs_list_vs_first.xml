<dashboard>
  <label>Stats - Values vs List vs First and more</label>
  <row>
    <html>
      <h2>Background</h2>
      <p>A core workhorse of the Splunk computational capabilities, stats has many functions that are useful in many ways. But frequently, an overlooked element is list. List is a powerful techinque for analyzing data, but sits in the shadow of it's more popular cousin, values.</p>
      <p>Below, find a small set of examples enumerating stats values vs list vs etc. Note that list() is not available with tstats or pivot searches.</p>
    </html>
  </row>
  <row>
    <html>
      <h2>Key Techniques:</h2>
<p>This example leverages the following useful techniques:</p>
	<ul>
		<li>Stats values: Values will give you an deduplicated list of field values, in alphabetical order. Consider questions here like "What webpages did my top spenders view?"</li>
      <li>Stats list: List will give you a list of field values, <b>not</b> deduplicated, in the order they were seen in the data. Consider questions here like "What was the series of pages that caused someone to reach that 404?"</li>
      <li>Stats earliest: Will give you the oldest record. "What was the first page they hit?"</li>
      <li>Stats first: Will give you the first record we saw. "What was the last page someone hit?"</li>
      </ul>
    </html>
  </row>
  <row>
    <html>
      <h2>The Search</h2>
      <pre>
        <![CDATA[
index=_internal sourcetype=splunk_web_access user=admin 
| rex field=uri_path "(\/[^\/ ]*)?\/app\/(?<myapp>[^\/ ]*)\/(?<myview>[^\/ \?]*)" | eval myview = if(myview="@go","savedsearch",myview)
| eval app_and_view = myapp . "/" . myview
| stats values(app_and_view) list(app_and_view) earliest(app_and_view) first(app_and_view)
]]>      </pre>
      <h3>Line by Line</h3>
  <pre><![CDATA[index=_internal sourcetype=splunk_web_access user=admin ]]></pre>
<ul><li>What: Web Access Logs Data Type</li><li>Why: I've used this search for many scenarios including what search commands people run (e.g., "did they use transaction?" versus "did they have seven rex commands?"), but web logs are a very common use case.</li></ul>
<pre><![CDATA[| rex field=uri_path "(\/[^\/ ]*)?\/app\/(?<myapp>[^\/ ]*)\/(?<myview>[^\/ \?]*)" | eval myview = if(myview="@go","savedsearch",myview)
| eval app_and_view = myapp . "/" . myview]]></pre>
<ul><li>What: Extract the app and view visited, and normalize slightly.</li></ul>
<pre><![CDATA[| stats values(app_and_view) list(app_and_view) earliest(app_and_view) first(app_and_view)]]></pre>
<ul><li>What: Pull the Stats:
<ol><li>values(app_and_view) will show every view you've visited.</li>
<li>list(app_and_view) will show the most recent &lt;up to&gt; 10,000 pages you've visited.</li>
<li>earliest(app_and_view) will show you the oldest view you've visited.</li>
<li>first(app_and_view) will show you the *first record the search encounters* aka the newest record.</li>
</ol>
</li></ul>
    </html>
  </row>
  <row>
    <panel>
      <table>
        <search>
          <query>
            <![CDATA[
index=_internal sourcetype=splunk_web_access user=admin 
| rex field=uri_path "(\/[^\/ ]*)?\/app\/(?<myapp>[^\/ ]*)\/(?<myview>[^\/ \?]*)" | eval myview = if(myview="@go","savedsearch",myview)
| eval app_and_view = myapp . "/" . myview
| stats values(app_and_view) list(app_and_view) earliest(app_and_view) first(app_and_view)
]]>
          </query>
          <earliest></earliest>
          <latest></latest>
        </search>
      </table>
    </panel>
  </row>
</dashboard>