[sourcelog]
definition = sourcetype=OXO
iseval = 0

[US_DetailCall_RENAME]
definition = eval OXO_Hour = if(OXO_Call_Duration_Hour>20, "00", OXO_Call_Duration_Hour)\
| eval OXO_Call_Duration_Correct = OXO_Hour.":".OXO_Call_Duration_Min.":".OXO_Call_Duration_Sec\
| rex field=OXO_Call_Start "(?<OXO_Day>.*)\/(?<OXO_Month>.*)\/(?<OXO_Year>.*)"\
| eval OXO_Year=toString(date_year)\
| eval OXO_US_Date=OXO_Year."/".OXO_Month."/".OXO_Day\
| rename \
OXO_User AS "User"\
OXO_User_Charged AS "Internal User"\
OXO_Direction AS "Call Direction"\
OXO_Line AS "Line Type"\
OXO_US_Date AS "Date"\
OXO_Time AS "Hour"\
OXO_Call_Duration_Correct AS "Duration"\
OXO_Unit AS "Unit"\
OXO_Service AS "Service"\
OXO_Complement AS "Complement"\
OXO_Dialled_Number AS "Dialled Number"\
OXO_Dialling_Mode AS "Dialling Mode"\
OXO_Entity AS "Entity"\
OXO_Ring_Time AS "Ring Duration"\
OXO_Cost AS "Cost"\
OXO_Business_Code AS "Business Code"\
OXO_User_Name AS "User Name"\
OXO_Node AS "Node"\
OXO_Carrier AS "Carrier"\
OXO_Initial_User AS "Initial User"\
OXO_User_Charged2 AS "User Charged"\
OXO_Line4 AS "Channel"\
OXO_Call_Duration_Hour AS "OXO_HOUR"\
OXO_Duration_Hour AS "Total Calls Duration"
iseval = 0

[US_Short_Table]
definition = table\
"Date"\
"Hour"\
"Duration"\
"User Name"\
"Internal User"\
"Call Direction"\
"Dialled Number"\
"Line Type"\
"Channel"\
"Service"
iseval = 0

[US_DetailCall_Table]
definition = table\
"Date"\
"Hour"\
"Duration"\
"User Name"\
"User"\
"Internal User"\
"Call Direction"\
"Line Type"\
"Channel"\
"Unit"\
"Service"\
"Complement"\
"Dialled Number"\
"Dialling Mode"\
"Entity"\
"Ring Duration"\
"Cost"\
"Business Code"\
"Carrier"\
"Initial User"\
"User Charged"
iseval = 0


[FR_Short_Table]
definition = table \
"Date"\
"Heure"\
"Durée"\
"Nom Utilisateur"\
"Utilisateur Interne"\
"Sens de l'Appel"\
"Numéro Composé"\
"Type de Ligne"\
"Canal"\
"Service"
iseval = 0

[FR_DetailCall_Table]
definition = table \
"Date"\
"Heure"\
"Durée"\
"Nom Utilisateur"\
"Utilisateur"\
"Utilisateur Interne"\
"Sens de l'Appel"\
"Type de Ligne"\
"Canal"\
"Unité"\
"Service"\
"Complément"\
"Numéro Composé"\
"Mode de Numérotation"\
"Entité"\
"Durée de Sonnerie"\
"Coût"\
"Code Affaire"\
"Opérateur"\
"Utilisateur Initial"\
"Utilisateur Facturé"
iseval = 0

[FR_DetailCall_RENAME]
definition = eval OXO_Hour = if(OXO_Call_Duration_Hour>20, "00", OXO_Call_Duration_Hour)\
| eval OXO_Call_Duration_Correct = OXO_Hour.":".OXO_Call_Duration_Min.":".OXO_Call_Duration_Sec\
| rex field=OXO_Call_Start "(?<OXO_Day>.*)\/(?<OXO_Month>.*)\/(?<OXO_Year>.*)"\
| eval OXO_Year=toString(date_year)\
| eval OXO_FR_Date=OXO_Day."/".OXO_Month."/".OXO_Year\
| rename \
OXO_User AS  "Utilisateur"\
OXO_User_Charged AS "Utilisateur Interne"\
OXO_Direction AS "Sens de l'Appel"\
OXO_Line AS "Type de Ligne"\
OXO_FR_Date AS "Date"\
OXO_Time AS "Heure"\
OXO_Call_Duration_Correct AS "Durée"\
OXO_Unit AS "Unité"\
OXO_Service AS "Service"\
OXO_Complement AS "Complément"\
OXO_Dialled_Number AS "Numéro Composé"\
OXO_Dialling_Mode AS "Mode de Numérotation"\
OXO_Entity AS "Entité"\
OXO_Ring_Time AS "Durée de Sonnerie"\
OXO_Cost AS "Coût"\
OXO_Business_Code AS "Code Affaire"\
OXO_User_Name AS "Nom Utilisateur"\
OXO_Node AS "Noeud"\
OXO_Carrier AS "Opérateur"\
OXO_Initial_User AS "Utilisateur Initial"\
OXO_User_Charged2 AS "Utilisateur Facturé"\
OXO_Line4 AS "Canal"\
OXO_Call_Duration_Hour AS "OXO_HOUR"\
OXO_Duration_Hour AS "Durée Totale d'Appels"
iseval = 0

[OXO_MACRO_Duration_Conversion]
definition = | eval OXO_Hour = if(OXO_Call_Duration_Hour>20, "00", OXO_Call_Duration_Hour)\
| eval OXO_Call_Duration_Correct = OXO_Hour.":".OXO_Call_Duration_Min.":".OXO_Call_Duration_Sec
iseval = 0

[OXO_MACRO_Padding]
definition = eval OXO_UN=split(OXO_User_Name,".")\
| eval OXO_User_Name=mvindex(OXO_UN,0)
iseval = 0

[OXO_MACRO_Saturation]
definition = eval OXO_Hour = if(OXO_Call_Duration_Hour>20, "00", OXO_Call_Duration_Hour)\
| eval OXO_Call_Duration_Correct = OXO_Hour.":".OXO_Call_Duration_Min.":".OXO_Call_Duration_Sec\
| convert dur2sec(OXO_Call_Duration_Correct) AS Call_Duration
iseval = 0

[OXO_MACRO_Duration]
definition = eval OXO_Hour = if(OXO_Call_Duration_Hour>20, "00", OXO_Call_Duration_Hour)\
| eval OXO_Call_Duration_Correct = OXO_Hour.":".OXO_Call_Duration_Min.":".OXO_Call_Duration_Sec\
| convert dur2sec(OXO_Call_Duration_Correct) AS OXO_Duration
iseval = 0

[OXO_MACRO_Total_Duration]
definition = eval OXO_Hour = if(OXO_Call_Duration_Hour>20, "00", OXO_Call_Duration_Hour)\
| eval OXO_Call_Duration_Correct = OXO_Hour.":".OXO_Call_Duration_Min.":".OXO_Call_Duration_Sec\
| convert dur2sec(OXO_Call_Duration_Correct) AS OXO_Duration\
| stats sum(OXO_Duration) AS Total_Duration by  OXO_User_Name\
| sort -Total_Duration\
| eval OXO_Duration_Hour=tostring(Total_Duration, "duration")
iseval = 0

[OXO_MACRO_Global_Duration]
definition = eval OXO_Hour = if(OXO_Call_Duration_Hour>20, "00", OXO_Call_Duration_Hour)\
| eval OXO_Call_Duration_Correct = OXO_Hour.":".OXO_Call_Duration_Min.":".OXO_Call_Duration_Sec\
| convert dur2sec(OXO_Call_Duration_Correct) AS OXO_Duration\
| stats sum(OXO_Duration) AS Total_Duration\
| sort -Total_Duration\
| eval OXO_Duration_Hour=tostring(Total_Duration, "duration")
iseval = 0
