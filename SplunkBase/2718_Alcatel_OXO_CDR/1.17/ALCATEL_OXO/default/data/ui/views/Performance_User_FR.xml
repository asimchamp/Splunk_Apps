<form>
  <label>Performance Utilisateur</label>
  <fieldset submitButton="false" autoRun="true">
    <input type="time" token="field1" searchWhenChanged="true">
      <label>Période d'Analyse</label>
      <default>
        <earliest>@w1</earliest>
        <latest>now</latest>
      </default>
    </input>
    <input type="text" token="Token_OXO_User_Name">
      <label>Nom d'Utilisateur + *</label>
      <default>*</default>
      <initialValue>*</initialValue>
    </input>
  </fieldset>
  <row>
    <panel>
      <chart>
        <title>Appels Externes Reçus et Emis</title>
        <search>
          <query>`sourcelog`  
(OXO_Direction="&lt;--"  OR  OXO_Direction="--&gt;")
OXO_Call_Duration!="00:00:00"
OXO_User_Name=$Token_OXO_User_Name$
| timechart count
| rename count AS " Nbre d'Appels"</query>
          <earliest>$field1.earliest$</earliest>
          <latest>$field1.latest$</latest>
        </search>
        <option name="charting.axisTitleX.text">Date</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.showDataLabels">all</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
      </chart>
    </panel>
    <panel>
      <table>
        <title>TOP 50 - Appels Externes Reçus et Emis</title>
        <search>
          <query>`sourcelog`  
(OXO_Direction="--&gt;" OR OXO_Direction="&lt;--")
OXO_Call_Duration!="00:00:00"
OXO_User_Name=$Token_OXO_User_Name$  
| `OXO_MACRO_Padding`
| rename OXO_User_Name AS "Nom Utilisateur" 
| Top 50 "Nom Utilisateur" countfield="Nombre d'Appels" percentfield="Pourcentage"</query>
          <earliest>$field1.earliest$</earliest>
          <latest>$field1.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="percentagesRow">false</option>
        <option name="totalsRow">true</option>
        <format type="number" field="percent">
          <option name="precision">0</option>
          <option name="useThousandSeparators">false</option>
        </format>
        <format type="number" field="Pourcentage">
          <option name="precision">0</option>
          <option name="useThousandSeparators">false</option>
        </format>
        <format type="color" field="Nombre d'Appels">
          <colorPalette type="minMidMax" maxColor="#1E93C6" minColor="#FFFFFF"></colorPalette>
          <scale type="minMidMax"></scale>
        </format>
      </table>
    </panel>
    <panel>
      <table>
        <title>Durée Totale des Appels Externes Reçus et Emis</title>
        <search>
          <query>`sourcelog`  
(OXO_Direction="--&gt;" OR OXO_Direction="&lt;--")
OXO_Call_Duration!="00:00:00"
OXO_User_Name=$Token_OXO_User_Name$
| `OXO_MACRO_Padding`
| `OXO_MACRO_Total_Duration`
| `FR_DetailCall_RENAME`
| Table  "Nom Utilisateur" "Durée Totale d'Appels"</query>
          <earliest>$field1.earliest$</earliest>
          <latest>$field1.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <format type="color" field="Durée Totale d'Appels">
          <colorPalette type="list">[#65A637,#6DB7C6,#F7BC38,#F58F39,#D93F3C]</colorPalette>
          <scale type="threshold">0,30,70,100</scale>
        </format>
        <format type="color" field="Nom Utilisateur">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
      </table>
    </panel>
  </row>
  <row>
    <panel>
      <chart>
        <title>Appels Externes Reçus</title>
        <search>
          <query>`sourcelog`  
OXO_Direction="&lt;--"  
OXO_Call_Duration!="00:00:00" 
OXO_User_Name=$Token_OXO_User_Name$
| timechart count
| rename count AS " Nbre d'Appels"</query>
          <earliest>$field1.earliest$</earliest>
          <latest>$field1.latest$</latest>
        </search>
        <option name="charting.axisTitleX.text">Date</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.showDataLabels">all</option>
        <option name="charting.drilldown">none</option>
      </chart>
    </panel>
    <panel>
      <table>
        <title>TOP 50 - Appels Externes Reçus</title>
        <search>
          <query>`sourcelog`  
OXO_Direction="&lt;--"
OXO_Call_Duration!="00:00:00"    
OXO_User_Name=$Token_OXO_User_Name$
| `OXO_MACRO_Padding`
| rename OXO_User_Name AS "Nom Utilisateur"
| TOP 50 "Nom Utilisateur" countfield="Nombre d'Appels" percentfield="Pourcentage"</query>
          <earliest>$field1.earliest$</earliest>
          <latest>$field1.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="totalsRow">true</option>
        <format type="number" field="percent">
          <option name="precision">0</option>
          <option name="useThousandSeparators">false</option>
        </format>
        <format type="number" field="Pourcentage">
          <option name="precision">0</option>
          <option name="useThousandSeparators">false</option>
        </format>
        <format type="color" field="Nombre d'Appels">
          <colorPalette type="minMidMax" maxColor="#1E93C6" minColor="#FFFFFF"></colorPalette>
          <scale type="minMidMax"></scale>
        </format>
      </table>
    </panel>
    <panel>
      <table>
        <title>Durée Totale des Appels Externes Reçus</title>
        <search>
          <query>`sourcelog`  
OXO_Direction="&lt;--"
OXO_Call_Duration!="00:00:00"
OXO_User_Name=$Token_OXO_User_Name$
| `OXO_MACRO_Padding`
| `OXO_MACRO_Total_Duration`
| `FR_DetailCall_RENAME`
| Table  "Nom Utilisateur" "Durée Totale d'Appels"</query>
          <earliest>$field1.earliest$</earliest>
          <latest>$field1.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <format type="color" field="Nom Utilisateur">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
      </table>
    </panel>
  </row>
  <row>
    <panel>
      <chart>
        <title>Appels Externes Emis</title>
        <search>
          <query>`sourcelog`  
OXO_Direction="--&gt;"  
OXO_Call_Duration!="00:00:00"
OXO_User_Name=$Token_OXO_User_Name$
| timechart count
| rename count AS " Nbre d'Appels"</query>
          <earliest>$field1.earliest$</earliest>
          <latest>$field1.latest$</latest>
        </search>
        <option name="charting.axisTitleX.text">Date</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.showDataLabels">all</option>
        <option name="charting.drilldown">none</option>
      </chart>
    </panel>
    <panel>
      <table>
        <title>TOP 50 - Appels Externes Emis</title>
        <search>
          <query>`sourcelog`  (NOT OXO_Call_Duration="00:00:00") 
OXO_Direction="--&gt;"
OXO_User_Name=$Token_OXO_User_Name$
| `OXO_MACRO_Padding`
 | rename OXO_User_Name AS "Nom Utilisateur"
 | TOP 50  "Nom Utilisateur" countfield="Nombre d'Appels" percentfield="Pourcentage"</query>
          <earliest>$field1.earliest$</earliest>
          <latest>$field1.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <option name="totalsRow">true</option>
        <format type="number" field="percent">
          <option name="precision">0</option>
          <option name="useThousandSeparators">false</option>
        </format>
        <format type="color" field="OXO_User_Name">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="number" field="Pourcentage">
          <option name="precision">0</option>
          <option name="useThousandSeparators">false</option>
        </format>
        <format type="color" field="Nombre d'Appels">
          <colorPalette type="minMidMax" maxColor="#1E93C6" minColor="#FFFFFF"></colorPalette>
          <scale type="minMidMax"></scale>
        </format>
      </table>
    </panel>
    <panel>
      <table>
        <title>Durée Totale des Appels Externes Emis</title>
        <search>
          <query>`sourcelog`    
OXO_Direction="--&gt;"
OXO_Call_Duration!="00:00:00"
OXO_User_Name=$Token_OXO_User_Name$
| `OXO_MACRO_Padding`
| `OXO_MACRO_Total_Duration`
| `FR_DetailCall_RENAME`
| Table  "Nom Utilisateur" "Durée Totale d'Appels"</query>
          <earliest>$field1.earliest$</earliest>
          <latest>$field1.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <format type="color" field="Nom Utilisateur">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
      </table>
    </panel>
  </row>
  <row>
    <panel>
      <chart>
        <title>TOP 10 - Appels Externes Perdus</title>
        <search>
          <query>`sourcelog` 
OXO_Direction="&lt;--"
OXO_Call_Duration="00:00:00"
OXO_Ring_Time!="00:00"  OXO_Ring_Time!="00:01"
OXO_Ring_Time!="00:02"
OXO_Ring_Time!="00:00" OXO_Ring_Time!="00:01"
| TOP 10 OXO_User_Name</query>
          <earliest>$field1.earliest$</earliest>
          <latest>$field1.latest$</latest>
        </search>
        <option name="charting.chart">pie</option>
        <option name="charting.drilldown">none</option>
      </chart>
    </panel>
    <panel>
      <table>
        <title>Appels Externes Perdus</title>
        <search>
          <query>`sourcelog` OXO_Direction="&lt;--"
OXO_Call_Duration="00:00:00"  OXO_Ring_Time!="00:00"  OXO_Ring_Time!="00:01"
OXO_Ring_Time!="00:02"
OXO_User_Name=$Token_OXO_User_Name$
| `OXO_MACRO_Padding`
| `FR_DetailCall_RENAME`
| sort -"Date"
| Table  "Date"   "Heure" "Nom Utilisateur" "Durée de Sonnerie"  "Numéro Composé"</query>
          <earliest>$field1.earliest$</earliest>
          <latest>$field1.latest$</latest>
        </search>
        <option name="drilldown">none</option>
        <format type="color" field="Nom Utilisateur">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
      </table>
    </panel>
  </row>
  <row>
    <panel>
      <table>
        <title>TOP 10 - Temps de Sonnerie des Appels Externes Reçus</title>
        <search>
          <query>`sourcelog` 
OXO_Direction="&lt;--" 
OXO_User_Name=$Token_OXO_User_Name$
| `OXO_MACRO_Padding`
| `FR_DetailCall_RENAME`
| sort -"Durée de Sonnerie"  
| Table  "Date"   "Heure" "Nom Utilisateur" "Durée de Sonnerie"  "Numéro Composé"</query>
          <earliest>$field1.earliest$</earliest>
          <latest>$field1.latest$</latest>
        </search>
        <option name="count">10</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">none</option>
        <option name="rowNumbers">false</option>
        <option name="wrap">true</option>
        <format type="color" field="Nom Utilisateur">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
      </table>
    </panel>
  </row>
</form>