<form script="bundles_wrap.js">
  <label>FlowMaps Explorer</label>
  <fieldset submitButton="false" autoRun="true">
    <input type="dropdown" token="clusterId" searchWhenChanged="true">
      <label>Cluster ID</label>
      <choice value="*">All</choice>
      <search>
        <query>|inputlookup giga_clusters | stats count by clusterId</query>
      </search>
      <fieldForLabel>clusterId</fieldForLabel>
      <fieldForValue>clusterId</fieldForValue>
      <default>*</default>
    </input>
    <input type="dropdown" token="alias" searchWhenChanged="true">
      <label>Map</label>
      <choice value="*">All</choice>
      <search>
        <query>|inputlookup giga_maps | search clusterId = $clusterId$ | stats count by alias</query>
      </search>
      <fieldForLabel>alias</fieldForLabel>
      <fieldForValue>alias</fieldForValue>
      <default>*</default>
    </input>
    <input type="dropdown" token="type" searchWhenChanged="true">
      <label>Map Type</label>
      <choice value="*">All</choice>
      <search>
        <query>|inputlookup giga_maps | search alias=$alias$ | stats count by  type</query>
      </search>
      <fieldForLabel>type</fieldForLabel>
      <fieldForValue>type</fieldForValue>
      <default>*</default>
    </input>
    <input type="dropdown" token="subType" searchWhenChanged="true">
      <label>Map Sub Type</label>
      <choice value="*">All</choice>
      <search>
        <query>|inputlookup giga_maps | search type=$type$ | stats count by  subType</query>
      </search>
      <fieldForLabel>subType</fieldForLabel>
      <fieldForValue>subType</fieldForValue>
      <default>*</default>
    </input>
  </fieldset>
  <search id="bundles_search">
    <query>|`giga_bundle_maps($clusterId$,$alias$,$type$,$subType$)`</query>
  </search>
  <row><panel><html><div id="bundles_map" class="bundles" bundle-options='{"managerid":"bundles_search", "element":"#bundles_map", "height":1100 }'></div></html></panel></row>
</form>
