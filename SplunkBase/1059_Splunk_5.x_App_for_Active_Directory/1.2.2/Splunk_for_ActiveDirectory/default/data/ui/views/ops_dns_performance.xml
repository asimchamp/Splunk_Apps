<?xml version="1.0" encoding="UTF-8"?>
<view onUnloadCancelJob="True" template="dashboard.html">
	<label>DNS Performance</label>
	<module name="AccountBar" layoutPanel="appHeader" />
	<module name="AppBar" layoutPanel="appHeader" />
	<module name="SideviewUtils" layoutPanel="appHeader" />

	<module name="Message" layoutPanel="messaging">
		<param name="filter">*</param>
		<param name="clearOnJobDispatch">False</param>
		<param name="maxSize">1</param>
	</module>

	<module name="TitleBar" layoutPanel="viewHeader"/>

	<module name="GenericHeader" layoutPanel="panel_row1_col1">
		<param name="label">DNS Performance</param>
	</module>

	<module name="URLLoader" layoutPanel="panel_row1_col1" autoRun="True">
		<module name="TimeRangePicker" layoutPanel="panel_row1_col1_grp1">
			<param name="default">Last 60 minutes</param>
			<param name="searchWhenChanged">true</param>
			
			<module name="Search" layoutPanel="panel_row1_col2">
				<param name="search"><![CDATA[eventtype=perfmon-dns|stats count by host,counter]]></param>

				<module name="Pulldown" layoutPanel="panel_row1_col2">
					<param name="name">host</param>
					<param name="size">1</param>
					<param name="width">300px</param>
					<param name="staticFieldsToDisplay"></param>
					<param name="postProcess">dedup $name$|sort $name$</param>
					<param name="label">Server:</param>
					<param name="searchFieldsToDisplay"><list>
						<param name="label">host</param>
						<param name="value">host</param>
					</list></param>
							
					<module name="Pulldown" layoutPanel="panel_row1_col2">
						<param name="name">counter</param>
						<param name="size">1</param>
						<param name="width">300px</param>
						<param name="staticFieldsToDisplay"></param>
						<param name="postProcess">search host="$host$"|dedup $name$|sort $name$</param>
						<param name="label">Counter: </param>
						<param name="searchFieldsToDisplay">
							<list>
								<param name="label">counter</param>
								<param name="value">counter</param>
								<param name="selected">True</param>
							</list>
						</param>

						<module name="Search" layoutPanel="panel_row2_col1">
							<param name="search"><![CDATA[eventtype=perfmon-dns host="$host$" counter="$counter$"|timechart avg(Value) as "$counter$"|join _time [search eventtype=perfmon host="$host$" object=Processor counter="% Processor Time"|timechart avg(Value) as "% Processor Time"]]]></param>

							<module name="JobProgressIndicator"></module>
							<module name="SimpleResultsHeader">
								<param name="entityName">results</param>
								<param name="headerFormat">Performance Chart for \\ $host$ \ DNS \ $counter$</param>
							</module>

							<module name="HiddenChartFormatter">
								<!-- Define the actual data - in this case, from our search -->
								<param name="charting.data0">results</param>
								<param name="charting.data0.jobID">@data.jobID</param>
								
								<!-- Data for the first chart - columns 0 (time) and 1 (counter) for the returned results -->
								<param name="charting.data1">view</param>
								<param name="charting.data1.table">@data0</param>
								<param name="charting.data1.columns">[0,1]</param>
								
								<!-- Data for the first chart - columns 0 (time) and 1 (% Processor Time) for the returned results -->
								<param name="charting.data2">view</param>
								<param name="charting.data2.table">@data0</param>
								<param name="charting.data2.columns">[0,2]</param>
								
								<!-- Define the First Chart -->
								<param name="charting.chart1">area</param>
								<param name="charting.chart1.data">@data1</param>
								<param name="charting.chart1.axisY">@axisY</param>
								<param name="charting.axisY">numeric</param>
								<param name="charting.axisTitleY1">#axisTitleY</param>
								<param name="charting.axisTitleY1.text">Counter</param>
								<param name="charting.axisTitleY1.placement">left</param>
								<param name="charting.axisLabelsY1">#axisLabelsY</param>
								<param name="charting.axisLabelsY1.axis">@axisY</param>
								<param name="charting.axisLabelsY1.placement">left</param>
								
								<!-- Define the Second chart -->
								<param name="charting.axisY2">numeric</param>
								<param name="charting.axisY2.minimumNumber">0</param>
								<param name="charting.axisY2.maximumNumber">100</param>
								<param name="charting.axisTitleY2">#axisTitleY</param>
								<param name="charting.axisTitleY2.text">% Processor Time</param>
								<param name="charting.axisTitleY2.placement">right</param>
								<param name="charting.axisLabelsY2">#axisLabelsY</param>
								<param name="charting.axisLabelsY2.axis">@axisY2</param>
								<param name="charting.axisLabelsY2.placement">right</param>
								<param name="charting.chart2">line</param>
								<param name="charting.chart2.axisY">@axisY2</param>
								<param name="charting.chart2.data">@data2</param>
								
								<!-- Define the layout - display both charts -->
								<param name="charting.layout.charts">[@chart1,@chart2]</param>
								<param name="charting.layout.axisTitle">[@axisTitleX,@axisTitleY1,@axisTitleY2]</param>
								<param name="charting.layout.axisLabels">[@axisLabelsX,@axisLabelsY1,@axisLabelsY2]</param>
								
								<!-- Now render the chart -->
								<module name="FlashChart">
									<param name="width">100%</param>
									<param name="height">600px</param>
								</module> <!-- FlashChart -->
							</module> <!-- HiddenChartFormatter -->
						</module> <!-- Search -->

					</module> <!-- Pulldown#Counter -->
				</module> <!-- Pulldown#host -->
			</module> <!-- Search for pulldowns -->
		</module> <!-- TimeRangePicker -->
	</module> <!-- URLLoader -->
</view>
