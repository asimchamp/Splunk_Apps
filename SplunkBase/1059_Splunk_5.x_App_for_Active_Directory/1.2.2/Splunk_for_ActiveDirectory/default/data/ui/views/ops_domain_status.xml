<?xml version="1.0" encoding="UTF-8"?>
<view onUnloadCancelJob="True" template="dashboard.html">
	<label>Domain Status</label>
	<module name="AccountBar" layoutPanel="appHeader" />
	<module name="AppBar" layoutPanel="appHeader" />
	<module name="SideviewUtils" layoutPanel="appHeader" />

	<module name="Message" layoutPanel="messaging">
		<param name="filter">*</param>
		<param name="clearOnJobDispatch">False</param>
		<param name="maxSize">1</param>
	</module>

	<module name="TitleBar" layoutPanel="viewHeader"/>

	<module name="GenericHeader" layoutPanel="panel_row1_col1"><param name="label">Domain Status</param></module>
	
	<module name="URLLoader" layoutPanel="panel_row1_col1" autoRun="true">
		<module name="TimeRangePicker" layoutPanel="panel_row1_col1_grp1">
			<param name="default">Last 60 minutes</param>
			<param name="searchWhenChanged">true</param>
			
			<module name="Search">
				<param name="search"><![CDATA[|inputlookup DomainSelector.csv|stats count by DomainNetBIOSName]]></param>
					
				<module name="Pulldown" layoutPanel="panel_row1_col1_grp2">
					<param name="name">DomainNetBIOSName</param>
					<param name="size">1</param>
					<param name="width">300px</param>
					<param name="staticFieldsToDisplay"></param>
					<param name="label">Domain: </param>
					<param name="postProcess">dedup $name$|sort $name$</param>
					<param name="staticFieldsToDisplay"></param>
					<param name="searchFieldsToDisplay">
						<list>
							<param name="label">DomainNetBIOSName</param>
							<param name="value">DomainNetBIOSName</param>
						</list>
					</param>
					
					<module name="Search">
						<param name="search"><![CDATA[eventtype=msad-dc-health DomainNetBIOSName="$DomainNetBIOSName$"|dedup host|fields *]]></param>
						<module name="JobProgressIndicator"></module>
						
						<module name="PostProcess" layoutPanel="panel_row2_col1">
							<param name="search"><![CDATA[search FSMORoles="*Infrastructure*"|table host]]></param>
							<module name="SingleValue">
								<param name="additionalClass">single_fullwidth</param>
								<param name="beforeLabel">Infrastructure Master: </param>
							</module>
						</module>
						
						<module name="PostProcess" layoutPanel="panel_row2_col1">
							<param name="search"><![CDATA[search FSMORoles="*RIDMaster*"|table host]]></param>
							<module name="SingleValue">
								<param name="additionalClass">single_fullwidth</param>
								<param name="beforeLabel">RID Master: </param>
							</module>
						</module>
						
						<module name="PostProcess" layoutPanel="panel_row2_col1">
							<param name="search"><![CDATA[search FSMORoles="*PDCEmulator*"|table host]]></param>
							<module name="SingleValue">
								<param name="additionalClass">single_fullwidth</param>
								<param name="beforeLabel">PDC Emulator: </param>
							</module>
						</module>
						
						<module name="PostProcess" layoutPanel="panel_row2_col2">
							<param name="search"><![CDATA[stats count by Site|table Site]]></param>
							<module name="GenericHeader"><param name="label">Sites</param></module>
							<module name="Pager">
								<module name="SimpleResultsTable">
									<param name="drilldown">row</param>
									<module name="Redirector">
										<param name="url">ops_site_status</param>
										<param name="arg.Site">$click.cell0.value$</param>
										<param name="arg.DomainNetBIOSName">$DomainNetBIOSName$</param>
										<param name="arg.earliest">$search.timeRange.earliest$</param>
										<param name="arg.latest">$search.timeRange.latest$</param>
									</module>
								</module>
							</module>
						</module>
						
						<module name="PostProcess" layoutPanel="panel_row2_col3">
							<param name="search"><![CDATA[table host,Site,Enabled|sort host|rename host as "Server"]]></param>
							<module name="GenericHeader"><param name="label">Domain Controllers</param></module>
							<module name="Pager">
								<module name="SimpleResultsTable">
									<param name="drilldown">row</param>
									<module name="Redirector">
										<param name="url">ops_dc_status</param>
										<param name="arg.host">$click.cell0.value$</param>
										<param name="arg.earliest">$search.timeRange.earliest$</param>
										<param name="arg.latest">$search.timeRange.latest$</param>
									</module>									
								</module>
							</module>
						</module>
					</module> <!-- Main Information Block Search -->
				</module> <!-- Pulldown for domain -->
			</module> <!-- Search for domain list -->
		</module> <!-- Time Range Picker -->
	</module> <!-- URL Loader -->
</view>
