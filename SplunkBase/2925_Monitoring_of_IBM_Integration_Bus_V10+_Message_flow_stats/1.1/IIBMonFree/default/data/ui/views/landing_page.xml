<?xml version="1.0" encoding="UTF-8"?>
<dashboard>
	<label>Monitoring of IBM Integration Bus V10+ Message flow stats</label>
	<description>Monitoring of IBM Integration Bus V10+ Message flow stats</description>
	<row>
		<html>
				<p>
				<img src="../../splunkd/__raw/servicesNS/admin/IIBMonFree/static/sqio.png" alt="SquareBubble.io" href="http://squarebubble.io"/>
				Welcome and thank you for downloading and installing this app.
				</p>		
				<p>This application extracts flow stats information from the IBM Integration Bus (IIB)
				Version 10+ using the embedded MQTT server.
				</p>
				<p>We recommend that you read all the instructions before you start.
				
				<h2>Supported Versions</h2>
				<ul>
				<li> IBM Integration Bus Version 10 (including all patch releases)
				</li>
				</ul>

				<h2>Basic Setup</h2>
				</p>
				<p>The basic setup uses a single Splunk Free or Enterprise instance with one or more IIB nodes, as follows</p>
				<img src="../../splunkd/__raw/servicesNS/admin/IIBMonFree/static/DefaultDeployment.png" alt="Default Deployment" />
				<p>To monitor an IIB node, you just need to add one or more data
					inputs. You can manage them from
					<a href="../../manager/IIBMonFree/data/inputs/IIBMonFree">inputs</a>.
					Press the <b>New</b> button to create a new input.
				</p>
				<p>There are 2 types of input supported:
				</p>
				<ol>
					<li>Demo inputs, where the app generates random data for
						demonstration purposes (enter y or 1 in the demo field when creating the input).
					</li>
					<li>Live inputs, where data is taken from a running IIB. Please be
						sure the host name or IP address and MQTT port are correct and they are reachable 
						(see below).
					</li>
				</ol>
				<p>By default, we found that the MQTT server is configured to listen
				on the loopback address (127.0.0.1). Unless you are running splunk
				on the same server, you need to change the bind address in the file
				/var/mqsi/components/<i>nodename</i>/config/<i>nodename</i>.
				To listen on all interfaces set this to 0.0.0.0, otherwise choose 
				the appropriate interface. Then restart the server with the commands:
				</p>
				<code>
					mqsichangeproperties
					<i>nodename</i>
					-b pubsub -o MQTTServer -n enabled -v false
				</code>
				<p>followed by</p>
				<code>
					mqsichangeproperties
					<i>nodename</i>
					-b pubsub -o MQTTServer -n enabled -v true
				</code>
				<p>On linux, you can also check this is running using the ps command
					as follows:</p>
				<code>[...]$ ps -ef | grep bipMQTT</code>
				<p>To work out what port the MQTT server is listening on, use the following command:
				<code>mqsireportproperties <i>nodename</i> -b pubsub -o MQTTServer -n port</code>
				</p>
				<p>If you haven't already, you will need to switch on message flow data by 
				using the following command:</p>
				<code>
					mqsichangeflowstats
					<i>nodename</i>
					-s -g -j -c active -o json
				</code>
				
				<p>The above commands should be run from a member of the mqbrkrs
					group.
				</p>
				<p>For more information refer to the articles in the Documentation
					menu in the Navigation
					bar above.
				</p>

				<h2>Advanced setup</h2>

				<p>Where your IIB is not accessible to the splunk server, you will need to
				add one or more splunk forwarders.  To do this you need to install splunk enterprise
				and enable the heavy forwarder capability as well as adding the receiver capability 
				to the target splunk instance.  The following diagram summarises this deployment.</p>
				
				<img src="../../splunkd/__raw/servicesNS/admin/IIBMonFree/static/ProductionDeployment.png" alt="Production Deployment" />
				
				<p>This diagram shows a possible deployment to solve the connectivity issues.  
				The additional splunk enterprise may be co-located with the IIB Server and there 
				could be more than 1 intermediary splunk enterprise servers acting as heavy
				forwarders </p>
				
				<p>Where your IIB is not accessible to any incoming connections, we have developed
				a complementary product called IIBMonFreeX, which allows the agent to push data 
				to this splunk application</p>
				
				<p>It can be deployed either by sending data directly to splunk, as follows</p>
				<img src="../../splunkd/__raw/servicesNS/admin/IIBMonFree/static/IIBMonFreeXDeployment.png" alt="IIBMonFreeX Deployment" />
				<p>Or via a splunk forwarder</p>
				<img src="../../splunkd/__raw/servicesNS/admin/IIBMonFree/static/IIBMonFreeXProdDeployment.png" alt="IIBMonFreeX Production Deployment" />
				
				<p>More information about the setup of external sources from IIBMonFreeX can be 
				found from the link to IIBMonFreeX under the navigation menu <i>External Sources</i>.</p>
				
				<h2>Search the incoming data</h2>
				<p>
					Once you have a basic setup configured and enabled, you can then
					<a href="../../app/search/search?q=search%20index%3Diibmonfreex">search</a>
					your data. With data now coming in, the example dashboards
					should start populating with data. Just browse to them via the
					Navigation bar above.
				</p>

				<h2>Looking for log messages and errors</h2>
				<p>
					All messages, including errors, get written to
					<a
						href="../../app/search/search?q=search%20index%3D_internal%20source%3D*splunkd.log*%20(component%3DModularInputs%20stderr)%20OR%20component%3DExecProcessor%20message%3D*IIBMonFree*">splunk logs</a>
					You will see errors reported about SLF4J: not being set up. You can
					ignore these messages.
				</p>

				<h2>Don't need the example dashboards ?</h2>

				<p>
					The dashboards that are part of this app are purely
					examples of visualizing a subset of the possible data available from the
					IIB.
				</p>
				
				<h2>Support</h2>
				<p><a href="mailto:innovations@syntegrity.com.au?Subject=IIBMonFree%20Support" target="_top">Send email</a> to 
				innovations@syntegrity.com.au for any support issues using subject "IIBMonFree Support".   Navigate 
				using the &quot;About SquareBubble&quot; button above for future announcements.
				</p>
				<p>We provide support on a best efforts basis during office hours AEST and observe all
				public holidays in the state of Victoria.				
				</p>
								
				<h2>Need more information ? </h2>
				<p>Browse the documentation via the above Navigation bar.</p>
				<p>
				Icons by Enes Dal used under the terms of the licence Creative Commons (Attribution 3.0 Unported)
				</p>
				<p>
				Copyright &#169; 2015 Syntegrity Innovations
				</p>
		</html>
	</row>

</dashboard>