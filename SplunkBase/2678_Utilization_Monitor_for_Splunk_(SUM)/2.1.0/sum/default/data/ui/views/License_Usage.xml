<form>
  <!-- This dashboard and all searches were created by Mason Morales, Splunk Certified Architect. Contact: mason.s.morales@gmail.com -->
  <label>License Usage Dashboard</label>
  <fieldset submitButton="false">
    <!-- Timepicker -->
    <!-- Splunk Server -->
    <!-- License Pool -->
    <!-- Bytes Unit Selection -->
    <input searchWhenChanged="true" token="timepicked" type="time">
      <label>Time</label>
      <default>
        <earliest>-1d@d</earliest>
        <latest>@d</latest>
      </default>
    </input>
    <input searchWhenChanged="true" token="splunk_server" type="dropdown">
      <label>Splunk Server</label>
      <default>*</default>
      <choice value="*">All</choice>
      <earliestTime>$timepicked.earliest$</earliestTime>
      <latestTime>$timepicked.latest$</latestTime>
      <populatingSearch fieldForLabel="splunk_server" fieldForValue="splunk_server">pool=$pool$ index=_internal source=*license_usage.log type=Usage | fields splunk_server | dedup splunk_server | table splunk_server | sort splunk_server</populatingSearch>
    </input>
    <input searchWhenChanged="true" token="pool" type="dropdown">
      <label>License Pool</label>
      <default>*</default>
      <choice value="*">All</choice>
      <earliestTime>$timepicked.earliest$</earliestTime>
      <latestTime>$timepicked.latest$</latestTime>
      <populatingSearch fieldForLabel="pool" fieldForValue="pool">splunk_server=$splunk_server$ index=_internal source=*license_usage.log type=Usage | fields pool | dedup pool | table pool | sort pool</populatingSearch>
    </input>
    <input searchWhenChanged="true" token="bytesunit" type="radio">
      <label>Display bytes in:</label>
      <default>Megabytes</default>
      <!-- Static definition of choices -->
      <choice value="KB">Kilobytes</choice>
      <choice value="MB">Megabytes</choice>
      <choice value="GB">Gigabytes</choice>
      <choice value="TB">Terabytes</choice>
    </input>
  </fieldset>
  <row>
    <panel>
      <table>
        <title>License Pool Utilization ($bytesunit$) (From Midnight to Now - Today Only)</title>
        <!-- Calculate Total Pool Usage, Add Labels Based on Value Lengths, and Calculate Percentage Utilization -->
        <searchString>
          <![CDATA[
index=_internal source=*license_usage.log type=Usage earliest=-0h@d latest=now splunk_server=$splunk_server$ pool=$pool$
| eval KB=round(b/1024) | eval MB=round(KB/1024,2) | eval GB=round(MB/1024,2) | eval TB=round(GB/1024,2) 
| stats sum($bytesunit$) as TotalUsed, sum(b) as TotalBytesUsed by pool, poolsz
| eval perc = tostring(round(TotalBytesUsed/poolsz*100,4))."%"
| eval poolsz = case("$bytesunit$"="TB", poolsz/1024/1024/1024/1024, "$bytesunit$"="GB", poolsz/1024/1024/1024, "$bytesunit$"="MB", poolsz/1024/1024, "$bytesunit$"="KB", poolsz/1024)
| eval poolsz =tostring(poolsz)." $bytesunit$"
| eval TotalUsed = tostring(TotalUsed)." $bytesunit$"
| rename pool as "License Pool", poolsz as "Pool Size", TotalUsed as "Total Used", perc as "Percent Used" | table "License Pool" "Pool Size" "Total Used" "Percent Used"
]]>
        </searchString>
        <earliestTime>-60m</earliestTime>
        <latestTime>now</latestTime>
      </table>
    </panel>
  </row>
  <row>
    <panel>
      <single>
        <title>Total License Usage  ($form.timepicked.earliest$ to $form.timepicked.latest$)</title>
        <search>
          <query>splunk_server=$splunk_server$ pool=$pool$ index="_internal" source=*license_usage.log type=Usage | eval KB=round(b/1024) | eval MB=round(KB/1024,2) | eval GB=round(MB/1024,2) | eval TB=round(GB/1024,2) | stats sum($bytesunit$) as Total</query>
          <earliest>$timepicked.earliest$</earliest>
          <latest>$timepicked.latest$</latest>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">radialGauge</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
        <option name="linkView">search</option>
        <option name="drilldown">none</option>
        <option name="afterLabel">$bytesunit$</option>
        <option name="colorBy">value</option>
        <option name="colorMode">none</option>
        <option name="numberPrecision">0</option>
        <option name="showSparkline">1</option>
        <option name="showTrendIndicator">1</option>
        <option name="trendColorInterpretation">standard</option>
        <option name="trendDisplayMode">absolute</option>
        <option name="useColors">0</option>
        <option name="useThousandSeparators">1</option>
      </single>
      <chart>
        <title>Total License Usage over Time ($bytesunit$)</title>
        <searchString>splunk_server=$splunk_server$ pool=$pool$ index="_internal" source=*license_usage.log type=Usage | eval KB=round(b/1024) | eval MB=round(KB/1024,2) | eval GB=round(MB/1024,2) | eval TB=round(GB/1024,2) | timechart sum($bytesunit$) as Total</searchString>
        <earliestTime>$timepicked.earliest$</earliestTime>
        <latestTime>$timepicked.latest$</latestTime>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">none</option>
        <option name="wrap">true</option>
        <option name="rowNumbers">false</option>
        <option name="dataOverlayMode">none</option>
        <option name="charting.axisTitleX.text">Time</option>
        <option name="charting.axisTitleY.text">Total $bytesunit$</option>
      </chart>
    </panel>
    <panel>
      <chart>
        <title>Total License Usage - Last 7 Days</title>
        <search>
          <query>earliest=-7d@d latest=-0d@d index=_internal source=*license_usage.log* type=RolloverSummary | bucket _time span=1d | eval Date=strftime(_time, "%Y-%m-%d") | chart sum(b) AS volume by Date | eval volume=round(volume/1024/1024/1024)</query>
          <earliest>-7d@h</earliest>
          <latest>now</latest>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">all</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">none</option>
        <option name="height">400px</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <input searchWhenChanged="true" token="table_limit" type="text">
        <label>Limit table to top:</label>
        <default>10</default>
      </input>
      <input searchWhenChanged="true" token="sum_idx" type="dropdown">
        <label>Index:</label>
        <default>*</default>
        <choice value="*">All</choice>
        <earliestTime>$timepicked.earliest$</earliestTime>
        <latestTime>$timepicked.latest$</latestTime>
        <populatingSearch fieldForLabel="idx" fieldForValue="idx">splunk_server=$splunk_server$ pool=$pool$ h=$sum_host$ st=$sum_st$ s=$sum_source$ index=_internal source=*license_usage.log type=Usage | fields idx | dedup idx | table idx | sort idx</populatingSearch>
      </input>
      <input searchWhenChanged="true" token="sum_st" type="dropdown">
        <label>Sourcetype:</label>
        <default>*</default>
        <choice value="*">All</choice>
        <earliestTime>$timepicked.earliest$</earliestTime>
        <latestTime>$timepicked.latest$</latestTime>
        <populatingSearch fieldForLabel="st" fieldForValue="st">splunk_server=$splunk_server$ pool=$pool$ idx=$sum_idx$ h=$sum_host$ s=$sum_source$  index=_internal source=*license_usage.log type=Usage | fields st | dedup st | table st | sort st</populatingSearch>
      </input>
      <input searchWhenChanged="true" token="sum_host" type="dropdown">
        <label>Host:</label>
        <default>*</default>
        <choice value="*">All</choice>
        <earliestTime>$timepicked.earliest$</earliestTime>
        <latestTime>$timepicked.latest$</latestTime>
        <populatingSearch fieldForLabel="h" fieldForValue="h">splunk_server=$splunk_server$ pool=$pool$ st=$sum_st$ idx=$sum_idx$ s=$sum_source$ index=_internal source=*license_usage.log type=Usage | fields h | dedup h | table h | sort h</populatingSearch>
      </input>
      <input searchWhenChanged="true" token="sum_source" type="dropdown">
        <label>Source:</label>
        <default>*</default>
        <choice value="*">All</choice>
        <earliestTime>$timepicked.earliest$</earliestTime>
        <latestTime>$timepicked.latest$</latestTime>
        <populatingSearch fieldForLabel="s" fieldForValue="s">splunk_server=$splunk_server$ pool=$pool$ st=$sum_st$ idx=$sum_idx$ h=$sum_host$ index=_internal source=*license_usage.log type=Usage | fields s | dedup s | table s | sort s</populatingSearch>
      </input>
      <table>
        <title>License Usage Overview - Total $bytesunit$</title>
        <searchString>splunk_server=$splunk_server$ pool="$pool$" st=$sum_st$ idx=$sum_idx$ h=$sum_host$ s=$sum_source$ index="_internal" source=*license_usage.log type=Usage | eval KB=round(b/1024) | eval MB=round(KB/1024,2) | eval GB=round(MB/1024,2) | eval TB=round(GB/1024,2) | stats sum($bytesunit$) as Total by idx, st, h, s, splunk_server | rename idx as Index, st as Sourcetype, h as Host, s as Source, splunk_server as "Splunk Server" | sort -Total | addcoltotals labelfield="Splunk Server" label="Grand Total:" | head $table_limit$</searchString>
        <earliestTime>$timepicked.earliest$</earliestTime>
        <latestTime>$timepicked.latest$</latestTime>
        <option name="wrap">true</option>
        <option name="rowNumbers">false</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">cell</option>
        <option name="count">10</option>
      </table>
    </panel>
  </row>
  <row>
    <panel>
      <input searchWhenChanged="true" token="idx_limit" type="text">
        <label>Limit to top X indexes:</label>
        <default>10</default>
      </input>
      <chart>
        <title>License Usage by Index over Time (Excludes Internal/Summary Indexes) - Top $idx_limit$</title>
        <searchString>splunk_server=$splunk_server$ pool=$pool$ index="_internal" source=*license_usage.log type=Usage | eval KB=round(b/1024) | eval MB=round(KB/1024,2) | eval GB=round(MB/1024,2) | eval TB=round(GB/1024,2) | timechart sum($bytesunit$) as Total by idx usenull=f useother=f limit=$idx_limit$</searchString>
        <earliestTime>$timepicked.earliest$</earliestTime>
        <latestTime>$timepicked.latest$</latestTime>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">zero</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">stacked</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisEnd</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.axisTitleX.text">Time</option>
        <option name="charting.axisTitleY.text">Total $bytesunit$</option>
      </chart>
    </panel>
    <panel>
      <chart>
        <title>License Usage by Index - Top $idx_limit$</title>
        <searchString>splunk_server=$splunk_server$ pool=$pool$ index="_internal" source=*license_usage.log type=Usage | eval KB=round(b/1024) | eval MB=round(KB/1024,2) | eval GB=round(MB/1024,2) | eval TB=round(GB/1024,2) | chart sum($bytesunit$) as Total by idx | sort -Total | head $idx_limit$</searchString>
        <earliestTime>$timepicked.earliest$</earliestTime>
        <latestTime>$timepicked.latest$</latestTime>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">bar</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.axisTitleX.text">Index</option>
        <option name="charting.axisTitleY.text">Total $bytesunit$</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <input searchWhenChanged="true" token="st_limit" type="text">
        <label>Limit to top X sourcetypes:</label>
        <default>10</default>
      </input>
      <chart>
        <title>License Usage by Sourcetype over Time - Top $st_limit$</title>
        <searchString>splunk_server=$splunk_server$ pool=$pool$ index="_internal" source=*license_usage.log type=Usage | eval KB=round(b/1024) | eval MB=round(KB/1024,2) | eval GB=round(MB/1024,2) | eval TB=round(GB/1024,2) | timechart sum($bytesunit$) as Total by st usenull=f useother=f limit=$st_limit$</searchString>
        <earliestTime>$timepicked.earliest$</earliestTime>
        <latestTime>$timepicked.latest$</latestTime>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">zero</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">stacked</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisEnd</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.axisTitleX.text">Time</option>
        <option name="charting.axisTitleY.text">Total $bytesunit$</option>
      </chart>
    </panel>
    <panel>
      <chart>
        <title>License Usage by Sourcetype - Top $st_limit$</title>
        <searchString>splunk_server=$splunk_server$ pool=$pool$ index="_internal" source=*license_usage.log type=Usage | eval KB=round(b/1024) | eval MB=round(KB/1024,2) | eval GB=round(MB/1024,2) | eval TB=round(GB/1024,2) | chart sum($bytesunit$) as Total by st | sort -Total | head $st_limit$</searchString>
        <earliestTime>$timepicked.earliest$</earliestTime>
        <latestTime>$timepicked.latest$</latestTime>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">bar</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.axisTitleY.text">Total $bytesunit$</option>
        <option name="charting.axisTitleX.text">Source Type</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <input searchWhenChanged="true" token="h_limit" type="text">
        <label>Limit to top X hosts:</label>
        <default>10</default>
      </input>
      <chart>
        <title>License Usage by Host over Time - Top $h_limit$</title>
        <searchString>splunk_server=$splunk_server$ pool=$pool$ index="_internal" source=*license_usage.log type=Usage | eval KB=round(b/1024) | eval MB=round(KB/1024,2) | eval GB=round(MB/1024,2) | eval TB=round(GB/1024,2) | timechart sum($bytesunit$) as Total by h usenull=f useother=f limit=$h_limit$</searchString>
        <earliestTime>$timepicked.earliest$</earliestTime>
        <latestTime>$timepicked.latest$</latestTime>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">zero</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">stacked</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisEnd</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.axisTitleX.text">Time</option>
        <option name="charting.axisTitleY.text">Total $bytesunit$</option>
      </chart>
    </panel>
    <panel>
      <chart>
        <title>License Usage by Host - Top $h_limit$</title>
        <searchString>splunk_server=$splunk_server$ pool=$pool$ index="_internal" source=*license_usage.log type=Usage | eval KB=round(b/1024) | eval MB=round(KB/1024,2) | eval GB=round(MB/1024,2) | eval TB=round(GB/1024,2) | chart sum($bytesunit$) as Total by h | sort -Total | head $h_limit$</searchString>
        <earliestTime>$timepicked.earliest$</earliestTime>
        <latestTime>$timepicked.latest$</latestTime>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">bar</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.axisTitleY.text">Total $bytesunit$</option>
        <option name="charting.axisTitleX.text">Host</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <input searchWhenChanged="true" token="s_limit" type="text">
        <label>Limit to top X sources:</label>
        <default>10</default>
      </input>
      <chart>
        <title>License Usage by Source over Time - Top $s_limit$</title>
        <searchString>splunk_server=$splunk_server$ pool=$pool$ index="_internal" source=*license_usage.log type=Usage | eval KB=round(b/1024) | eval MB=round(KB/1024,2) | eval GB=round(MB/1024,2) | eval TB=round(GB/1024,2) | timechart sum($bytesunit$) as Total by s usenull=f useother=f limit=$s_limit$</searchString>
        <earliestTime>$timepicked.earliest$</earliestTime>
        <latestTime>$timepicked.latest$</latestTime>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">area</option>
        <option name="charting.chart.nullValueMode">zero</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">stacked</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisEnd</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.axisTitleX.text">Time</option>
        <option name="charting.axisTitleY.text">Total $bytesunit$</option>
      </chart>
    </panel>
    <panel>
      <chart>
        <title>License Usage by Source - Top $s_limit$</title>
        <searchString>splunk_server=$splunk_server$ pool=$pool$ index="_internal" source=*license_usage.log type=Usage | eval KB=round(b/1024) | eval MB=round(KB/1024,2) | eval GB=round(MB/1024,2) | eval TB=round(GB/1024,2) | chart sum($bytesunit$) as Total by s | sort -Total | head $s_limit$</searchString>
        <earliestTime>$timepicked.earliest$</earliestTime>
        <latestTime>$timepicked.latest$</latestTime>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">bar</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.axisTitleY.text">Total $bytesunit$</option>
        <option name="charting.axisTitleX.text">Source</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <table>
        <title>License Master Errors - Last 5 Minutes</title>
        <search>
          <query>earliest=-5m latest=now index=_internal sourcetype=splunkd ERROR OR WARN component=LM*| stats count by host log_level component message</query>
          <earliest>-15m</earliest>
          <latest>now</latest>
        </search>
        <option name="wrap">true</option>
        <option name="rowNumbers">false</option>
        <option name="drilldown">none</option>
        <option name="dataOverlayMode">none</option>
        <option name="count">10</option>
      </table>
    </panel>
  </row>
</form>