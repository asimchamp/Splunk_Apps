TA For sar Overall System Performance Reports on Solaris

Background: 

The sar command (System Activity Reporter) on Solaris generates overall system performance reports from Solaris servers.  The sar command has an option -A that reports on the overall system performance. If you enable the cron command sa2 and run a collection with multiple iterations throughout the day, it will create reports in the following location: /var/adm/sa/sardd , where dd is the day the report has collected metrics for. 

What This TA Collects:

This TA will collect those sardd reports the day after they are generated by the sar -A / sa2 command. It will run a scripted input (s2s.sh) against them and create a temporary file that a Splunk monitor input will be looking for. This was done instead of directly sending the output to Splunk due to their potential size.

What This TA Produces In Splunk:

In Splunk, this TA will create metrics tagged with the following sourcetypes for all of the data collected. These sourcetypes map to all of the sar tasks collected via sar -A . 

sar:cpu_util

sar:disk_activity

sar:queue_activity

sar:buffer_activity

sar:swap_activity

sar:system_call_stats

sar:file_access

sar:terminal_activity

sar:system_table_status

sar:interproc_comm

sar:page-in_activity

sar:page-out_and_mem

sar:unused_mem

sar:kernel_mem_alloc


If you want a reference to what info is collected, you can see them here: 

http://docs.oracle.com/cd/E23824_01/html/821-1451/enudq.html#scrolltoc


Directions for Setup:

I. ON THE SEARCH HEAD:
1. Install the TA. Unzip/Untar it in the $SPLUNK_HOME/apps/ folder

II. ON THE INDEXER:
1. Install the TA. Unzip/Untar it in the $SPLUNK_HOME/apps/ folder

III. ON THE SOLARIS FORWARDER:
1. Install the TA on the Solaris server forwarder. Unzip/Untar it in the $SPLUNK_HOME/apps/ folder

2. In the TA_sar_daily_report/bin directory, you MUST modify the settings in the configuration.sh file (and the s2s-backfill.sh file if doing backfill) to customize the collection to your environment

3. Copy the inputs.conf file from the TA_sar_daily_report/default directory and place in TA_sar_daily_report/local directory. Modify the inputs.conf file in the TA_sar_daily_report/local directory to enable the inputs to collect and adjust collection times as needed. 
	a) FOR NORMAL OPERATION ENABLE BOTH s2s.sh script and SAR-TEMP monitor
	b) FOR HISTORICAL BACKFILL OPERATION - ENABLE BOTH s2s-backfill.sh script and SAR-BACKFILL monitor
	c) TO REMOVE SAR-TEMP AND SAR-BACKFILL DIRECTORIES AND FILES - ENABLE the s2s-removal.sh script
	
IV. RESTART ALL








