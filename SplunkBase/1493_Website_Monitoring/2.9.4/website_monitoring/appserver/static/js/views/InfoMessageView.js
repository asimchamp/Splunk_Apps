define(["underscore","backbone","splunkjs/mvc","jquery","splunkjs/mvc/simplesplunkview","splunkjs/mvc/searchmanager","splunkjs/mvc/utils"],function(c,h,f,d,b,g,a){var e=b.extend({className:"AnnotateEventView",apps:null,defaults:{message_el:".dashboard-form-globalfieldset:first",search_manager:null,message:null,eval_function:null,show_if_results:false,show_if_no_results:true},initialize:function(){this.options=c.extend({},this.defaults,this.options);options=this.options||{};this.message_el=d(options.message_el);this.search_manager=options.search_manager;this.message=options.message;this.show_if_no_results=options.show_if_no_results;this.show_if_results=options.show_if_results;this.eval_function=options.eval_function;this.existing_message_el=null;this.setupSearch()},showMessage:function(k){var j='<div style="margin-top: 0px;margin-bottom: -10px;">	<div class="alert alert-warning">    	<i class="icon-alert"></i>'+k+"   </div></div>";if(this.existing_message_el!==null){this.existing_message_el.html(i)}else{var i=d(j);this.message_el.append(i);this.existing_message_el=i}},setupSearch:function(){if(!this.search_manager||!this.message){return}this.search_manager.on("search:done",function(){console.log("Info message search completed")}.bind(this));var i=this.search_manager.data("results");i.on("data",function(){var j=i.data().rows.length;if(this.eval_function&&this.eval_function(i.data())){this.showMessage(this.message)}else{if(this.show_if_results&&j>0){this.showMessage(this.message)}}}.bind(this));this.search_manager.startSearch()}});return e});