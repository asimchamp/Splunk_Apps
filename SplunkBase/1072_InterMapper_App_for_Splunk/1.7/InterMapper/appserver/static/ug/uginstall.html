<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:sourceDocument="P:\Doc Projects\HelpSystems\Flare-InterMapper\Splunk\im-splunk-app\InterMapper\appserver\static\ug\uginstall.html" MadCap:tocPath="" MadCap:InPreviewMode="false" MadCap:PreloadImages="false" MadCap:RuntimeFileType="Topic" MadCap:TargetType="WebHelp" lang="en-US" xml:lang="en-US" MadCap:PathToHelpSystem="../../../" MadCap:HelpSystemFileName="Default.xml" MadCap:SearchType="Stem">
    <head>
		<link rel="stylesheet" type="text/css" href="../../static/app/InterMapper/ug/ug.css">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    </head>
    <body lang="EN-GB">
        <h1 style="color: black;">Using <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> With Splunk</h1>
        <p><span class="Intermapper-PrimaryIMBrandName">Intermapper</span> works with Splunk by sending syslog entries in a specific format when an <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> device changes state. An add-on application in Splunk allows you to analyze and view various events through an <span class="Intermapper-PrimaryIMBrandName">Intermapper</span>-specific dashboard.</p>
        <p>Use the information below to connect <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> to Splunk.</p>
        <h2>System Requirements</h2>
        <p>To use Splunk with <span class="Intermapper-PrimaryIMBrandName">Intermapper</span>, you need:
        </p>
        <ul>
            <li value="1">A local or remote installation of Splunk Enterprise.</li>
            <li value="2"> The <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> web server must be running.</li>
            <li value="3">The Splunk machine must have access to the <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> server.</li>
            <li value="4">A syslog notifier that sends information to Splunk must be attached to all devices you want to track with Splunk.</li>
        </ul>
        <h2>Installation Overview</h2>
        <p>In order to use Splunk and <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> together, you need to do the following:</p>
        <ol>
            <li value="1">Prepare <span class="Intermapper-PrimaryIMBrandName">Intermapper</span>. This includes enabling the Web server, adding a syslog notifier for Splunk, and setting the syslog message for compatibility with Splunk. </li>
            <li value="2">Set up <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> to send syslog notifications to Splunk.</li>
            <li value="3">Install the <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> App for Splunk.<br /></li>
        </ol>
        <h2>
		Preparing <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> for use with Splunk</h2>
        <p>Before you can use Splunk with <span class="Intermapper-PrimaryIMBrandName">Intermapper</span>, you have to set up <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> to allow Splunk to access it. The steps are as follows:</p>
        <h3>Step 1: Enable the Web server</h3>
        <p>Before you can use Splunk, you need to enable the <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> web server.</p>
        <p style="font-weight: bold;">To enable the web server:</p>
        <ol>
            <li value="1">From the Edit menu, choose <b style="font-style: italic;">Server Settings...</b> The Server Settings window appears.</li>
            <li value="2">In the left pane of the Server Settings window, click <b style="font-style: italic;">Web Server</b>. The Web Server configuration panel appears.</li>
            <li value="3">In the Web Server configuration panel, click <b style="font-style: italic;">Start</b>.<br /><b>Note:</b> You can choose to run the web server on a different port, but will need to enter that port in the Splunk application when you set it up.</li>
            <li value="4">Add an access control list entry to allow web server access by the Splunk host machine. Access is based on IP address.</li>
            <li value="5">Add one or more access control list entries to allow web server access by any users of the Splunk application. Access is based on IP address or address range.</li>
        </ol>
        <h3>Step 2: Add a Splunk user</h3>
        <p>You need to add a user account to <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> that Splunk can use to log in to the <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> server.</p>
        <p style="font-weight: bold;">To add a user:</p>
        <ol>
            <li value="1">In the left pane of the Server Settings window, click <b style="font-style: italic;">Users</b>. The Users panel appears.</li>
            <li value="2">Click the <b style="font-size: 16pt;">+</b> button and choose <b style="font-style: italic;">Add User...</b> The User Information 
		dialog appears.</li>
            <li value="3">In the <b style="font-style: italic;">Name</b> box, enter a user name for the Splunk Server.</li>
            <li value="4">In the <b style="font-style: italic;">Automatic Login</b> text box, enter the IP address of the Splunk server.</li>
            <li value="5">Click <b style="font-style: italic;">OK</b>. The Splunk Server user appears in the user list.</li>
            <li value="6">Drag the Splunk Server user to the Administrators group. The Splunk Server user requires elevated privileges to export details about <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> maps.</li>
        </ol>
        <h3>Step 3: Add a syslog notifier for Splunk</h3>
        <p>Splunk acts as a syslog server. You need to create a syslog notifier that <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> can use to send syslog entries to Splunk.</p>
        <p style="font-weight: bold;">To create a syslog notifier:</p>
        <ol>
            <li value="1">From the Server Settings window, click <b style="font-style: italic;">Notifier List</b>. The list of existing notifiers appears.</li>
            <li value="2">Click the <b style="font-size: 16pt;">+</b> button. The Configure Notifier window appears.</li>
            <li value="3">Give the notifier a name, such as "SplunkLog".</li>
            <li value="4">From the Notifier Type dropdown menu, choose <b style="font-style: italic;">Syslog</b>.</li>
            <li value="5">Enter the Splunk server's IP address in the <b style="font-style: italic;">Send syslog message to</b> box.</li>
            <li value="6">Click Edit Message, then edit the syslog message as follows:</li>
        </ol><pre class="code" xml:space="preserve">timestamp="&lt;Timestamp&gt;" map_name="&lt;Document Name&gt;" notification_level="&lt;Event&gt;" device_host="&lt;Device Name&gt;" device_ip="&lt;Device Address&gt;" probe_type="&lt;Probe Type&gt;" probe_message="&lt;Device Condition&gt;" device_imid="&lt;Device-IMID&gt;"</pre>
        <p class="indent"><b>Note:</b> The message above must be on one line.</p>
        <p>This format allows Splunk to extract syslog data and make it available in Splunk.</p>
        <h3>Step 4: Attach the notifier to all devices</h3>
        <p>Once you have created the Splunk notifier, you need to attach it to all devices in <span class="Intermapper-PrimaryIMBrandName">Intermapper</span>.</p>
        <p style="font-weight: bold;">To attach a notifier to all devices:</p>
        <ol>
            <li value="1">From <span class="Intermapper-PrimaryIMBrandName">Intermapper</span>'s Window menu, choose <b style="font-style: italic;">Device List</b>. The Device List window appears, showing a list of devices.</li>
            <li value="2">Click the <b style="font-style: italic;">Notifier View</b> button near the left end of the window's toolbar. A set of checkboxes appears for each device.</li>
            <li value="3">From the dropdown menu just to the right of the View selection buttons, choose the Splunk syslog notifier you just created.</li>
            <li value="4">For each state you want to record in Splunk, hold <b style="font-style: italic;">Alt</b> and click a check box in the column for that state. All check boxes are selected.</li>
            <li value="5">Recommended settings for Delay, Repeat time, and Count:<br /><br />Delay = none<br />Repeat time = 5 minutes<br />Count = infinite<br /><br />Hold <b style="font-style: italic;">Alt</b>, click the dropdown menu for each column, then release the <b style="font-style: italic;">Alt</b> key and choose the value from the dropdown menu. It is set for each device in the list.</li>
        </ol>
        <p><b>Notes:</b> <![CDATA[ ]]></p>
        <ul>
            <li value="1">Set your Splunk notifier to be attached to new devices by default from the <b style="font-style: italic;">Default Notifiers</b> panel of the Map Settings window.</li>
            <li value="2">To send data to Splunk for only a single map, you can view devices in the map's Notifier View and attach only the devices in that map to the Splunk notifier.</li>
        </ul>
        <h3>Step 5: To send Layer 2 information</h3>
        <p>To send Layer 2 information to Splunk you must do the following:</p>
        <ul>
            <li value="1">Set up <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> to collect Layer 2 information. See the <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> User Guide for more information.</li>
            <li value="2">Add a device to any <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> map, and apply the Splunk &gt; Layer 2 Output probe to it. Otherwise, use the information below to locate and upload the probe.<br /><br /><b>Note:</b>  <i>One and only one</i> device using this probe should exist on an <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> server. Running multiple instances of this probe uses <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> server resources unneccessarily, with no benefit to the <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> App for Splunk.</li>
        </ul>
        <p>The probe is located in the Splunk install directory (<span class="code">%SPUNK_HOME%</span>) at:</p>
        <p> <span class="code">  %SPLUNK_HOME%\etc\apps\InterMapper\default</span></p>
        <p>Probe file name: <span class="code">com.dartware.layer2</span></p>
        <p>The probe sends switch port data in CSV format to Splunk; the data is then interpreted and indexed in Splunk.</p>
        <h3>Step 6: Get Notifications Into Splunk</h3>
        <p>Assuming a clear network route between <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> and Splunk, and that you are running Splunk as <span class="code">root</span>, indexing of syslog data by Splunk begins nearly immediately.</p>
        <p style="font-weight: bold;">To verify that Splunk is receiving <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> data:</p>
        <ul>
            <li value="1">Do a search in Splunk on <span class="code">sourcetype=intermapper</span>.</li>
        </ul>
        <h3>Step 7: Installing the <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> App for Splunk</h3>
        <p>The <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> App for Splunk automatically configures Splunk to receive and interpret syslog data from <span class="Intermapper-PrimaryIMBrandName">Intermapper</span>. </p>
        <p>In order for Splunk to present collected data in an <span class="Intermapper-PrimaryIMBrandName">Intermapper</span>-specific way, you need to install the <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> App for Splunk.</p>
        <p style="font-weight: bold;">To install the <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> App for Splunk:</p>
        <ol>
            <li value="1">From Splunk's <b style="font-style: italic;">Apps</b> menu (in the Web UI), choose <b style="font-style: italic;">Find More Apps...</b> The Browse More Apps page appears.</li>
            <li value="2">Enter "<span class="Intermapper-PrimaryIMBrandName">Intermapper</span>" in the search box, and click the Search button or press <b style="font-style: italic;">Enter</b>. The <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> App for Splunk appears.</li>
            <li value="3">Click the <b style="font-style: italic;">Read More</b> link. The description page for the <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> App for Splunk appears.</li>
            <li value="4">Click <b style="font-style: italic;">Download</b>, log into your Splunk account, and save the file in a location accessible to your browser.</li>
            <li value="5">From the Web UI or your Splunk installation, choose <b style="font-style: italic;">Manage Apps...</b> from the Apps menu. The Apps Manager page appears, showing all currently installed Splunk Apps.</li>
            <li value="6">Click <b style="font-style: italic;">Install App from File</b>. The Upload an App page appears.</li>
            <li value="7">In the File box, click <b style="font-style: italic;">Browse</b>, and navigate to the App file you downloaded.&#160;</li>
            <li value="8">If you have installed a previous version, click to select <b style="font-style: italic;">Upgrade App</b>.</li>
            <li value="9">Click <b style="font-style: italic;">Upload</b>. The app is installed. You will be asked to restart your Splunk server.</li>
            <li value="10">Click <b style="font-style: italic;">OK</b>&#160;to restart your Splunk server.</li>
            <li value="11">From the Apps menu, choose <b style="font-style: italic;"><span class="Intermapper-PrimaryIMBrandName">Intermapper</span></b>. A configuration notice appears. </li>
            <li value="12">Follow the links to the Configuration page.</li>
            <li value="13">Enter the IP address and port of the <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> web server in the form "[address]:[port]", and the name of a default map, and click <b style="font-style: italic;">Save</b>.</li>
            <li value="14">After a few moments, the <span class="Intermapper-PrimaryIMBrandName">Intermapper</span> page appears with the default map.</li>
        </ol>
    </body>
</html>