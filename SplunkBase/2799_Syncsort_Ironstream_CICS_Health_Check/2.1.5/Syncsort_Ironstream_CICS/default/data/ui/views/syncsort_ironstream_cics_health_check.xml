<form>
  <label>CICS Health Check</label>
  <fieldset submitButton="true" autoRun="true">
    <input type="text" token="tokJOBNAME">
      <label>Regions</label>
      <default>CICS_REGION</default>
    </input>
    <input type="text" token="tokINDEX">
      <label>Index</label>
      <default>SYNCSORT_IRONSTREAM_INDEX</default>
    </input>
  </fieldset>
  <row>
    <panel>
      <chart>
        <title>Average Response Time - $tokJOBNAME$ in the last second</title>
        <search>
          <query>index=$tokINDEX$              MFSOURCETYPE = SMF110              TRAN     != "C*"              JOBNAME   = $tokJOBNAME$                              |fields  + USRCPUT_MICROSEC             |timechart span=1s eval(avg(USRCPUT_MICROSEC)/1000000) as Response             |gauge Response .005 .010 .020 .030 .04 .05</query>
          <earliest>-10s@s</earliest>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">radialGauge</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
      </chart>
    </panel>
    <panel>
      <chart>
        <title>Average Transactions per Second for $tokJOBNAME$ in the last second</title>
        <search>
          <query>index="$tokINDEX$"              MFSOURCETYPE = SMF110              JOBNAME   = "$tokJOBNAME$"              TRAN     != "C*"                          |fields + CURTASKS             |timechart span=1sec avg(CURTASKS) as TASKS             |gauge TASKS 05 10 15 20</query>
          <earliest>-10s@s</earliest>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">radialGauge</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
      </chart>
    </panel>
    <panel>
      <chart>
        <title>Average Transactions by Region for: $tokJOBNAME$</title>
        <search>
          <query>index=$tokINDEX$              MFSOURCETYPE = SMF110              JOBNAME   = $tokJOBNAME$                           |fields + CURTASKS,JOBNAME             |timechart span=1m eval(round(avg(CURTASKS),2)) by JOBNAME</query>
          <earliest>-1h</earliest>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleX.text">Date Time</option>
        <option name="charting.axisTitleY.text">Count</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <input type="text" token="tokTRAN">
        <label>Transaction</label>
        <default>*</default>
      </input>
      <table>
        <title>Transaction Counts for region: $tokJOBNAME$</title>
        <search>
          <query>index=$tokINDEX$              MFSOURCETYPE = SMF110              JOBNAME   = $tokJOBNAME$              TRAN   = $tokTRAN$              TRAN     != "C*"             |fields + TRAN             |chart count(TRAN) as Count by TRAN             |rename TRAN as "Transaction"</query>
          <earliest>-1h</earliest>
        </search>
        <option name="wrap">true</option>
        <option name="rowNumbers">false</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">cell</option>
        <option name="count">10</option>
      </table>
    </panel>
    <panel>
      <chart>
        <title>Average Time to 1st Dispatch for transaction: $tokTRAN$</title>
        <search>
          <query>index=$tokINDEX$
              MFSOURCETYPE	= SMF110	
              TRAN		   != "C*"
              JOBNAME		= $tokJOBNAME$
              TRAN			= $tokTRAN$
            
            |fields + DSPDELAY_MICROSEC, TRAN
            |timechart span=1m eval(avg(DSPDELAY_MICROSEC)/1000000) as Delay by TRAN limit=0</query>
          <earliest>-1h</earliest>
          <latest></latest>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">column</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <table>
        <title>Abends</title>
        <search>
          <query>index=$tokINDEX$ 
              MFSOURCETYPE	= SMF110	
              ABCODEO	   != ""
              JOBNAME		= $tokJOBNAME$
            
            |table DATETIME JOBNAME OTRAN TRAN ABCODEO
            |rename JOBNAME as Region 
                    OTRAN   as "Original Tranaction" 
                    TRAN    as Tran
                    ABCODEO as "Abend Code"</query>
          <earliest>-1h</earliest>
          <latest></latest>
        </search>
        <option name="wrap">false</option>
        <option name="rowNumbers">false</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">cell</option>
        <option name="count">10</option>
      </table>
    </panel>
    <panel>
      <table>
        <title>Abend Counts</title>
        <search>
          <query>index=$tokINDEX$
              ABCODEO	!= ""
              JOBNAME	 = $tokJOBNAME$
            
            |fields + ABCODEC
            |stats count(ABCODEC) as Count by ABCODEC
            |rename ABCODEC as "Abend Code"
            |sort Count d</query>
          <earliest>-1h</earliest>
          <latest></latest>
        </search>
        <option name="list.drilldown">full</option>
        <option name="list.wrap">1</option>
        <option name="maxLines">5</option>
        <option name="raw.drilldown">full</option>
        <option name="rowNumbers">false</option>
        <option name="table.drilldown">all</option>
        <option name="table.wrap">1</option>
        <option name="type">list</option>
        <option name="wrap">true</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">cell</option>
        <option name="count">10</option>
      </table>
    </panel>
  </row>
</form>