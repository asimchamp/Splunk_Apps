<dashboard script="tf2_table_icons_rangemap.js, table_row_highlighting.js, custom_layout_width.js" stylesheet="tf2_table_decorations.css">
  <label>Real-Time Gameplay Stats</label>
  <row>
    <panel>
      <single>
        <title>Current map</title>
        <searchString>tag=tf2 map started | head 1 | fields map_name</searchString>
        <earliestTime>-24h@h</earliestTime>
        <latestTime>now</latestTime>
        <option name="drilldown">none</option>
        <option name="refresh.auto.interval">60</option>
      </single>
    </panel>
    <panel>
      <chart>
        <title># of Players</title>
        <searchString>tag=tf2 | timechart dc(player_name)</searchString>
        <earliestTime>-60m@m</earliestTime>
        <latestTime>now</latestTime>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">collapsed</option>
        <option name="charting.axisTitleY.visibility">collapsed</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">area</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">none</option>
        <option name="height">100px</option>
        <option name="charting.seriesColors">[0x999997]</option>
        <option name="refresh.auto.interval">60</option>
      </chart>
    </panel>
    <panel>
      <single>
        <title>Current game duration</title>
        <searchString>tag=tf2 map started | head 1 | eval duration=tostring(now()-_time, "duration") | fields duration</searchString>
        <earliestTime>-4h@m</earliestTime>
        <latestTime>now</latestTime>
        <option name="drilldown">none</option>
        <option name="linkView">search</option>
        <option name="refresh.auto.interval">10</option>
      </single>
    </panel>
  </row>
  <row>
    <panel>
      <single>
        <title>Total # of Kills</title>
        <searchString>tag=tf2 player_action=killed | stats count</searchString>
        <earliestTime>-60m@m</earliestTime>
        <latestTime>now</latestTime>
        <option name="linkView">search</option>
        <option name="drilldown">none</option>
        <option name="refresh.auto.interval">30</option>
      </single>
      <chart>
        <title>Total Kills by Team</title>
        <searchString>tag=tf2 player_action=killed | stats count by player_team</searchString>
        <earliestTime>-60m@m</earliestTime>
        <latestTime>now</latestTime>
        <option name="linkView">search</option>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">pie</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">right</option>
        <option name="charting.fieldColors">{"Red":0xFF6666,"Blue":0x6699FF,"Unassigned":0x9B9BAB}</option>
        <option name="height">150px</option>
        <option name="refresh.auto.interval">30</option>
      </chart>
      <chart>
        <title>Team Kill History</title>
        <searchString>tag=tf2 player_action=killed | timechart count by player_team</searchString>
        <earliestTime>-60m@m</earliestTime>
        <latestTime>now</latestTime>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">collapsed</option>
        <option name="charting.axisTitleY.visibility">collapsed</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">false</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">area</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">connect</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">stacked</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">none</option>
        <option name="height">150px</option>
        <option name="charting.fieldColors">{"Red":0xFF6666,"Blue":0x6699FF,"Unassigned":0x9B9BAB}</option>
        <option name="refresh.auto.interval">30</option>
      </chart>
    </panel>
    <panel>
      <table id="table2">
        <title>Kill/Death Frequency</title>
        <searchString>tag=tf2 player_action=killed | eval kill_or_death=1 | eval kill_count=1 | table player_name kill_count kill_or_death _time | rename player_name AS Player | append [search tag=tf2 player_action=killed | eval kill_or_death=-1 | eval death_count=-1 | table victim_name death_count kill_or_death _time | rename victim_name AS Player] | stats count(kill_count) as Kills count(death_count) as Deaths sparkline(sum(kill_or_death)) as kill_death_freq by Player | eval Dif = if(isnull(Kills),0,Kills) - if(isnull(Deaths),0,Deaths) | table Player Kills Deaths Dif kill_death_freq | sort - Dif</searchString>
        <earliestTime>-60m@m</earliestTime>
        <latestTime>now</latestTime>
        <format type="sparkline" field="kill_death_freq">
          <option name="type">bar</option>
          <option name="height">35px</option>
          <option name="colorMap">
            <option name=":0">#999997</option>
            <option name="0:">#0066FF</option>
          </option>
          <option name="barWidth">5px</option>
        </format>
        <option name="wrap">true</option>
        <option name="rowNumbers">false</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">cell</option>
        <option name="count">12</option>
        <option name="refresh.auto.interval">60</option>
      </table>
    </panel>
    <panel>
      <table id="table1">
        <title>Real-Time Kill Updates</title>
        <searchString>tag=tf2 player_action=killed | table player_team player_name player_weapon victim_name _time | rename player_name as Killer player_weapon as weapon player_team as Team victim_name as Victim | sort - _time</searchString>
        <earliestTime>rt-30m</earliestTime>
        <latestTime>rt</latestTime>
        <option name="wrap">true</option>
        <option name="rowNumbers">false</option>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">cell</option>
        <option name="count">12</option>
      </table>
    </panel>
  </row>
  <row>
    <panel>
      <event>
        <title>Kills - Raw Data</title>
        <searchString>tag=tf2 killed</searchString>
        <earliestTime>-60m@m</earliestTime>
        <latestTime>now</latestTime>
        <option name="count">7</option>
        <option name="list.drilldown">full</option>
        <option name="list.wrap">1</option>
        <option name="maxLines">5</option>
        <option name="raw.drilldown">full</option>
        <option name="rowNumbers">0</option>
        <option name="table.drilldown">all</option>
        <option name="table.wrap">1</option>
        <option name="type">list</option>
        <option name="refresh.auto.interval">17</option>
        <fields>["host","source","sourcetype"]</fields>
      </event>
    </panel>
  </row>
</dashboard>
