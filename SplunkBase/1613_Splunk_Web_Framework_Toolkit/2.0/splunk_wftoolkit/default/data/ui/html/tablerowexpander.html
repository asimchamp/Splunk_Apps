<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Custom table row expander</title>
    <link rel="shortcut icon" href="{{SPLUNKWEB_URL_PREFIX}}/static/img/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="{{SPLUNKWEB_URL_PREFIX}}/static/css/build/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="{{SPLUNKWEB_URL_PREFIX}}/static/css/build/pages/dashboard-simple-bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" media="all" href="{{SPLUNKWEB_URL_PREFIX}}/static/app/search/dashboard.css" />
    <link rel="stylesheet" href="{{SPLUNKWEB_URL_PREFIX}}/static/app/splunk_wftoolkit/contrib/prettify.css"/>
    <link rel="stylesheet" href="{{SPLUNKWEB_URL_PREFIX}}/static/app/splunk_wftoolkit/css/custom.css"/>
</head>
<body>
<a class="navSkip" href="#navSkip" tabindex="1">Screen reader users, click here to skip the navigation bar</a>
<div class="header">
    <div id="placeholder-splunk-bar">
        <a href="{{SPLUNKWEB_URL_PREFIX}}/app/launcher/home" class="brand" title="splunk &gt; listen to your data">splunk<strong>&gt;</strong></a>
    </div>
    <div id="placeholder-app-bar"></div>
</div>
<a id="navSkip"></a>
<div class="dashboard-body container-fluid main-section-body" data-role="main">
    <div id="content" class="centered">
        <!-- Example content -->
        <div class="dashboard-body container-fluid main-section-body" data-role="main">
            <div class="row">
                <div class="span12 dashboard-header clearfix">
                    <h2>Custom table row expander</h2>
                </div>
            </div>
        
            <div class="dashboard-row">
                <div class="dashboard-cell" style="width: 100%;">
                    <div class="dashboard-panel">
                        <div class="dashboard-element">
                            <div class="panel-head"></div>
                            <div class="panel-body">
                                <p>Add a custom row expander to your tables to show additional details about a particular row.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
            <div class="dashboard-row">
                <div class="dashboard-cell" style="width: 100%;">
                    <div class="dashboard-panel">
                        <div class="dashboard-element">
                            <div class="panel-head">
                                <h3>Example 1: A master-detail view using a template</h3>
                            </div>
                            <div class="panel-body html">
                                <p>This example shows how to add custom row expander to a Table view by defining a <code>SearchBasedRowExpansionRenderer</code> class that displays row details using an Underscore template.</p>
                                <p>To expand a row, click the arrow in the <b><i>i</i></b>  column:</p>
                                <div id="table1"></div>
                                <p>Here's the JavaScript that calls the <code>SearchBasedRowExpansionRenderer</code> class:</p>
        <pre class="prettyprint linenums lang-js">
        var tableView1 = mvc.Components.getInstance("example1");
        var table1RowExpansionRenderer = new SearchBasedRowExpansionRenderer({
            templateSelector: '#row-expansion-template',
            queryBuilder: function(rowData) {
                return 'index=_internal earliest=-5d latest=now ' +
                'sourcetype="' + rowData.values[0] + '" ' +
                'source="' + rowData.values[1] + '" ' + 
                'host="' + rowData.values[2] + '" ' + 
                '| timechart span=1d count | sort _time desc';
            }
        });
        tableView1.addRowExpansionRenderer(table1RowExpansionRenderer);
        tableView1.render();
        </pre>
                                <p>Here's the template that is used for the detailed view:</p>
        <pre class="prettyprint linenums lang-html">
        &lt;script type="text/template" id="row-expansion-template"&gt;
            &lt;div&gt;
                &lt;strong&gt;Statistics for the last 5 days&lt;/strong&gt;
                &lt;ul class="unstyled"&gt;
                    &lt;% _.each(obj, function(stat) { %&gt; &lt;li&gt;&lt;%= (new Date(stat._time)).toLocaleDateString() %&gt; - &lt;%= stat.count %&gt;&lt;/li&gt; &lt;% }); %&gt;
                &lt;/ul&gt;
            &lt;/div&gt;
        &lt;/script&gt;
        </pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
            <div class="dashboard-row">
                <div class="dashboard-cell" style="width: 100%;">
                    <div class="dashboard-panel">
                        <div class="dashboard-element">
                            <div class="panel-head">
                                <h3>Example 2: A master-detail view using a chart</h3>
                            </div>
                            <div class="panel-body html">
                                <p>This example shows how to add custom row expander to a Table view by defining a <code>GraphBasedRowExpansionRenderer</code> class that displays row details using a chart.</p>
                                <p>To expand a row, click the arrow in the <b><i>i</i></b> column:</p>
                                <div id="table2"></div>
                                
                                <p>Here's the JavaScript that calls the <code>GraphBasedRowExpansionRenderer</code> class:</p>
        <pre class="prettyprint linenums lang-js">
        var tableView2 = mvc.Components.getInstance("example2");
        tableView2.addRowExpansionRenderer(new GraphBasedRowExpansionRenderer({
            queryBuilder: function(rowData) {
                return 'index=_internal earliest=-5d latest=now ' +
                'sourcetype="' + rowData.values[0] + '" ' +
                'source="' + rowData.values[1] + '" ' + 
                'host="' + rowData.values[2] + '" ' + 
                '| timechart span=1d count | sort _time desc';
            }
        }));
        tableView2.render();
        </pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
        </div>
    </div>
    <div id="wide-content"></div>
</div>
<div class="footer"></div>
<script src="{{SPLUNKWEB_URL_PREFIX}}/config?autoload=1"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/js/contrib/require.js"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/js/i18n.js"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/i18ncatalog?autoload=1"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/js/profiles/shared.js"></script>
<script type="text/javascript">
require.config({
    baseUrl: "{{SPLUNKWEB_URL_PREFIX}}/static/js"
});
</script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/app/splunk_wftoolkit/examples_common.js"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/app/splunk_wftoolkit/tablerowexpander/tablerowexpander.js"></script>
</body>
</html>