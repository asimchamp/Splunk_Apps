<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Search manager controls</title>
    <link rel="shortcut icon" href="{{SPLUNKWEB_URL_PREFIX}}/static/img/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="{{SPLUNKWEB_URL_PREFIX}}/static/css/build/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="{{SPLUNKWEB_URL_PREFIX}}/static/css/build/pages/dashboard-simple-bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" media="all" href="{{SPLUNKWEB_URL_PREFIX}}/static/app/search/dashboard.css" />
    <link rel="stylesheet" href="{{SPLUNKWEB_URL_PREFIX}}/static/app/splunk_wftoolkit/contrib/prettify.css"/>
    <link rel="stylesheet" href="{{SPLUNKWEB_URL_PREFIX}}/static/app/splunk_wftoolkit/css/custom.css"/>
</head>
<body>
<a class="navSkip" href="#navSkip" tabindex="1">Screen reader users, click here to skip the navigation bar</a>
<div class="header">
    <div id="placeholder-splunk-bar">
        <a href="{{SPLUNKWEB_URL_PREFIX}}/app/launcher/home" class="brand" title="splunk &gt; listen to your data">splunk<strong>&gt;</strong></a>
    </div>
    <div id="placeholder-app-bar"></div>
</div>
<a id="navSkip"></a>
<div class="dashboard-body container-fluid main-section-body" data-role="main">
    <div id="content" class="centered">
        <!-- Example content -->
        <div class="dashboard-body container-fluid main-section-body centered component-page" data-role="main">
            <div class="row">
                <div class="span12 dashboard-header clearfix">
                    <h2>Search manager controls</h2>
                </div>
            </div>
            <div class="dashboard-row">
                <div class="dashboard-cell" >
                    <div class="dashboard-panel">
                        <div class="dashboard-element">
                            <div class="panel-body html allow-overflow">
                                <p>The SearchBar, SearchControls, Timeline, and TimeRange views allow you to control search managers. Rather than only taking results from search managers, these views modify the search managers by setting the search query and search properties (such as the earliest and latest times to search).</p>
        
                                <p>For all but the SearchControls view, you'll need to create a <code>change</code> event handler to update the search manager when the view value changes. For the TimeRange and SearchBar views, you can also use tokens to keep the controls in sync.</p>
        
                                <h2>SearchBar view</h2>
                                <p>The SearchBar view represents a search input that is bound to a search manager. Because the SearchBar view modifies a search manager, you must use tokens or listen for <code>change</code> events to update the search manager when the SearchBar view's value changes.</p>
        
                                <h4>Options</h4>
                                <p>You can set the following property:</p>
                                <ul>
                                    <p><code>timerange</code>: When <code>true</code>, the search bar includes a time range input.</p>
                                </ul>
                            
                                <h4>Example</h4>
                                <p>The following example shows a SearchBar view, a TimeRange view, and a Table view, all bound to the same search manager. A default search query is used, but if a new one is entered the table is updated.</p>                
                            
                                <div class="bs-docs-example">
                                    <div id="example-search-bar" ></div>
                                    <div id="bar-table"></div>
                                </div>
        
                                <div class="tab-pane active js" id="js">
                                    <pre class="prettyprint linenums lang-js">
        var SearchBarView = require("splunkjs/mvc/searchbarview");
        new SearchBarView({
            id: "example-search-bar",
            managerid: "example-bar-search",
            el: $("#divToHangOn")
        }).render();
        
        var TableView = require("splunkjs/mvc/tableview");
        new TableView({
            id: "example-table",
            managerid: "example-bar-search",
            pageSize: "5",
            el: $("#divToHangOn2") // seperate div
        }).render();
        
        var SearchManager = require("splunkjs/mvc/searchmanager");
        new SearchManager({
            id: "example-bar-search",
            search: "index=_internal | head 100 | timechart count by sourcetype span=100s",
        });    
        
        // Hooking up events 
        var manager = splunkjs.mvc.Components.getInstance("example-bar-search");
        var searchbar = splunkjs.mvc.Components.getInstance("example-search-bar");
        var timerange = searchbar.timerange;
        
        searchbar.on("change", function() {
            manager.set("search", searchbar.val()); 
        });
        
        timerange.on("change", function() {
            manager.search.set(timerange.val()); 
        });
                                    </pre>
                                </div> 
                            
                            <!-- END SEARCH BAR -->
        
                            <!-- SEARCH CONTROLS -->
                            <div class="section" id="searchcontrols">
                                <h2>SearchControls view</h2>
                                <p>The SearchControls view allows users to control a search in various ways such as pausing, continuing, or cancelling a search.</p>
        
                                <h4>Example</h4>
                                <p>In this example, a SearchBar view, a SearchControls view, and a Table view are bound to the same search. The search bar runs a search when a new search query is entered. The search controls control the operation of the search.</p>
        
                                <div class="bs-docs-example">
                                    <div id="searchcontrols-searchbar"></div>
                                    <div id="example-searchcontrols"></div>
                                    <div id="searchcontrols-table"></div>
                                </div>
        
                            </div>
                            <!-- END SEARCH CONTROLS -->
                            <!-- TIMELINE -->
                            <div class="section" id="timeline">
                                    
                                <h2>Timeline view</h2>
                                <p>The Timeline view displays an event timeline of a given search and allows interactive modification of the search time range. Because the Timeline view modifies the search manager, you must listen for <code>change</code> events to update the search manager when the Timeline view's value changes</p>
        
                                <h4>Options</h4>
                                <p>You can set the following property in JavaScript:</p>
                                <ul>
                                    <p><code>data</code>: The name of the results model.</p>
                                </ul>
        
                                <h4>Example</h4>
                                <p>In this example, a TimeRange view, a Timeline view, and a Table view are bound to the same search. The search's time range can be changed by the TimeRange or Timeline view. Custom time ranges can be interactively selected using the timeline.</p>
        
                                <div class="bs-docs-example">
                                    <div id="timeline-timerange"></div>
                                    <div id="example-timeline"></div>
                                    <div id="timeline-table"></div>
                                </div>
                                    <div class="tab-pane active js" id="js2">
                                        <pre class="prettyprint linenums lang-js">
        var TimeRangeView = require("splunkjs/mvc/timerangeview");
        new TimeRangeView({
            id: "example-timerange",
            managerid: "example-timeline-search",
            preset: "today",
            el: $("#divToHangOn")
        }).render();
        
        var TimelineView = require("splunkjs/mvc/timelineview");
        new TimelineView({
            id: "example-timeline",
            managerid: "example-timeline-search",
            el: $("#divToHangOn2")
        }).render();
        
        var TableView = require("splunkjs/mvc/tableview");
        new TableView({
            id: "example-table",
            managerid: "example-timeline-search",
            pageSize: "5",
            el: $("#divToHangOn3")
        }).render();
        
        var SearchManager = require("splunkjs/mvc/searchmanager");
        new SearchManager({
            id: "example-timeline-search",
            search: "index=_internal",
            preview: "True",
            status_buckets: 300
        });
        
        // Hooking up events 
        var manager = splunkjs.mvc.Components.getInstance("example-timeline-search");
        var timerange = splunkjs.mvc.Components.getInstance("timeline-timerange");
        var timeline = splunkjs.mvc.Components.getInstance("example-timeline");
        
        timerange.on("change", function() {
            manager.search.set(timerange.val());
        });
        
        timeline.on("change", function() {
            manager.search.set(timeline.val());
        });
                                        </pre> 
                                    </div>
                                </div>
        <!-- END TIMELINE -->
        
        <!-- TIME RANGE INPUT -->
                            <div class="section" id="time-range">
                                <h2>TimeRange view</h2>
                                <p>A TimeRange view can be used alone to modify the time range for a search manager. This view can be used with a SearchBar view to modify the time range for the search bar's search. Because the TimeRange view modifies the search manager, you must use tokens or listen for <code>change</code> events to update the search manager when the TimeRange view's value changes.</p>
        
                                <h4>Options</h4>
                                <p>You can set the following property in JavaScript:</p>
                                <ul>
                                    <p><code>preset</code>: When set, the TimeRange view starts with the selected time range. For a list of possible values, see the TimeRange view in the <a href="http://docs.splunk.com/Documentation/WebFramework" target="_blank">Component Reference</a>.</p>
                                </ul>
        
                                <h4>Example</h4>
                                <p>In this example, a TimeRange view is bound to the same search as a Single view. As the time range changes, the single value changes as well.</p>
        
                                <div class="bs-docs-example">
                                    <div id="example-timerange"></div>
                                    <div id="timerange-single" ></div>
                                </div>
                                    <div class="tab-pane active js" id="js3">
                                        <pre class="prettyprint linenums lang-js">
        var TimeRangeView = require("splunkjs/mvc/timerangeview");
        new TimeRangeView({
            id: "example-timerange",
            managerid: "timerange-search",
            preset: "today",
            el: $("#divToHangOn")
        }).render();
        
        var SingleView = require("splunkjs/mvc/singleview");
        new SingleView({
            id: "example-single",
            managerid: "timerange-search",
            afterLabel: "events",
            el: $("#divToHangOn2")
        }).render();
        
        var SearchManager = require("splunkjs/mvc/searchmanager");
        new SearchManager({
            id: "timerange-search",
            search: "index=_internal | stats count",
            preview: "True",
            status_buckets: 300
        });
                                        </pre> 
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="wide-content"></div>
</div>
<div class="footer"></div>
<script src="{{SPLUNKWEB_URL_PREFIX}}/config?autoload=1"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/js/contrib/require.js"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/js/i18n.js"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/i18ncatalog?autoload=1"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/js/profiles/shared.js"></script>
<script type="text/javascript">
require.config({
    baseUrl: "{{SPLUNKWEB_URL_PREFIX}}/static/js"
});
</script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/app/splunk_wftoolkit/examples_common.js"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/app/splunk_wftoolkit/searchcontrols/searchcontrols.js"></script>
</body>
</html>