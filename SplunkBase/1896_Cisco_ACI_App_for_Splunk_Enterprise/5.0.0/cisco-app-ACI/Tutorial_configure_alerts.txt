
********************************************************
   EMAIL CONFIGURATION TO RECEIVE ALERTS FROM SPLUNK
********************************************************

To receive email alerts when threshold crosses the certain limit, configure the mail setup like below. 

STEP 1: Setup Mail Configuration required for Alerts.

Configuring Splunk to connect into the Gmail (and other web based email) servers:

Login to Splunk Dashboard. In Browser type <server-IP>:8000
Ex: http://splunk-ip-address:8000

Go-to:  Settings->System-Server Settings
Click on: Email Settings

For Gmail use the following details:
Under - Mail Server Settings
	Mail host = smtp.gmail.com:587
	Email security = TLS
	Username = <YOUR_GMAIL_ADDRESS>
	Password = <YOUR_GMAIL_PASSWORD>

Under - Email Format 
	Link hostname = <YOUR_SPLUNK_IP_ADDRESS>

Click "Save"	

STEP 2: Change/Update the mail id to receive alerts: 
Go-to: Setting->Searches, reports, and alerts

This page will list all the Saved Searches related to alerts. All the alerts are enabled by default.
The Search Name starts with “ACI Monitoring Threshold: …”

Each Components have 3 Alerts when the limit crosses the Warning, Critical and Max threshold set respectively. 

Select the component/s you wish to Monitor.
Ex:  ACI Monitoring Threshold: Tenant Exceeds Warning Threshold Limit	

Under - Alert actions
	Change/Update the email addresses.
	To, CC, BCC.
	Enter a comma-separated list of email addresses.

STEP 3: Restart splunk to apply the changes.
> /opt/splunk/bin/splunk restart

More Info on Cron Schedule::
To modify scheduled alerts:
By default all the alerts been set to run every hour on 0th minute. 
	0 * * * *       # every hour on 0th minute.
	
To change the Cron-schedule
Under - Schedule and alert
	Cron schedule
		30 * * * * 		# Every hour on 30th minute.
	
Enter a cron-style schedule. 
For example '*/5 * * * *' (every 5 minutes) or '0 21 * * *' (every day at 9 PM).

Using cron expressions: Customize alert scheduling using a time range and cron expression.
Cron parameters: When specifying a cron expression, only five cron parameters are available, not six. The sixth parameter for year, common in other forms of cron notation, is not available.

The cron parameters, * * * * *, correspond to minute hour day month day-of-week.

Example expressions::
Here are some example cron expressions.
*/5 * * * *       Every 5 minutes.
*/30 * * * *      Every 30 minutes.
0 */12 * * *      Every 12 hours, on the hour.
*/20  * * * 1-5   Every 20 minutes, Monday through Friday.
0 9 1-7 * 1       First Monday of each month, at 9am.


More References::
https://docs.splunk.com/Documentation/Splunk/latest/Alert/Definescheduledalerts
https://blogs.splunk.com/2014/06/27/splunk-alerts-using-gmail-twitter-phone-calls-and-much-more/
https://docs.splunk.com/Documentation/Splunk/6.1.2/Alert/Setupalertactions#Email_notification

****************************************************************************************************************************************************************************************************
