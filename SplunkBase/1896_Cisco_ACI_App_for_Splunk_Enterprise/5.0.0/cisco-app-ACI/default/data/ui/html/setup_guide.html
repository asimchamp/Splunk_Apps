<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Setup Guide</title>
    <link rel="shortcut icon" href="{{SPLUNKWEB_URL_PREFIX}}/static/img/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="{{SPLUNKWEB_URL_PREFIX}}/static/css/build/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="{{SPLUNKWEB_URL_PREFIX}}/static/css/build/pages/dashboard-simple-bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" media="all" href="{{SPLUNKWEB_URL_PREFIX}}/static/app/search/dashboard.css" />
    <link rel="stylesheet" href="{{SPLUNKWEB_URL_PREFIX}}/static/app/cisco-app-ACI/contrib/prettify.css"/>
    <link rel="stylesheet" href="{{SPLUNKWEB_URL_PREFIX}}/static/app/cisco-app-ACI/css/custom.css"/>
    <link rel="stylesheet" href="{{SPLUNKWEB_URL_PREFIX}}/static/app/cisco-app-ACI/home/home.css"/>
</head>
<body>
<a class="navSkip" href="#navSkip" tabindex="1">Screen reader users, click here to skip the navigation bar</a>
<!-- <div class="header">
    <div id="placeholder-splunk-bar">
        <a href="{{SPLUNKWEB_URL_PREFIX}}/app/launcher/home" class="brand" title="splunk &gt; listen to your data">splunk<strong>&gt;</strong></a>
    </div>
-->    <div id="placeholder-app-bar"></div>
</div>
<a id="navSkip"></a>

<div class="dashboard-body container-fluid main-section-body">
    <div class="dashboard-header clearfix">
        <h2>Cisco ACI App for Splunk Enterprise</h2>
    </div>
    <p>The Cisco ACI App for Splunk Enterprise is used to Build dashboard on indexed data provided by "Cisco ACI Add-on for Splunk Enterprise" app.</p>
     <p>This app delivers centralized, real-time visibility for applications and ACI infrastructures across bare metal and virtualized environments.</p>
    <div class="section-nav">
        <ul class="nav-buttons">
            <li id="basic-components-button">
                <a data-section="basiccomponents" href="#basiccomponents" style="width:100px">
                    Requirements
                </a>
            </li>
             <li id="basic-components-button">
                <a data-section="topology" href="#topology" style="width:100px">
                     Splunk Setup
                </a>
            </li>
            <li id="toolkit-visualizations-button">
                <a data-section="installation" href="#installation" style="width:100px">
                    Manage&nbsp;Apps
                </a>
            </li>
             <li id="toolkit-visualizations-button">
                <a data-section="config" href="#config" style="width:100px">
                    Configuration
                </a>
            </li>
            <li id="examples-button">
                <a data-section="examples" href="#examples" style="width:120px">
                    Test&nbsp;Installation
                </a>
            </li>
            <li id="examples-button">
                <a data-section="datagen" href="#datagen" style="width:120px">
                    Data&nbsp;Generator
                </a>
            </li>
            <li id="examples-button">
                <a data-section="troubleshoot" href="#troubleshoot" style="width:160px">
                    Troubleshooting
                </a>
            </li>
            <li id="examples-button">
                <a data-section="extra" href="#extra" style="width:160px">
                    Users&nbsp;&&nbsp;Authentication
                </a>
            </li>
        </ul>
    </div>
<html> 

 <h1>

        

         <form class="submit" method="get" action="/app/cisco-app-ACI/home_page">

   <button id="myButton" class="btn btn-primary submit float-right submit-button" >Go to Home</button>

</form>

       </h1>

</html> 


    <div id="basiccomponents" class="toolkit-section clearfix">
        <h3><span class="icon-distributed-environment"></span>Requirements</h3>
        <p class="list-description">
        <p>Requirements for Main App</p>
        <ul>
        <li>Splunk version supported 7.0, 7.1, 7.2, 7.3 and 8.0</li>
	   <li>This main App requires "Cisco ACI Add-on for Splunk Enterprise" version 5.0.0</li>
	   <li>Splunk search head system should have 16 GB of RAM and a octa-core CPU to run this app smoothly.</li>
        </ul>
        <p>Requirements for Add-on App</p>
        <ul>
        <li>Splunk version supported 7.0, 7.1, 7.2, 7.3 and 8.0</li>
        <li>APIC version supported 3.1+, 4.1+ and 5.0</li>
        <li>MSO version supported 2.2+ and 3.1</li>
        <li>The app works for earlier versions as well, but some features may be restricted. </li>
        <li>APIC user ID and password for collecting data from APIC.</li>
        <li>Admin user ID and password for collecting data from MSO.</li>
        <li>Admin user account is recommended for APIC as it accesses all the data.</li>
        <li>For non-admin user account, provide 'Read-all' access privilege to the user in the APIC.</li>
        </ul>
        </p>
        <div id="basiccomponents-list" class="toolkit-item-list clearfix">
             <p></p>
        </div>
        <div id="basiccomponents-end"></div>
    </div>
     <div id="topology" class="toolkit-section clearfix">
        <h3><span class="icon-distributed-environment"></span>Splunk Setup</h3>
        <p class="list-description">
           <p> This app has been distributed in two parts.</p>
           <ul><li> Add-on app, which runs collector scripts and gathers data from ACI environment, does indexing on it and provides indexed data to Main app.</li>
               <li> Main app, which receives indexed data from Add-on app, runs searches on it and builds dashboard using indexed data.</li></ul>
           <br>
	   <p>Topology and Setting up Splunk environment:</p>
           <ul>
		<li>Install Main app and Add-on app on a single machine.</li>
                <li>Both the applications reside on the same Splunk instance.</li>
                <li>Main app uses the data collected by Add-on app and builds dashboard on it.</li>
           </ul>
           <ul>
		<li>Install Main app and Add-on app on a distributed clustered environment.</li>
                <li>Install the App on a Search Head or Search Head Cluster.</li>
                <li>Install and configure the Add-on on a Heavy forwarder or an Indexer. (Heavy forwarder recommended)</li>

           </ul>
        </p>
        <div id="topology-list" class="toolkit-item-list clearfix">
             <p></p>
        </div>
        <div id="topology-end"></div>
    </div>

    <div id="installation" class="toolkit-section clearfix">
        <h3><span class="icon-bar-beside"></span>Installation</h3>
        <p class="list-description">
         <p>Installation of Main App</p>
         <ul>
         <li>This app can be installed either through UI through "Manage Apps" or by extracting zip file into /$SPLUNK_HOME/splunk/etc/apps folder.</li>
         <li>Restart Splunk </li>
         </ul>
         <p>Installation of Add-on App</p>
         <ul>
         <li>Add-on app can be installed through UI using "Manage Apps" or extract zip file directly into /$SPLUNK_HOME/splunk/etc/apps/ folder.</li>
         <li> Restart Splunk.</li>
         </ul>
         <p><b>NOTE:</b>If the previous version of App is already installed, remove the cisco-app-ACI & TA_cisco-ACI folder from /$SPLUNK_HOME/splunk/etc/apps/ folder.</p>
         </p>
         </p>
        <div id="installation-list" class="toolkit-item-list clearfix">
            <!-- Tooklkit Visualizations pages here -->
        </div>
        <div id="installation-end"></div>
    </div>

    <div id="upgradation" class="toolkit-section clearfix">
        <h3><span class="icon-bar-beside"></span>Upgradation</h3>
        <p class="list-description">
        <ul>
            <ul>
                <li>Download the App package</li>
                <li>From the UI navigate to "Apps->Manage Apps"</li>
                <li>In the top right corner select "Install app from file"</li>
                <li>Select "Choose File" and select the App package </li>
                <li>Check Upgrade App</li>
                <li>Select "Upload" and follow the prompts.</li>
            </ul>
            <p>OR</p>
            <li>If newer version is available on splunkbase, then App/Add-on can be updated from UI also.</li>
            <ul>
                <li>From the UI navigate to "Apps->Manage Apps" OR click on gear icon</li>
                <li>Search for Cisco ACI App/Add-on</li>
                <li>Click on "Update to <version>" under Version Column.</li>
            </ul>
        </ul>
        </p>
        <p class="list-description">
            <p><b>Post upgradation steps</b></p>
            <ul>
                <p>Upgrading the Add-on(TA_cisco-ACI) to v4.5.0 from any version</p>
                <p>Please follow the below steps.</p>
                <li>In inputs.conf file under TA_cisco-ACI/local folder, if stanza containing "-stats'" is present, then perform following steps:</li>
                <ul>
                <li>Change following Classes:</li>
                <ul>
                    <li>eqptEgrTotal5min to eqptEgrTotal15min</li>
                    <li>eqptIngrTotal5min to eqptIngrTotal15min</li>
                    <li>procCPU5min to procCPU15min</li>
                    <li>procMem5min to procMem15min</li>
                </ul>
                <li>Restart splunk</li>
                </ul><br>
                <p>OR</p>
                <ul>
                    <li>Remove that whole stanza and save the file.</li>
                    <li>Restart splunk</li>
                </ul>
                <br>
                <li>Follow below steps if you are collecting data using "Certificate Based Authentication" in v4.3.0 OR v4.4.0 and Upgrading Add-on to v4.5.0</li>
                <ul>
                    <li>Take Backup of your Private key.</li>
                    <li>You need to convert your Private key to RSA Private key by running following command in cmd.</li>
                    <ul>
                        <li>openssl rsa -in &lt;old_private_key&gt;.key -out &lt;private_key&gt;.key <br> (Keep the name same for newly generated private_key). </li>
                    </ul>
                </ul>
                <br>
                <li>Enable all the scripted inputs.</li>
                <li><b>Note: </b>If scrpits are already enabled then first disable and then re-enable all the scripted inputs.</li>
            </ul>
        </p>

    </div>

    <div id="uninstallation" class="toolkit-section clearfix">
        <h3><span class="icon-bar-beside"></span>Uninstallation</h3>
        <p class="list-description">
            <p>This section provides the steps to uninstall App from a standalone Splunk platform installation.</p>
            <ul>
                <li>(Optional) If you want to remove data from Splunk database, you can use the below Splunk CLI clean command to remove indexed data from an app before deleting the app.</li>
                <ul><li>$SPLUNK_HOME/bin/splunk clean eventdata -index &lt;index_name&gt;</li></ul>
                <li>Delete the app and its directory. The app and its directory are typically located in the folder $SPLUNK_HOME/etc/apps/&lt;appname&gt; or run the following command in the CLI:</li>
                <ul><li>$SPLUNK_HOME/bin/splunk remove app [appname] -auth &lt;splunk username&gt;:&lt;splunk password&gt;</li></ul>
                <li>You may need to remove user-specific directories created for your app by deleting any files found here: $SPLUNK_HOME/bin/etc/users/*/&lt;appname&gt;</li>
                <li>Restart the Splunk platform.You can navigate to Settings -> Server controls and click the restart button in splunk web UI or use the following splunk CLI command to restart splunk:</li>
                <ul><li>$SPLUNK_HOME/bin/splunk restart</li></ul>
            </ul>
        </p>
    </div>

     <div id="config" class="toolkit-section clearfix">
        <h3><span class="icon-bar-beside"></span>Configuration</h3>
        <p class="list-description">
        <p><b>Configuration of Main App</b></p>
         <ul>
         <li>Login to Splunk: <b> http://your_splunk_host:port </b></li>
         <li>In browser type:<b> http://your_splunk_host:port/en-US/_bump . Click "Bump Version". </b></li>
         <li>In browser type:<b> http://your_splunk_host:port/en-US/debug/refresh. Click "Refresh". </b></li>
	 <li> Restart Splunk </li>
         </ul>
         <p><b>Configuration of Add-on App</b></p>
         <ul>	
	 
    
        <li>After installation, navigate to Manage Apps by clicking on Gear icon next to Apps on the Splunk homepage.</li>
        <li>Click on "Setup" button under Actions section for "Cisco ACI Add-on for Splunk Enterprise"</li>
        <li>It will open a set up screen which facilitates user to configure APIC and MSO in Splunk.</li>
        <li>This app supports multiple APIC entries. Provide more ACI credentials through setup screen. Have max 5 APIC's configured for better performance.</li>
         <li>For Password based Authentication and Remote User based Authentication, Splunk REST API will encrypt the password and store it in app itself(local/passwords.conf) in encrypted form.</li>
         <li>For Certificate based Authentication, certificate name and path to the private key will be stored in the app itself(local/cisco_aci_server_setup.conf).</li>
         <li>Data collector script will fetch these credentials through REST API to connect to the APIC.</li>
         <p><li><b>NOTE:</b> Whenever user wants to change the credentials, user needs to remove the current entry from directory TA_cisco-ACI/local/passwords.conf or TA_cisco-ACI/local/cisco_aci_server_setup.conf first. Restart the Splunk. Provide the credentials through UI.</li></p>
         <li>APIC Hostname or IP address once configured to any 3 modes of authentication, cannot be configured through the remaining 2 modes of Authentication</b></p>
         <li>Also, user can setup APIC either using any one of the three modes of authentication or all the three modes one by one but for different APICs</li>
         <ul>
            <li>Example: User can either setup only APIC1 using Password/Remote/Certificate based authentication.</li>
            <p>OR</p>
            <li>User can setup APIC1 for password based authentication, APIC2 for Remote based authentication and APIC3 for Certificate based authentication.</li>
        </ul>
        <p><li><b>NOTE:</b> APIC Hostname or IP address once configured to any 3 modes of authentication, cannot be configured through the remaining 2 modes of Authentication</b></p>
        
        <li>MSO Hostname or IP address once configured to any one of the modes of authentication, cannot be configured through the remaining 2 modes of authentication.</li>
        <li>Also, user can setup MSO either using any one of the two modes of authentication or all the two modes one by one but for different MSOs.</li>
        <ul>
            <li> Example: User can either setup only MSO1 using Password based authentication.</li>
            <p>OR</p>
            <li>User can setup MSO1 for password based authentication and MSO2 for Remote based authentication.</li>
        </ul>
        <li> Whenever user wants to change the credentials, he/she needs to remove the current entry from directory TA_cisco-ACI/local/passwords.conf first. Restart the Splunk.Provide the credentials through UI.</li>        
        <p><li><b>NOTE:</b> The hostname configured by APIC, cannot be re-configured for MSO and vice versa.</p>
            <ul> Example: If user can only configure host1 for APIC and host2 for APIC and not host1 for both APIC and MSO.</ul>
        <br>
        <li>The tabs for above case is explained below:</li><br>
        </ul>
        <p><b>Configure APIC:</b></p>
        <li>This tab provides 3 different modes to collect the APIC data in Splunk. The common fields are APIC Hostname or IP address and APIC Port (optional).</li>
        <li>The different modes are:</ul>
        <ul><p><b>Password based Authentication</b></p>
            <ul>
                <li> To setup APIC with Password based authentication, follow below given steps</li>
                <li> On the setup screen, enable Password based Authentication checkbox</li>
                <li> Enter APIC hostname or IP address of the APIC</li>
                <li> Enter port of the APIC. ex:8000(this step is optional)</li>
                <li> Enter username and password which is used to login to the APIC</li>
                <li> Click on Save button at the bottom of the page</li>
            </ul><br>
        </ul>
        <ul>
            <p><b>Remote based Authentication</b></p>
            <ul>
                <li> The user needs to provide both Password and Domain Name of User specified</li>
                <li> To setup APIC with Remote based authentication, follow below given steps</li>
                <ul>
                    <li> On the setup screen, enable Remote based authentication checkbox</li>
                    <li> Enter APIC hostname or IP address of the APIC</li>
                    <li> Enter port of the APIC. ex:8000 (this step is optional)</li>
                    <li> Enter Username and password which is used to login to the APIC</li>
                    <li> Enter Domain name of the user</li>
                    <li> Click on Save button at the bottom of the page</li>
                </ul>
            </ul><br>
        </ul>
        <ul>
            <p><b>Certificate based Authentication</b></p>
            <ul><li>The user needs to provide Certificate Name (as uploaded on APIC) and Path of RSA Private Key (path to the RSA private key, present on Splunk, of the certificate uploaded on APIC) on the setup page to collect data.</li>
            <li>
                The procedure to create and configure custom certificate for certificate based authentication is given in below link:<br>
                <a href="https://www.cisco.com/c/en/us/td/docs/switches/datacenter/aci/apic/sw/4-x/basic-configuration/Cisco-APIC-Basic-Configuration-Guide-401/Cisco-APIC-Basic-Configuration-Guide-401_chapter_011.pdf">https://www.cisco.com/c/en/us/td/docs/switches/datacenter/aci/apic/sw/4-x/basic-configuration/Cisco-APIC-Basic-Configuration-Guide-401/Cisco-APIC-Basic-Configuration-Guide-401_chapter_011.pdf</a>
            </li>
            <li>Convert Private key to RSA Private key by running following command in cmd.</li>
            <ul><li>openssl rsa -in &lt;private_key&gt;.key -out &lt;rsa_private_key&gt;.key</li></ul>
            <li> To setup APIC with Certificate based authentication, follow below given steps</li>
            <ul>
                <li> On the setup screen, enable Certificate based authentication checkbox</li>
                <li> Enter APIC hostname or IP address of the APIC</li>
                <li> Enter port of the APIC. ex:8000 (this step is optional)</li>
                <li> Enter Username to login to the APIC</li>
                <li> Enter Name of Certificate</li>
                <li> Enter Path of private key. ex: /opt/splunk/ACI.key</li>
                <li> Click on Save button at the bottom of the page</li>
            </ul>
        </ul>
        </ul>
    <br>
        <p><b>Configure MSO:</b></p>
        <li>This tab provides 2 different modes of authentication to collect the MSO data in Splunk. The common fields are MSO Hostname or IP address and MSO Port.</li>
        <li>The different modes are:
        <ul><p><b>Password based Authentication</b></p>
            <ul>
                <li>The user can configure the app using default aproach i.e. using Password.</li>
                <li>To setup MSO with Password based authentication, follow below given steps</li>
                <ul>
                    <li>On the setup screen, enable Password based Authentication checkbox</li>
                    <li>Enter MSO hostname or IP address of the MSO</li>
                    <li>Enter port of the MSO ex:8000(this step is optional)
                    <li>Enter username and password which is used to login to the MSO</li>
                    <li>Click on Save button at the bottom of the page</li>
                </ul>
            </ul>
        </ul>
        <ul><p><b>Remote based Authentication</b></p>
        <ul>
            <li>The user needs to provide both Password and Domain Name of User specified</li>
            <li>To setup MSO with Remote based authentication, follow below given steps</li>
            <ul>
                <li>On the setup screen, enable "Remote based authentication" checkbox</li>
                <li>Enter MSO hostname or IP address of the MSO</li>
                <li>Enter port of the MSO ex:8000 (this step is optional)</li>
                <li>Enter Username and password which is used to login to the MSO</li>
                <li>Enter Domain name of the user</li>
                <li>Click on Save button at the bottom of the page</li>
            </ul>
        </ul>
        </ul>
        <ul><p><b>Fetch Sites button:</b></p>
            <ul>
            <li> After providing MSO credentials from any of the above two modes, user can click Fetch Sites button.</li>
            <li> It will display sites (i.e. APIC) associated with MSO, so user can directly provide site credentials here to configure in Splunk.</li>
            <li> After providing credentials, click on Save button at the bottom of the page.</li>
            <li> To Disable SSL Verification follow below steps before configuring credentials: </li>
            <ul>
                <li>Copy the file "default/app_setup.conf" to "local/app_setup.conf"</li>
                <li>Change the value of `verify_ssl` parameter to `False` under stanza [fetch_sites_ssl]</li>
                <li>Restart Splunk</li>
                <li>This will disable the SSL verification while configuring credentials through setup page</li>
            </ul>
            </ul>
        </ul>
        <br>
        <p><b>SSL Configuration:</b><p>
        <ul>
            <li>The SSL Connection with APIC/MSO is enabled by default. Users first need to create custom certificate with proper Domain name for APIC and load the updated certificate for SSL verification.</li>
            <li>If users wants to disable SSL verification follow the procedure given in next section.</li>
            <li>The procedure to create a custom certificate for Cisco ACI for HTTPS Access is given in below link:
         <a href="https://www.cisco.com/c/en/us/td/docs/switches/datacenter/aci/apic/sw/kb/b_Configuring_Custom_Certificate_for_ACI_HTTPS_Access.html"> https://www.cisco.com/c/en/us/td/docs/switches/datacenter/aci/apic/sw/kb/b_Configuring_Custom_Certificate_for_ACI_HTTPS_Access.html </a></li>
        </ul><br>
        <p>To use the new certificate for connection to APIC/MSO from Splunk, follow the below steps:</p>
        <ul>
            <li>If your script uses python2.7 for data collection:</li>
            <ul>
                <li>Navigate to folder $SPLUNK_HOME/lib/python2.7/site-packages/requests</li>
                <li>Add your content at the end of the cacert.pem file</li>
            </ul>
            <li>If your script uses python3.7 for data collection:</li>
            <ul>
                <li>Navigate to folder $SPLUNK_HOME/lib/python3.7/site-packages/requests</li>
                <li>Add your content at the end of the cacert.pem file</li>
            </ul>
        </ul>
        <br>
        <ul>
        
        </ul>
        <p><b>Follow below steps to disable the SSL verification:</p>
            <ul>
                <li>For Password based Authentication and Remote User based Authentication:</li>
                <ul>
                    <li>Provide credentials from setup page.</li>
                    <li>passwords.conf file will be created in TA_cisco-ACI/local folder with sample stanza : [credential:x.x.x.x:<apic/mso>,<port>,<user>,True:]..</li>
                    <li>Here, default value of SSL verification will be True.</li>
                    <li>Change this value from True to False.</li>
                    <li>Restart Splunk.</li>
                </ul><br>

                <li>For Certificate based Authentication:</li>
                <ul>
                    <li>Provide credentials from setup page.</li>
                    <li>cisco_aci_server_setup.conf file will be created in TA_cisco-ACI/local folder with sample stanza : [cisco_aci_server_setup_settings,x.x.x.x].</li>
                    <li>Here, default value of cisco_aci_ssl parameter will be True.</li>
                    <li>Change this value from True to False.</li>
                    <li>Restart Splunk.</li>
                </ul>
            </ul><br>

	 <p><b>APIC Redundancy:</b><p>         
	 	<li>To enable APIC Redundancy provide multiple APIC Hosts in the setup page separated by a comma ','. For example: </li>
	 	<pre>
        <b> apic1.cisco.com,apic2.cisco.com,apic3.cisco.com<br></b>
	 	</pre>
         <li>Inserting multiple APICs for the same APIC helps users to still collect data if the first APIC does not respond or is unavailable.</li>

    <p><b>MSO Redundancy:</b><p>         
        <li>To enable MSO Redundancy provide multiple MSO Hosts in the setup page separated by a comma ','. For example: </li>
        <pre>
        <b> mso1.cisco.com,mso2.cisco.com,mso3.cisco.com<br></b>
        </pre>
        <li>Inserting multiple MSOs for the same MSO helps users to still collect data if the first MSO does not respond or is unavailable.</li>


	 <br><p><b>Enable Collector Scripts:</b><p>
         <p><b>User needs to modify "default/inputs.conf" according to the following guidelines:</b></p>
         <li>Each entry in default/inputs.conf contains a field "passAuth" with default value admin. This field can contain any Splunk user with admin rights.</li>
         <li>This file contains filename paths which are different based on your OS platform. The app is configured to work for Unix/Linux/MacOS systems. </li>
	 <pre> <b>If the user is running this app on a Windows system, perform the following steps: <br> 
	 Copy the file "default/inputs.conf.WINDOWS" to "local/inputs.conf" </b>
	 </pre>

	 <li>Enable Data collector Scripts. By default Scripts are disabled. Enable through UI (Settings -> Data inputs -> Local inputs-> Scripts).</li>
	<li> Enable the collector scripts labelled under the app name: TA_cisco-ACI</li>

     <br><p><b>Add more data from APIC to Splunk (from front-end):</b><p>
        <p><b>Following options are provided on setup page for under "Show Data Inputs" checkbox for modifying data inputs in inputs.conf</b></p>
            <ul>
                <li><b>Type:</b> Following seven types are allowed in Add-on</li>
                <ul>
                    <li>authentication: To get the authentication information from the ACI environment.</li>
                    <li>classInfo: To get the general information for all the MOs of given classes.</li>
                    <li>cloud: To get the details related objects for all the MOs of given classes.</li>
                    <li>health: To get the health and fault information for all the MOs of given classes.</li>
                    <li>fex: To get the health and fault information for all the MOs of given classes.</li>
                    <li>microsegment: To get the general information for all the MOs of given classes.</li>
                    <li>stats: To get the statistical data for all the MOs of given classes.</li>
                    <li>mso: To get details of various MSO endpoints.</li>
                </ul>
                <li><b>Arguments:</b> Names of APIC classes for which data will be fetched or names MSO API endpoints.</li>
                <li><b>Interval:</b> Time interval (in seconds) at which data inputs will be scheduled to collect data, once enabled.</li>
                <li><b>Enable/Disable:</b> Status representing whether the data input is enabled or not.</li>
                <li><b>Actions:</b>
                        <ul>
                            <li><b>Edit</b></li>
                            <ul>
                            <li>Add/Remove/Modify the existing APIC classes or MSO endpoints.</li>
                            <li>Change time interval of data inputs.</li>
                            <li>Change status of data inputs i.e. enabled/disabled.</li>
                            <li>Click on add button (under Actions).</li>
                            </ul>

                        <li><b>Delete</b></li>
                        <ul>
                        <li>This button will directly delete data input.</li>
                        </ul>
                    </ul>
                </li>
                <li><b>Add New Button: </b>It will add new data input in inputs.conf. Again, user will have choice for all actions stated above.</li>
            </ul>
            <br>
            <p>Click on <b>Save</b> button after making changes.</p>
                <br>
                    <b>Note:</b>
                    <ul>
                        <li><b>The names of classes are case-sensitive.</b></li>
                        <li><b>Any change performed by user will be reflected in default/inputs.conf and local/inputs.conf.</b></li>
                    </ul>
	<li>Enable Data collector Scripts. By default Scripts are disabled. Enable through UI (Settings -> Data inputs -> Local inputs-> Scripts).</li>
    <li> Enable the collector scripts labelled under the app name: TA_cisco-ACI</li>

	<br><p><b>Add more data from APIC to Splunk (from back-end):</b><p>
      <p><b>User needs to modify "default/inputs.conf" BEFORE enabling the scripts according to the following guidelines:</b></p>
      <li>If the user wants to pull a particular class from the APIC that is not provided by the ACI app for Splunk: </li>
      	<pre>
         1. Get the particular classname from APIC and determine what needs to be monitored for that specific class name<br>
         2. If health info is required or stats info is required, add the classname to its appropriate script stanza defined by -health or -stats<br>
			Class to Add: fvAp (To include statistics related to Application Profiles)
			Modified script stanza in inputs.conf: 
			[./bin/collect.py -stats eqptEgrTotal15min eqptIngrTotal15min fvCEp l2IngrBytesAg15min l2EgrBytesAg15min procCPU15min procMem15min <b>fvAp</b>]<br>
		 3. Similarly, to control the amount of data that is indexed in splunk, you can remove the class names from the inputs.conf<br>
		 4. Restart splunk after making the changes
    </pre>
    
        <br><p><b>Enable Datamodel Acceleration:</b><p>
        <p><b>Datamodels can be accelerated for better dashboard performance</b></p>
        <li> Navigate to Settings>Data Models> Click 'Edit'>'Edit Acceleration' the data models for cisco-app-ACI. Check box 'Accelerate' to enable data model acceleration.   </li>
    <!-- 
     <li> On Windows enable following 13 collector scripts:

	<pre> 
	1. $SPLUNK_HOME\etc\apps\TA_cisco-ACI\bin\collect.py -stats eqptEgrTotal15min eqptIngrTotal15min fvCEp l2IngrBytesAg15min l2EgrBytesAg15min procCPU15min procMem15min<br>
    2. $SPLUNK_HOME\etc\apps\TA_cisco-ACI\bin\collect.py -health fabricHealthTotal eqptFabP eqptLeafP eqptCh eqptLC eqptFt eqptPsu eqptSupC ethpmPhysIf eqptcapacityPolEntry5min infraWiNode
    3. $SPLUNK_HOME\etc\apps\TA_cisco-ACI\bin\collect.py -health fvTenant fvAp fvEPg fvAEPg fvBD vzFilter vzEntry vzBrCP fvCtx l3extOut fabricNode
	4. $SPLUNK_HOME\etc\apps\TA_cisco-ACI\bin\collect.py -authentication aaaSessionLR<br>
	5. $SPLUNK_HOME\etc\apps\TA_cisco-ACI\bin\collect.py -classInfo aaaModLR faultRecord eventRecord
    6. $SPLUNK_HOME\etc\apps\TA_cisco-ACI\bin\collect.py -classInfo faultInst topSystem compVm compHv fvCEp fvRsCons fvRsProv fvRsVm fvRsHyper fvnsRtVlanNs fvnsEncapBlk fvRsPathAtt vmmCtrlrP compHostStats1h compRcvdErrPkts1h compTrnsmtdErrPkts1h
    7. $SPLUNK_HOME\etc\apps\TA_cisco-ACI\bin\collect.py -classInfo fvRsCEpToPathEp dbgEpgToEpgRslt dbgEpToEpRslt dbgAcTrail aaaUser aaaRemoteUser l1PhysIf eqptStorage procEntry procContainer acllogPermitL2Pkt acllogPermitL3Pkt acllogDropL2Pkt acllogDropL3Pkt
	If there exists Fabric Extenders in the ACI Fabric and needs to be monitored, enable the following script:
        8. $SPLUNK_HOME\etc\apps\TA_cisco-ACI\bin\collect.py -fex eqptExtCh eqptSensor eqptExtChHP eqptExtChFP eqptExtChCard<br>
	If there exists Microsegmented EPGs in APIC and needs to be monitored, enable the following script:
            9. $SPLUNK_HOME\etc\apps\TA_cisco-ACI\bin\collect.py -microsegment fvRsDomAtt fvVmAttr fvIpAttr fvMacAttr
    10. $SPLUNK_HOME\etc\apps\TA_cisco-ACI\bin\collect.py -cloud cloudZone cloudCtxProfile vzBrCP cloudRegion cloudExtEPg cloudEPg hcloudCsr hcloudEndPoint hcloudInstance vnsAbsGraph cloudLB fvTenant fvCtx cloudApp hcloudCtx
    11. $SPLUNK_HOME\etc\apps\TA_cisco-ACI\bin\collect_mso.py -mso tenant site schema
    12. $SPLUNK_HOME\etc\apps\TA_cisco-ACI\bin\collect_mso.py -mso audit user
    13. $SPLUNK_HOME\etc\apps\TA_cisco-ACI\bin\collect_mso.py -mso fabric policy
    </pre></li>

	<li>On Linux enable following 13 collector scripts:
	<pre>

	 1. ./bin/collect.py -health fabricHealthTotal eqptFabP eqptLeafP eqptCh eqptLC eqptFt eqptPsu eqptSupC ethpmPhysIf eqptcapacityPolEntry5min infraWiNode
        2. ./bin/collect.py -health fvTenant fvAp fvEPg fvAEPg fvBD vzFilter vzEntry vzBrCP fvCtx l3extOut fabricNode
        3. ./bin/collect.py -authentication aaaSessionLR <br>
        4. ./bin/collect.py -classInfo faultInst topSystem compVm compHv fvCEp fvRsCons fvRsProv fvRsVm fvRsHyper fvnsRtVlanNs fvnsEncapBlk fvRsPathAtt vmmCtrlrP compHostStats1h compRcvdErrPkts1h compTrnsmtdErrPkts1h<br>
        5. ./bin/collect.py -classInfo aaaModLR faultRecord eventRecord <br>
        6. ./bin/collect.py -classInfo fvRsCEpToPathEp dbgEpgToEpgRslt dbgEpToEpRslt dbgAcTrail aaaUser aaaRemoteUser l1PhysIf eqptStorage procEntry procContainer acllogPermitL2Pkt acllogPermitL3Pkt acllogDropL2Pkt acllogDropL3Pkt
        7. ./bin/collect.py -stats eqptEgrTotal15min eqptIngrTotal15min fvCEp l2IngrBytesAg15min l2EgrBytesAg15min procCPU15min procMem15min<br>
        If there exists Fabric Extenders in the ACI Fabric and needs to be monitored, enable the following script:
            8. ./bin/collect.py -fex eqptExtCh eqptSensor eqptExtChHP eqptExtChFP eqptExtChCard<br>
        If there exists Microsegmented EPGs in APIC and needs to be monitored, enable the following script:
            9. ./bin/collect.py -microsegment fvRsDomAtt fvVmAttr fvIpAttr fvMacAttr
        10. ./bin/collect.py -cloud cloudZone cloudCtxProfile vzBrCP cloudRegion cloudExtEPg cloudEPg hcloudCsr hcloudEndPoint hcloudInstance vnsAbsGraph cloudLB fvTenant fvCtx cloudApp hcloudCtx
        11. ./bin/collect_mso.py -mso tenant site schema
        12. ./bin/collect_mso.py -mso audit user
        13. ./bin/collect_mso.py -mso fabric policy
	</pre></li>
 -->
	<br><p><b>Create your own index:</b><p>
	<li>The app data defaults to 'main' index.</li>
	<li>If you need to specify a particular index for your APIC data, for ex. "apic",create an indexes.conf file [sample shown in ($SPLUNK_HOME/etc/apps/TA_cisco-ACI/default/indexes.conf.sample)]</li>
	<li>Once you specify your index, edit the inputs.conf file and add a line "index=[yourindex]" under each script stanza. </li><br>
    <li><b>Note: If a custom index is specified, please make sure to give the users permission to search that index by default.
	 Navigate to Settings > Access Controls > Roles > Edit the user and add the index to 'Indexes searched by default'</b></li><br>

	 <p><b>Open the app, Landing page is Home page. The main app dashboard can take some time before the data is populated in all panels. Follow the Test Installation procedure. </b></p>

         <br><p><b>Configuration of Email Settings to recieve Alerts</b> </p>
	 <ul>
	 <li>Reference: Please refer the document "Tutorial_configure_alerts.txt" given in cisco-app-ACI folder on how to configure Email alerts.</li>
	 <li>Alerts for the ACI app can be found under Settings > Knowledge > Searches, Reports and Alerts.</li>
	 </ul>

         <br><p><b>Integration of ACI syslog messages with Splunk </b></p>
	 <ul><li>The faults & events syslog messages are shown in Help Desk page. User audit logs are displayed in Authentication page.</li></ul>
	 <ul><li>If user is wants to configure Syslog messages with Splunk add-on, please refer the document "Tutorial_configure_syslog.txt" provided in the TA_cisco-ACI folder to know more about Syslog configuration.</li></ul>

         <br><li><b>Note: If in case cleaned Splunk eventdata, please make sure to delete the files ending with "_LastTransactionTime.txt" from TA_cisco-ACI/bin/ folder.
	 These files are saving timestamp to get only incremental data from APIC/MSO. </b></li>
         </ul>
         </p>
         </p>
        <div id="config-list" class="toolkit-item-list clearfix">
            <!-- Tooklkit Visualizations pages here -->
        </div>
        <div id="config-end"></div>
    </div>

    <div id="examples" class="toolkit-section clearfix">
        <h3><span class="icon-report"></span>Test Installation</h3>
        <p class="list-description">
           <p> Once  Add-on app is configured to receive data from ACI, The main app dashboard can take some time before the data is populated in all panels. A good test to see that the app are receiving all of the data is to run this search after several minutes: <br> <pre>index="your specified index or 'main'" | stats count by sourcetype </pre></p>
       
        <p><b>Troubleshooting APIC configuration:</b></p>
        <ul>
            <p> In particular, the user should see these sourcetypes: <br>
            <li><code>cisco:apic:health</code></li>
            <li><code>cisco:apic:stats</code></li>
            <li><code>cisco:apic:class</code></li>
            <li><code>cisco:apic:authentication </code></li>
            </p>
            <p> If the user don't see these sourcetypes, have a look at the messages output by the scripted input: collect.py. Here is a sample search that will show them:<br> <pre>index=_internal component="ExecProcessor" collect.py "ACI Error:" | table _time host log_level message </pre></p>
                <p> Below are two sample event records. First one gives health detail for tenant with name "common" and the other one gives a fault detail for the same tenant. </p>
            <p> <pre>1. 2014-04-25 00:38:07     dn=uni/tn-common/health status=created,modified updTs=2014-04-25T04:52:32.274+00:00     chng=0  cur=100 maxSev=cleared  modTs=never     twScore=100     rn=health       prev=100        childAction=    dn=uni/tn-common        lcOwn=local     ownerKey=       name=common     descr=  status=created,modified monPolDn=uni/tn-common/monepg-default   modTs=2014-04-23T22:14:01.702+00:00     ownerTag=       uid=0   rn=tn-common    childAction=    component=fvTenant
        </pre></p>
            <p><pre> 2. 2014-04-25 00:38:08     status=created,modified domain=tenant   code=F1228      occur=1 subject=contract        severity=minor  descr=Contract default configuration failed due to filter-not-present   origSeverity=minor      rn=fault-F1228  childAction=    type=config     dn=uni/tn-common/oobbrc-default/fault-F1228     prevSeverity=minor      modTs=never     highestSeverity=minor   lc=raised       changeSet=      created=2014-04-23T22:24:37.274+00:00   ack=no  cause=configuration-failed      rule=vz-abrcp-configuration-failed      lastTransition=2014-04-23T22:26:57.046+00:00    dn=uni/tn-common        lcOwn=local     ownerKey=       name=common descr=  status=created,modified monPolDn=uni/tn-common/monepg-default   modTs=2014-04-23T22:14:01.702+00:00     ownerTag=       uid=0   rn=tn-common    childAction=    component=fvTenant </pre></p>
        </ul>

        <p><b>Troubleshooting MSO configuration:</b></p>
        <ul>
            <p>In particular, the user should see these sourcetype: <br>
            <li><code>cisco:mso</code></li>
            </p>
            <p> If the user don't see these sourcetypes, have a look at the messages output by the scripted input: collect_mso.py. Here is a sample search that will show them:<br> <pre>index=_internal component="ExecProcessor" collect_mso.py "MSO Error:" | table _time host log_level message </pre></p>
                <p> Below are two sample event records. First one gives policy detail for policy named common_tenant_policy and the other one for mso_policy.</p>
            <p> <pre>1.current_time=2020-06-19 16:10:42	mso_host=x.x.x.x	mso_api_endpoint=policyDetails	version=1	provider_epgRef=/schemas/5eccc36d2d0000623d59b228/templates/Template2/anps/common_tenant_AP/epgs/common_tenant_EPG_1	provider_addr=1.2.3.4	provider_l3Ref=	provider_tenantId=0000ffff0000000000000010	provider_externalEpgRef=	tenantId=0000ffff0000000000000010	id=5ed5f8242a1d00df1aabe01b	policySubtype=relay	name=common_tenant_policy	policyType=dhcp
        </pre></p>
            <p><pre>2. current_time=2020-06-19 16:10:42	mso_host=x.x.x.x	mso_api_endpoint=policyDetails	provider_epgRef=/schemas/5eccc36d2d0000623d59b228/templates/Template2/anps/common_tenant_AP/epgs/common_tenant_EPG_1	provider_addr=10.0.1.11	provider_l3Ref=	provider_tenantId=0000ffff0000000000000010	provider_externalEpgRef=	tenantId=5ecca9982d0000453759b150	id=5eec91755c1d0065269c37c6	policySubtype=relay	name=mso_policy	policyType=dhcp</pre></p>
        </ul>

       </p>
        <div id="examples-list" class="toolkit-item-list clearfix">
            <!-- Examples pages here -->
        </div>
        <div id="examples-end"></div>
    </div>
 
    <div id="datagen" class="toolkit-section clearfix">
        <h3><span class="icon-report"></span>Data Generator</h3>
        <p class="list-description">
           <p>This app is provided with sample data which can be used to generate dummy data. To simulate this sample data, the Splunk Event generator, which is available at <a href="https://github.com/splunk/eventgen"> https://github.com/splunk/eventgen</a>, needs to be installed at $SPLUNK_HOME/etc/apps. This APP uses the Samples provided in ACI Add-on app to populate the dummy data for ACI environment.
 </p>

     <div id="datagen-list" class="toolkit-item-list clearfix">
            <!-- Examples pages here -->
        </div>
        <div id="datagen-end"></div>
    </div>

       
    <div id="troubleshoot" class="toolkit-section clearfix">
        <h3><span class="icon-bar-beside"></span>Troubleshooting</h3>
        <p class="list-description">
        <p><b>Troubleshooting of Main App</b></p>
        
    <li>If any warning displayed in dashboards of the app stating excessive memory usage of mvexpand command like: `output will be truncated at xxx results due to excessive memory usage...` , user can manually increase the memory limit in limits.conf</li>
    <li>Default value of max_mem_usage_mb parameter is 500 MB. to increase the limit follow below steps.</li>
    <li>create limits.conf file under $SPLUNK_HOME/etc/apps/cisco-app-ACI/local</li>
    <ul>
        <li>Add below stanza:</li>
        [mvexpand]
        max_mem_usage_mb = <non-negative integer in MB>
    </ul>

    <div id="troubleshoot-list" class="toolkit-item-list clearfix">
        <p></p>
    </div>

    <div id="troubleshoot-end"></div>
    </div>
    
     <div id="extra" class="toolkit-section clearfix">
        <h3><span class="icon-report"></span>Users & Authentication</h3>
        <p class="list-description">
           <p>In addition to out-of-the-box reporting and analytics capabilities for your ACI environment, the app includes a set of pre-defined dashboards for specific user roles: </p>
       <p><b>Helpdesk admin</b>: Enables Help desk operator to analyze various faults in the system and escalate them to tenant or fabric admin accordingly. Here, admin will have access to only "Home", "Authentication" and "Helpdesk" dashboards. </p>
       <p><b>Tenant admin</b>:  Enables Tenant admin to analyze and drill down faults and health related issues to a particular tenant. Here, admin can drill down into Applications, EPGs and VM end points to identify single point of failures within the admin. Here admin, will have access to only "Home", "Authentication" and "Tenants" Dashboards. </p>
       <p><b>Fabric admin</b>: Enables Fabric Admin to analyze physical network related issues. It gives visibility into fabric components of networks e.g. leaf, spine and its physical components like chassis, ports, fan tray, line card etc. </p>
       <p><b>Tenant user</b>: Enables Tenant User to manage a specific tenant and all of its components like application, EPGs and VMs. To create a Tenant user for tenant "ABC", follow the steps given below.<br> 1).  Create a role with name "tenant_ABC". In search criteria put "dn=uni/tn-ABC/*". <br> 2).  Create a new user with name user-ABC and apply a role of "tenant_ABC" to this user. <br> 3). Edit the permission of Tenant Dashboard to provide read access to user with role "tenant_ABC". </p>
       <p><b>vmware admin</b>: This app has been integrated with Splunk App for VMware to get the VM details of your datacenter as a client end point of APIC. A separate dashboard is provided which can be accessed by splunk_vmware_admin and splunk_vmware_user. Both of this role are configured with the Splunk App for VMware. You can get VMware app at <a href=" https://apps.splunk.com/app/725/">VMWare App</a>  and its documentation at <a href="  https://docs.splunk.com/Documentation/VMW/3.0.1/Install/SplunkforVMwareArchitecture">Splunk For VMWare Documentation</a></p>
    </p>
<html>

 <h1>

        

         <form class="submit" method="get" action="/app/cisco-app-ACI/home_page">

   <button id="myButton" class="btn btn-primary submit float-right submit-button" >Go to Home</button>

</form>

       </h1>

</html>
        <div id="extra-list" class="toolkit-item-list clearfix">
            <!-- Examples pages here -->
        </div>
        <div id="extra-end"></div>
    </div>

</div>


<!-- <div class="footer"></div> -->
<script src="{{SPLUNKWEB_URL_PREFIX}}/config?autoload=1"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/js/contrib/require.js"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/js/i18n.js"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/i18ncatalog?autoload=1"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/js/profiles/shared.js"></script>
<script type="text/javascript">
require.config({
    baseUrl: "{{SPLUNKWEB_URL_PREFIX}}/static/js"
});
</script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/app/cisco-app-ACI/examples_common.js"></script>
<script src="{{SPLUNKWEB_URL_PREFIX}}/static/app/cisco-app-ACI/home/home.js"></script>
</body>
</html>

