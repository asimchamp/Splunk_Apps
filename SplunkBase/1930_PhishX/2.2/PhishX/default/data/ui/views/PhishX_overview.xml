<form script="tokenlinks.js" hideSplunkBar="true" hideFooter="true" hideEdit="false" stylesheet="dark.css">
  <label>PhishX</label>
  <fieldset submitButton="false" autoRun="true">
    <input type="dropdown" token="PANELS" searchWhenChanged="true" depends="$null$">
      <choice value="*">All</choice>
      <default>*</default>
      <change>
        <condition value="*">
          <set token="phishing">true</set>          
          <set token="people">true</set>
          <set token="groups">true</set>
          <set token="monthly">true</set>
          <set token="behavior">true</set> 
          <set token="projection">true</set>          
        </condition>
      </change>
    </input>    
    <input type="multiselect" token="CUSTOMER" searchWhenChanged="true">
      <search id="fieldset_customer">
        <query>
          <![CDATA[| inputlookup PhishX | table Customer |  dedup Customer]]>
        </query>
      </search>
      <choice value="*">All</choice>
      <default>*</default>
      <fieldForLabel>Customer</fieldForLabel>
      <fieldForValue>Customer</fieldForValue>
      <valuePrefix>Customer="</valuePrefix>
      <valueSuffix>"</valueSuffix>
      <prefix>(</prefix>
      <suffix>)</suffix>
      <delimiter> OR </delimiter>
    </input>
    <input type="dropdown" token="DATE" searchWhenChanged="true">
      <choice value="*">All</choice>
      <default>*</default>      
      <search id="fieldset_date">
        <query>
          <![CDATA[| inputlookup PhishX | search $CUSTOMER$ | stats min(Sent_Date) AS Date by Campaign | convert timeformat="%Y%m" ctime(Date) | dedup Date | fields Date | sort - Date]]>
        </query>
      </search>
      <fieldForLabel>Date</fieldForLabel>
      <fieldForValue>Date</fieldForValue>
    </input>
    <input type="multiselect" token="CAMPAIGN" searchWhenChanged="true">
      <choice value="*">All</choice>
      <search id="fieldset_campaign">
        <query>
          <![CDATA[| inputlookup PhishX | search $CUSTOMER$ | convert timeformat="%Y%m" ctime(Sent_Date) AS Date | search Date>=$DATE$ | table Campaign |  dedup Campaign]]>
        </query>
      </search>
      <fieldForLabel>Campaign</fieldForLabel>
      <fieldForValue>Campaign</fieldForValue>
      <default>*</default>
      <valuePrefix>Campaign="</valuePrefix>
      <valueSuffix>"</valueSuffix>
      <prefix>(</prefix>
      <suffix>)</suffix>
      <delimiter> OR </delimiter>
    </input>
    <input type="multiselect" token="DEPARTMENT" searchWhenChanged="true">
      <search id="fieldset_department">
        <query>
          <![CDATA[| inputlookup PhishX | search $CUSTOMER$ $CAMPAIGN$ | convert timeformat="%Y%m" ctime(Sent_Date) AS Date | search Date>=$DATE$ | table Department |  dedup Department]]>
        </query>
      </search>
      <fieldForLabel>Department</fieldForLabel>
      <fieldForValue>Department</fieldForValue>
      <valuePrefix>Department="</valuePrefix>
      <valueSuffix>"</valueSuffix>
      <prefix>(</prefix>
      <suffix>)</suffix>      
      <delimiter> OR </delimiter>
      <choice value="*">All</choice>
      <default>*</default>
    </input>
    <input type="multiselect" token="PEOPLE" searchWhenChanged="true">
      <choice value="*">All</choice>
      <search id="fieldset_people">
        <query>
          <![CDATA[| inputlookup PhishX | search $CUSTOMER$ $CAMPAIGN$ $DEPARTMENT$ | convert timeformat="%Y%m" ctime(Sent_Date) AS Date | search Date>=$DATE$ | table Email |  dedup Email]]>
        </query>
      </search>
      <fieldForLabel>Email</fieldForLabel>
      <fieldForValue>Email</fieldForValue>
      <default>*</default>
      <valuePrefix>Email="</valuePrefix>
      <valueSuffix>"</valueSuffix>
      <prefix>(</prefix>
      <suffix>)</suffix>
      <delimiter> OR </delimiter>
    </input>
  </fieldset>
  <search id="base1">
    <query><![CDATA[| inputlookup PhishX | search $CUSTOMER$ $CAMPAIGN$ $DEPARTMENT$ $PEOPLE$ | convert timeformat="%Y%m" ctime(Sent_Date) AS Date | search Date>=$DATE$]]></query>
  </search>
  <row id="panels_html">
    <panel>
      <html> 
      <b>PANELS</b>
      <button class='btn-pill' data-token-json='{"phishing":"show","people":null,"history":null,"behavior":null,"projection":null,"groups":null,"monthly":null}'>Phishing</button>
	  <button class='btn-pill' data-token-json='{"phishing":null,"people":"show","history":null,"behavior":null,"projection":null,"groups":null,"monthly":null}'>People</button>  
	  <button class='btn-pill' data-token-json='{"phishing":null,"people":null,"history":null,"behavior":null,"projection":null,"groups":null,"monthly":"show"}'>Monthly</button> 
      <button class='btn-pill' data-token-json='{"phishing":null,"people":null,"history":null,"behavior":null,"projection":null,"groups":"show","monthly":null}'>Groups</button>
	  <button class='btn-pill' data-token-json='{"phishing":null,"people":null,"history":null,"behavior":"show","projection":null,"groups":null,"monthly":null}'>Behavior</button> 
      <button class='btn-pill' data-token-json='{"phishing":null,"people":null,"history":null,"behavior":null,"projection":"show","groups":null,"monthly":null}'>Projection</button>
      <button class='btn-pill' data-token-json='{"phishing":null,"people":null,"history":"show","behavior":null,"projection":null,"groups":null,"monthly":null}'>History</button>
      <button class='btn-pill' data-token-json='{"phishing":"show","people":"show","history":"show","behavior":"show","projection":"show","groups":"show","monthly":"show"}'>All</button>        
      <button class='btn-pill' data-token-json='{"phishing":null,"people":null,"history":null,"behavior":null,"projection":null,"groups":null,"monthly":null}'>None</button>
      </html>
    </panel>
  </row>
  <row id="phishing_single" depends="$phishing$">
    <panel>
      <title>Phishing</title>
      <single>
        <title>Total</title>
        <search id="phishing_total_single" base="base1">
          <query><![CDATA[| stats count AS #]]></query>
        </search>
      </single>
      <single>
        <title>Opened</title>
        <search id="phishing_opened_single" base="base1">
          <query><![CDATA[| eval Opened=if(Clicked > 0, 1 , Opened) | stats sum(Opened) AS #]]></query>
        </search>
      </single>
      <single>
        <title>Clicked</title>
        <search id="phishing_clicked_single" base="base1">
          <query>
            <![CDATA[| stats sum(Clicked) AS #]]>
          </query>
        </search>
      </single>
      <single>
        <title>Trained</title>
        <search id="phishing_trained_single" base="base1">
          <query>
            <![CDATA[| stats sum(Trained) AS #]]>
          </query>
        </search>
      </single>
    </panel>
  </row>
  <row id="phishing_pie" depends="$phishing$">
    <chart>
      <title>Opened</title>
      <search id="phishing_opened_pie" base="base1">
        <query>
          <![CDATA[| eval Opened=if(Clicked > 0, 1 , Opened) | stats sum(Opened) AS YES count AS Total | eval NO=Total-YES | eval "%"=YES/Total | fields YES NO | transpose | rename column AS OPTION "row 1" AS #]]>
        </query>
      </search>
      <option name="charting.chart">pie</option>
      <option name="charting.fieldColors">{"NO":0x999999,"YES":0x5378AD}</option>
      <option name="charting.drilldown">none</option>
    </chart>
    <chart>
      <title>Clicked</title>
      <search id="phishing_clicked_pie" base="base1">
        <query>
          <![CDATA[| stats sum(Clicked) AS YES count AS Total | eval NO=Total-YES | eval "%"=YES/Total | fields YES NO | transpose | rename column AS OPTION "row 1" AS #]]>
        </query>
      </search>
      <option name="charting.chart">pie</option>
      <option name="charting.fieldColors">{"NO":0x999999,"YES":0xD25B3B}</option>
      <option name="charting.drilldown">none</option>
    </chart>
    <chart>
      <title>Trained</title>
      <search id="phishing_trained_pie" base="base1">
        <query>
          <![CDATA[| stats sum(Trained) AS YES count AS Total | eval NO=Total-YES | eval "%"=YES/Total | fields YES NO | transpose | rename column AS OPTION "row 1" AS #]]>
        </query>
      </search>
      <option name="charting.chart">pie</option>
      <option name="charting.fieldColors">{"NO":0x999999,"YES":0x98BF3B}</option>
      <option name="charting.drilldown">none</option>
    </chart>
  </row>
  <row id="phishing_campaign_groups" depends="$groups$">
    <chart>
      <title>Campaign - Phishing</title>
      <search id="phishing_campaign" base="base1">
        <query>
          <![CDATA[| eval Opened=if(Clicked > 0, 1 , Opened) | stats sum(Opened) AS Opened sum(Clicked) AS Clicked sum(Trained) AS Trained min(Sent_Date) AS _time count AS Total by Campaign | eval Month=strftime(_time,"%Y-%m") | fields - _time | eval Opened=(Opened / Total) | eval Clicked=(Clicked / Total) | eval Trained=(Trained / Total)| sort Month Campaign Date | fields - Month Total]]>
        </query>
      </search>
      <option name="charting.fieldColors">{"Total":0x999999,"Opened":0x5378AD,"Clicked":0xD25B3B,"Trained":0x98BF3B}</option>
      <option name="charting.chart">column</option>
      <option name="charting.drilldown">none</option>
      <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
      <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
      <option name="charting.axisLabelsY.majorUnit">0.2</option>
      <option name="charting.axisTitleX.visibility">collapsed</option>
      <option name="charting.axisTitleY.visibility">collapsed</option>
      <option name="charting.axisTitleY2.visibility">visible</option>
      <option name="charting.axisX.scale">linear</option>
      <option name="charting.axisY.maximumNumber">1.0</option>
      <option name="charting.axisY.minimumNumber">0.0</option>
      <option name="charting.axisY.scale">linear</option>
      <option name="charting.axisY2.enabled">false</option>
      <option name="charting.axisY2.scale">inherit</option>
      <option name="charting.chart.bubbleMaximumSize">50</option>
      <option name="charting.chart.bubbleMinimumSize">10</option>
      <option name="charting.chart.bubbleSizeBy">area</option>
      <option name="charting.chart.nullValueMode">gaps</option>
      <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.chart.style">shiny</option>
      <option name="charting.layout.splitSeries">0</option>
      <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
      <option name="charting.legend.placement">top</option>
    </chart>
  </row>
  <row id="phishing_department_groups" depends="$groups$">	
    <chart>
      <title>Department - Phishing</title>
      <search id="phishing_department" base="base1">
        <query>
          <![CDATA[| eval Opened=if(Clicked > 0, 1 , Opened) | stats sum(Opened) AS Opened sum(Clicked) AS Clicked sum(Trained) AS Trained min(Sent_Date) AS _time count AS Total by Department | eval Month=strftime(_time,"%Y-%m") | fields - _time | eval Opened=(Opened / Total) | eval Clicked=(Clicked / Total) | eval Trained=(Trained / Total) | fields - Month Total | sort 0 Department]]>
        </query>
      </search>
      <option name="charting.fieldColors">{"Total":0x999999,"Opened":0x5378AD,"Clicked":0xD25B3B,"Trained":0x98BF3B}</option>
      <option name="charting.chart">column</option>
      <option name="charting.drilldown">none</option>
      <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
      <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
      <option name="charting.axisLabelsY.majorUnit">0.2</option>
      <option name="charting.axisTitleX.visibility">collapsed</option>
      <option name="charting.axisTitleY.visibility">collapsed</option>
      <option name="charting.axisTitleY2.visibility">visible</option>
      <option name="charting.axisX.scale">linear</option>
      <option name="charting.axisY.maximumNumber">1.0</option>
      <option name="charting.axisY.minimumNumber">0.0</option>
      <option name="charting.axisY.scale">linear</option>
      <option name="charting.axisY2.enabled">false</option>
      <option name="charting.axisY2.scale">inherit</option>
      <option name="charting.chart.bubbleMaximumSize">50</option>
      <option name="charting.chart.bubbleMinimumSize">10</option>
      <option name="charting.chart.bubbleSizeBy">area</option>
      <option name="charting.chart.nullValueMode">gaps</option>
      <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.chart.style">shiny</option>
      <option name="charting.layout.splitSeries">0</option>
      <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
      <option name="charting.legend.placement">top</option>
    </chart>
  </row>
  <row id="phishing_monthly_groups" depends="$monthly$">
    <chart>
      <title>Monthly - Phishing</title>
      <search id="phishing_monthly" base="base1">
        <query>
          <![CDATA[| eval Opened=if(Clicked > 0, 1 , Opened) | stats sum(Opened) AS Opened sum(Clicked) AS Clicked sum(Trained) AS Trained min(Sent_Date) AS _time count AS Total by Campaign | timechart useother=f usenull=f cont=f span=1mon sum(Total) AS Total sum(Opened) AS Opened sum(Clicked) AS Clicked sum(Trained) AS Trained | eval _time=strftime(_time,"%Y-%m") | rename _time AS Month]]>
        </query>
      </search>
      <option name="charting.fieldColors">{"Total":0x999999,"Opened":0x5378AD,"Clicked":0xD25B3B,"Trained":0x98BF3B}</option>
      <option name="charting.chart">column</option>
      <option name="charting.drilldown">none</option>
      <option name="charting.legend.placement">top</option>
      <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
      <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
      <option name="charting.axisTitleX.visibility">collapsed</option>
      <option name="charting.axisTitleY.visibility">collapsed</option>
      <option name="charting.axisTitleY2.visibility">visible</option>
      <option name="charting.axisX.scale">linear</option>
      <option name="charting.axisY.scale">linear</option>
      <option name="charting.axisY2.enabled">false</option>
      <option name="charting.axisY2.scale">inherit</option>
      <option name="charting.chart.bubbleMaximumSize">50</option>
      <option name="charting.chart.bubbleMinimumSize">10</option>
      <option name="charting.chart.bubbleSizeBy">area</option>
      <option name="charting.chart.nullValueMode">gaps</option>
      <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.chart.style">shiny</option>
      <option name="charting.layout.splitSeries">0</option>
      <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
    </chart>
  </row>  
  <row id="people_single" depends="$people$">
    <panel>
      <title>People</title>
      <single>
        <title>Total</title>
        <search id="people_total_single" base="base1">
          <query>
            <![CDATA[| stats dc(Email) AS #]]>
          </query>
        </search>
      </single>
      <single>
        <title>Opened</title>
        <search id="people_opened_single" base="base1">
          <query>
            <![CDATA[| eval Opened=if(Clicked > 0, 1 , Opened) | stats sum(Opened) AS T by Email | eval T=if(T > 0, 1 ,0) | stats sum(T) AS #]]>
          </query>
        </search>
      </single>
      <single>
        <title>Clicked</title>
        <search id="people_clicked_single" base="base1">
          <query>
            <![CDATA[| stats sum(Clicked) AS T by Email | eval T=if(T > 0, 1 ,0) | stats sum(T) AS #]]>
          </query>
        </search>
      </single>
      <single>
        <title>Trained</title>
        <search id="people_trained_single" base="base1">
          <query>
            <![CDATA[| stats sum(Trained) AS T by Email | eval T=if(T > 0, 1 ,0) | stats sum(T) AS #]]>
          </query>
        </search>
      </single>
    </panel>
  </row>
  <row id="people_pie" depends="$people$">
    <chart>
      <title>Opened</title>
      <search id="people_opened_pie" base="base1">
        <query>
          <![CDATA[| eval Opened=if(Clicked > 0, 1 , Opened) | stats sum(Opened) AS T by Email | eval T=if(T > 0, 1 ,0) | stats sum(T) AS YES count AS Total | eval NO=Total-YES | eval "%"=YES/Total | fields YES NO | transpose | rename column AS OPTION "row 1" AS #]]>
        </query>
      </search>
      <option name="charting.chart">pie</option>
      <option name="charting.fieldColors">{"NO":0x999999,"YES":0x5378AD}</option>
      <option name="charting.drilldown">none</option>
    </chart>
    <chart>
      <title>Clicked</title>
      <search id="people_clicked_pie" base="base1">
        <query>
          <![CDATA[| stats sum(Clicked) AS T by Email | eval T=if(T > 0, 1 ,0) | stats sum(T) AS YES count AS Total | eval NO=Total-YES | eval "%"=YES/Total | fields YES NO | transpose | rename column AS OPTION "row 1" AS #]]>
        </query>
      </search>
      <option name="charting.chart">pie</option>
      <option name="charting.fieldColors">{"NO":0x999999,"YES":0xD25B3B}</option>
      <option name="charting.drilldown">none</option>
    </chart>
    <chart>
      <title>Trained</title>
      <search id="people_trained_pie" base="base1">
        <query>
          <![CDATA[| stats sum(Trained) AS T by Email | eval T=if(T > 0, 1 ,0) | stats sum(T) AS YES count AS Total | eval NO=Total-YES | eval "%"=YES/Total | fields YES NO | transpose | rename column AS OPTION "row 1" AS #]]>
        </query>
      </search>
      <option name="charting.chart">pie</option>
      <option name="charting.fieldColors">{"NO":0x999999,"YES":0x98BF3B}</option>
      <option name="charting.drilldown">none</option>
    </chart>
  </row>  
  <row id="people_campaign_groups" depends="$groups$">
    <chart>
      <title>Campaign - People</title>
      <search id="people_campaign" base="base1">
        <query>
          <![CDATA[| eval Opened=if(Clicked > 0, 1 , Opened) | stats sum(Opened) AS Opened sum(Clicked) AS Clicked sum(Trained) AS Trained min(Sent_Date) AS _time count AS Total by Email Campaign | eval Month=strftime(_time,"%Y-%m") | fields - _time | stats sum(Opened) AS Opened sum(Clicked) AS Clicked sum(Trained) AS Trained by Email Campaign Month | eval Opened=if(Opened > 0, 1 ,0) | eval Clicked=if(Clicked > 0, 1 ,0) | eval Trained=if(Trained > 0, 1 ,0) | stats count AS Total sum(Opened) AS Opened sum(Clicked) AS Clicked sum(Trained) AS Trained by Campaign Month | eval Opened=(Opened / Total) | eval Clicked=(Clicked / Total) | eval Trained=(Trained / Total)| sort Month Campaign | fields - Total Month]]>
        </query>
      </search>
      <option name="charting.fieldColors">{"Total":0x999999,"Opened":0x5378AD,"Clicked":0xD25B3B,"Trained":0x98BF3B}</option>
      <option name="charting.chart">column</option>
      <option name="charting.drilldown">none</option>
      <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
      <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
      <option name="charting.axisLabelsY.majorUnit">0.2</option>
      <option name="charting.axisTitleX.visibility">collapsed</option>
      <option name="charting.axisTitleY.visibility">collapsed</option>
      <option name="charting.axisTitleY2.visibility">visible</option>
      <option name="charting.axisX.scale">linear</option>
      <option name="charting.axisY.maximumNumber">1.0</option>
      <option name="charting.axisY.minimumNumber">0.0</option>
      <option name="charting.axisY.scale">linear</option>
      <option name="charting.axisY2.enabled">false</option>
      <option name="charting.axisY2.scale">inherit</option>
      <option name="charting.chart.bubbleMaximumSize">50</option>
      <option name="charting.chart.bubbleMinimumSize">10</option>
      <option name="charting.chart.bubbleSizeBy">area</option>
      <option name="charting.chart.nullValueMode">gaps</option>
      <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.chart.style">shiny</option>
      <option name="charting.layout.splitSeries">0</option>
      <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
      <option name="charting.legend.placement">top</option>
    </chart>
  </row>	
  <row id="people_department_groups" depends="$groups$">
    <chart>
      <title>Department - People</title>
      <search id="people_department" base="base1">
        <query>
          <![CDATA[| eval Opened=if(Clicked > 0, 1 , Opened) | stats sum(Opened) AS Opened sum(Clicked) AS Clicked sum(Trained) AS Trained min(Sent_Date) AS _time count AS Total by Email Department | eval Month=strftime(_time,"%Y-%m") | fields - _time | stats sum(Opened) AS Opened sum(Clicked) AS Clicked sum(Trained) AS Trained by Email Department Month | eval Opened=if(Opened > 0, 1 ,0) | eval Clicked=if(Clicked > 0, 1 ,0) | eval Trained=if(Trained > 0, 1 ,0) | stats count AS Total sum(Opened) AS Opened sum(Clicked) AS Clicked sum(Trained) AS Trained by Department | eval Opened=(Opened / Total) | eval Clicked=(Clicked / Total) | eval Trained=(Trained / Total)| sort Department | fields - Total]]>
        </query>
      </search>
      <option name="charting.fieldColors">{"Total":0x999999,"Opened":0x5378AD,"Clicked":0xD25B3B,"Trained":0x98BF3B}</option>
      <option name="charting.chart">column</option>
      <option name="charting.drilldown">none</option>
      <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
      <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
      <option name="charting.axisLabelsY.majorUnit">0.2</option>
      <option name="charting.axisTitleX.visibility">collapsed</option>
      <option name="charting.axisTitleY.visibility">collapsed</option>
      <option name="charting.axisTitleY2.visibility">visible</option>
      <option name="charting.axisX.scale">linear</option>
      <option name="charting.axisY.maximumNumber">1.0</option>
      <option name="charting.axisY.minimumNumber">0.0</option>
      <option name="charting.axisY.scale">linear</option>
      <option name="charting.axisY2.enabled">false</option>
      <option name="charting.axisY2.scale">inherit</option>
      <option name="charting.chart.bubbleMaximumSize">50</option>
      <option name="charting.chart.bubbleMinimumSize">10</option>
      <option name="charting.chart.bubbleSizeBy">area</option>
      <option name="charting.chart.nullValueMode">gaps</option>
      <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.chart.style">shiny</option>
      <option name="charting.layout.splitSeries">0</option>
      <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
      <option name="charting.legend.placement">top</option>
    </chart>
  </row>
  <row id="people_monthly_groups" depends="$monthly$">	
    <chart>
      <title>Monthly - People</title>
      <search id="people_monthly" base="base1">
        <query>
          <![CDATA[|  eval Opened=if(Clicked > 0, 1 , Opened) | stats sum(Opened) AS Opened sum(Clicked) AS Clicked sum(Trained) AS Trained min(Sent_Date) AS _time count AS Total by Email Campaign | eval Month=strftime(_time,"%Y-%m") | fields - _time | stats sum(Opened) AS Opened sum(Clicked) AS Clicked sum(Trained) AS Trained by Email Month | eval Opened=if(Opened > 0, 1 ,0) | eval Clicked=if(Clicked > 0, 1 ,0) | eval Trained=if(Trained > 0, 1 ,0) | stats count AS Total sum(Opened) AS Opened sum(Clicked) AS Clicked sum(Trained) AS Trained by Month]]>
        </query>
      </search>
      <option name="charting.fieldColors">{"Total":0x999999,"Opened":0x5378AD,"Clicked":0xD25B3B,"Trained":0x98BF3B}</option>
      <option name="charting.chart">column</option>
      <option name="charting.drilldown">none</option>
      <option name="charting.legend.placement">top</option>
      <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
      <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
      <option name="charting.axisTitleX.visibility">collapsed</option>
      <option name="charting.axisTitleY.visibility">collapsed</option>
      <option name="charting.axisTitleY2.visibility">visible</option>
      <option name="charting.axisX.scale">linear</option>
      <option name="charting.axisY.scale">linear</option>
      <option name="charting.axisY2.enabled">false</option>
      <option name="charting.axisY2.scale">inherit</option>
      <option name="charting.chart.bubbleMaximumSize">50</option>
      <option name="charting.chart.bubbleMinimumSize">10</option>
      <option name="charting.chart.bubbleSizeBy">area</option>
      <option name="charting.chart.nullValueMode">gaps</option>
      <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
      <option name="charting.chart.stackMode">default</option>
      <option name="charting.chart.style">shiny</option>
      <option name="charting.layout.splitSeries">0</option>
      <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
    </chart>
  </row>
  <row id="behavior_single" depends="$behavior$">
    <panel>
      <input type="dropdown" token="MATH" searchWhenChanged="true">
        <label>Statistics</label>
        <choice value="MIN">Minimum</choice>
        <choice value="MAX">Maximum</choice>
        <choice value="AVG">Average</choice>        
        <default>MIN</default>
      </input>        
      <title>Time</title>
      <single>
        <title>Read</title>
        <search id="behavior_read_single" base="base1">
          <query>
            <![CDATA[| eval Opened_Date=if(Opened_Date > 0, Opened_Date, Clicked_Date) | eval A=if((Opened_Date >= Sent_Date),1,0) | search A=1 | stats $MATH$(Sent_Opened) AS Time]]>
          </query>
        </search>
        <option name="underLabel">seconds</option>
        <option name="linkView">search</option>
        <option name="drilldown">none</option>
      </single>
      <single>
        <title>Click</title>
        <search id="behavior_click_single" base="base1">
          <query>
            <![CDATA[| inputlookup PhishX | eval Opened_Date=if(Opened_Date > 0, Opened_Date, Clicked_Date) | eval A=if((Clicked_Date >= Opened_Date),1,0) | search A=1 | stats $MATH$(Opened_Clicked) AS Time]]>
          </query>
        </search>
        <option name="underLabel">seconds</option>
        <option name="linkView">search</option>
        <option name="drilldown">none</option>
      </single>
      <single>
        <title>Training</title>
        <search id="behavior_train_single" base="base1">
          <query>
            <![CDATA[| inputlookup PhishX | eval Opened_Date=if(Opened_Date > 0, Opened_Date, Clicked_Date) | eval A=if((Trained_Date >= Clicked_Date),1,0) | search A=1 | stats $MATH$(Clicked_Trained) AS Time]]>
          </query>
        </search>
        <option name="linkView">search</option>
        <option name="drilldown">none</option>
        <option name="underLabel">seconds</option>
      </single>
    </panel>
  </row>
  <row id="projection" depends="$projection$">
    <chart>
      <title>Projection</title>
      <search id="projection_tendency" base="base1">
        <query>
          <![CDATA[| eval Opened=if(Clicked > 0, 1 , Opened) | stats sum(Opened) AS Opened sum(Clicked) AS Clicked sum(Trained) AS Trained by Email | eval Opened=if(Opened > 0, 1 ,0) | eval Clicked=if(Clicked > 0, 1 ,0) | eval Trained=if(Trained > 0, 1 ,0) | stats sum(Opened) AS Opened sum(Clicked) AS Clicked sum(Trained) AS Trained count AS Total | eval Opened=(Opened / Total) | eval Clicked=(Clicked / Total) | eval Trained=(Trained / Total) | fields - Total | transpose | rename column AS KPI "row 1" AS R | eval 500=(500 * R) | eval 1000=(1000 * R) | eval 2000=(2000 * R) | eval 3000=(3000 * R) | eval 4000=(4000 * R) | eval 5000=(5000 * R) |fields 500 1000 2000 3000 4000 5000 | transpose | rename column AS People "row 1" AS Opened "row 2" AS Clicked "row 3" AS Trained]]>
        </query>
      </search>
      <option name="charting.fieldColors">{"Total":0x999999,"Opened":0x5378AD,"Clicked":0xD25B3B,"Trained":0x98BF3B}</option>
      <option name="charting.chart">column</option>
      <option name="charting.drilldown">none</option>
    </chart>
  </row>
  <row id="history_table" depends="$history$">
    <table>
      <title>History</title>
      <search id="history_all_table" base="base1">
        <query>
          <![CDATA[| convert ctime(MaxDate) ctime(Reg_Date) ctime(Sent_Date) ctime(Opened_Date) ctime(Clicked_Date) ctime(Trained_Date) | table MaxDate Customer Campaign Email First_Name Last_Name Department Sent Opened Clicked Trained Reg_Date Sent_Date Opened_Date Clicked_Date Trained_Date Reg_Sent Sent_Opened Opened_Clicked Clicked_Trained | sort 0 - MaxDate]]>
        </query>
      </search>
    </table>
  </row>
</form>