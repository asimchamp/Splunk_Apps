<dashboard>
  <label>Limits and Path Monitoring Messages</label>
  <description/>
  <row>
    <html>
      <p>Sparklines are used in these dashboards to give you an idea if/when a change pushed within the last 24hrs has taken effect. Both the file descriptor and throughput panels are powered by saved searches allowing them to easily be turned into email alerts (i.e. once a day, once a week). Sparklines aren't pretty in inline emails but are readable.</p>
      <h4>File Descriptor Limit</h4>
      <p>By default Splunk will keep open 100 file descriptors which is generally sufficient for most systems. On systems where there are large numbers of files in directories Splunk is monitoring this limit may not be sufficient. While adjusting the limit.conf is easy enough care should be taken not to simply keep increasing the limit indefinitely without taking into account system resources and use.</p>
      <p>[inputproc]<br />max_fd = integer</p>
      <h4>Throughput Limit</h4>
      <p>The default throughput limit for a Splunk forwarder is 256 kbps. In some cases the volume of data a system is generating requires this limit to be raised in order to reduce latency between when the data is created and when it is searchable in Splunk. Some consideration should be taken related to the size of the pipes between the system and your indexers as you increase this limit. Splunk generates throughput logs every 5 mintues. For a system to show up on this dashboard it has to have more than 4 messages in 24 hrs.</p>
      <p>[thruput]<br />maxKBps = integer</p>
    </html>
  </row>
  <row>
    <table>
      <title>File Descriptor Limits Hit</title>
      <searchName>File Descriptor Limit Hits</searchName>
      <option name="wrap">true</option>
      <option name="rowNumbers">false</option>
      <option name="dataOverlayMode">none</option>
      <option name="drilldown">cell</option>
    </table>
    <table>
      <title>Throughput Limit Hit</title>
      <searchName>Throughput Limit Hit</searchName>
      <option name="wrap">true</option>
      <option name="rowNumbers">false</option>
      <option name="dataOverlayMode">none</option>
      <option name="drilldown">cell</option>
    </table>
  </row>
  <row>
    <table>
      <title>Files Ignored in Monitor Path</title>
      <searchString>index=_internal "ignoring file" | rex "Ignoring file '(?&lt;file_path&gt;\S[^']+)' due to: (?&lt;reason&gt;.+)" | stats values(reason) AS Reasons sparkline as Trend dc(file_path) AS Unique_Paths count as Count by host | sort -Unique_Paths,-count</searchString>
      <earliestTime>-24h@h</earliestTime>
      <latestTime>now</latestTime>
      <option name="wrap">true</option>
      <option name="rowNumbers">false</option>
      <option name="dataOverlayMode">none</option>
      <option name="drilldown">cell</option>
    </table>
    <table>
      <title>Permissions Issue on Monitor Path</title>
      <searchString>index=_internal "permission denied" | stats count as  Count sparkline as Trend by host | sort -Count</searchString>
      <earliestTime>-24h@h</earliestTime>
      <latestTime>now</latestTime>
      <option name="wrap">true</option>
      <option name="rowNumbers">false</option>
      <option name="dataOverlayMode">none</option>
      <option name="drilldown">row</option>
      <option name="count">10</option>
    </table>
  </row>
</dashboard>
