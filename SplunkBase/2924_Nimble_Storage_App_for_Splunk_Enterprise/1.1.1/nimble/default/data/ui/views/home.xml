<form>
  <label>Arrays</label>
  <row>
    <panel>
      <input type="dropdown" token="array" searchWhenChanged="true">
        <label>Select Storage Array</label>
        <search>
          <query>sourcetype=nimble_snmp earliest=-1h | eval array=host | dedup array | table array</query>
        </search>
        <fieldForLabel>array</fieldForLabel>
        <fieldForValue>array</fieldForValue>
      </input>
      <html>
       <div style="text-align: center;">
         <h3>Array Performance Summary: $array$</h3>
       </div>
      </html>
    </panel>
  </row>
  <row>
    <panel>
      <chart>
        <search>
          <query>sourcetype=nimble_snmp AND source="snmp:global" AND host=$array$ earliest=-8h@h | delta 2 as reads | delta 4 as writes | delta 6 as readLatency | delta 7 as writeLatency | eval readLatency=round((abs(readLatency)/abs(reads)/1000), 1) | eval writeLatency=round((abs(writeLatency)/abs(writes)/1000), 1) | table _time, readLatency, writeLatency</query>
          <earliest>-8h@h</earliest>
          <latest>now</latest>
        </search>
        <option name="height">120</option>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.text">Array Latency msec (8 Hours)</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">collapsed</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">line</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">none</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <chart>
        <search>
          <query>sourcetype=nimble_snmp AND source="snmp:global" AND host=$array$ earliest=-8h@h | delta 2 as reads | delta 4 as writes |  delta _time as timeDelta | eval readIops=round(abs(reads)/abs(timeDelta), 1) | eval writeIops=round(abs(writes)/abs(timeDelta), 1) | table _time, readIops, writeIops</query>
          <earliest>-8h@h</earliest>
          <latest>now</latest>
        </search>
        <option name="height">120</option>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">collapsed</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">line</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">none</option>
        <option name="charting.axisTitleX.text">Array IOPS (8 Hours)</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <chart>
        <search>
          <query>sourcetype=nimble_snmp AND source="snmp:global" AND host=$array$ earliest=-8h@h | spath 8 output=reads | spath 10 output=writes |  eval throughput=reads+writes | delta throughput as throughputDelta | delta _time as timeDelta | eval throughputMbps=round(((abs(throughputDelta)/1024/1024)/abs(timeDelta)), 1) |   table _time, throughputMbps</query>
          <earliest>-8h@h</earliest>
          <latest>now</latest>
        </search>
        <option name="height">120</option>
        <option name="charting.chart">line</option>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">collapsed</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">none</option>
        <option name="charting.axisTitleX.text">Array Throughput MBps (8 Hours)</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <html>
       <div style="text-align: center;">
         <h3>Array Capacity Summary: $array$</h3>
       </div>
      </html>
    </panel>
  </row>
  <row>
    <panel>
      <chart>
        <search>
          <query>host=$array$ sourcetype=nimble_rest source="nimble:rest:arrays_detail" earliest=-7d@d | eval usage=round(((vol_usage_bytes+snap_usage_bytes)/1024/1024/1024), 1) | timechart span=1h last(usage) | rename last(usage) as usage | predict usage future_timespan=16</query>
          <earliest>-7d@d</earliest>
          <latest>now</latest>
        </search>
        <option name="height">180</option>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">collapsed</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">line</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">none</option>
        <option name="charting.axisTitleX.text">Array Space Usage GB (7 days)</option>
      </chart>
    </panel>
  </row>
  <row>
    <panel>
      <chart>
        <search>
          <query>host=$array$ sourcetype=nimble_rest source="nimble:rest:arrays_detail" earliest=-7d@d | eval snap_compression=round(snap_compression, 1) | eval vol_compression=round(vol_compression, 1) | timechart span=1h avg(snap_compression) avg(vol_compression)</query>
          <earliest>-7d@d</earliest>
          <latest>now</latest>
        </search>
        <option name="height">180</option>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">visible</option>
        <option name="charting.axisTitleY.visibility">collapsed</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">line</option>
        <option name="charting.chart.bubbleMaximumSize">50</option>
        <option name="charting.chart.bubbleMinimumSize">10</option>
        <option name="charting.chart.bubbleSizeBy">area</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">all</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">none</option>
        <option name="charting.axisTitleX.text">Array Compression Ratio (7 days)</option>
      </chart>
    </panel>
  </row>
</form>