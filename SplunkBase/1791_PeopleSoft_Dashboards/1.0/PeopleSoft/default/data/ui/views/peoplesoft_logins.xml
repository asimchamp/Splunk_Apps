<view autoCancelInterval="90" isVisible="true" onunloadCancelJobs="true" template="dashboard.html">
	<label>PeopleSoft Logins Map</label>
	<module name="AccountBar" layoutPanel="appHeader"/>
	<module name="AppBar" layoutPanel="navigationHeader"/>
	<module name="Message" layoutPanel="messaging">
		<param name="filter">*</param>
		<param name="clearOnJobDispatch">False</param>
		<param name="maxSize">1</param>
	</module>
	<module name="Message" layoutPanel="messaging">
		<param name="filter">splunk.search.job</param>
		<param name="clearOnJobDispatch">True</param>
		<param name="maxSize">1</param>
	</module>

	<module name="StaticContentSample" layoutPanel="panel_row1_col1">
		<param name="text"><![CDATA[
			Map of PeopleSoft Logins
		]]></param>
	</module>

    <module name="TimeRangePicker" layoutPanel="panel_row1_col1">
        <param name="default">Last 24 hours</param>
        <param name="searchWhenChanged">true</param>
        <module name="HiddenSearch" layoutPanel="panel_row1_col1" autoRun="true" group="PeopleSoft Logins Map">
            <param name="search">`ps_app_index` `ps_prd_app_servers` sourcetype=psft_appsrv_appsrv "authentication succeeded" user="*" `extract_remote_host` | dnslookup forward remote_host ip `ps_local_ips` | rename ip as clientip |geoip clientip</param>
            <module name="GoogleMaps">
                <param name="height">400px</param>
                <param name="drilldown">true</param>
                <param name="drilldown_field">clientip</param>
                <param name="mapStyles">roadmap</param>
                <param name="mapType">roadmap</param>
                <param name="mapTypeControl">off</param>
                <param name="scrollwheel">off</param>

                                
              
              <module name="HiddenSearch" layoutPanel="panel_row2_col1" group="Drilldown to Web Logs by IP" autoRun="False">
                    <param name="search">`ps_app_index` `ps_prd_app_servers` sourcetype=psft_appsrv_appsrv "authentication succeeded" user="*" `extract_remote_host` | dnslookup forward remote_host ip `ps_local_ips` | rename ip as clientip |geoip clientip | search $clientip$</param>
                    <module name="ConvertToIntention">
                        <param name="settingToConvert">maps.drilldown</param>
                        <param name="intention">
                            <param name="name">stringreplace</param>
                            <param name="arg">
                                <param name="clientip">
                                    <param name="value">$target$</param>
                                </param>
                            </param>
                        </param>
                        <module name="JobProgressIndicator">
                        </module>
                        <module name="HiddenPostProcess">
                            <param name="search">stats count by user, clientip | localop | geoip clientip | rename clientip_country_code as code clientip_country_name as country clientip_city as city | table clientip user count country code city | sort -count</param>
                            <module name="SimpleResultsTable">
                                <param name="drilldown">row</param>
                                <param name="count">50</param>
                                <param name="entityName">results</param>
                                <module name="HiddenSearch">
                                    <param name="search">`ps_web_index` `ps_prd_web_servers` $clientip$</param>
<!--                                    <param name="search">`ps_app_index` `ps_prd_app_servers` sourcetype=psft_appsrv_appsrv "authentication succeeded" user="*" `extract_remote_host` | dnslookup forward remote_host ip | rename ip as clientip |geoip clientip | search clientip="$clientip$"</param>-->
                                    <module name="ConvertToIntention">
                                        <param name="settingToConvert">click.value</param>
                                        <param name="intention">
                                            <param name="name">stringreplace</param>
                                            <param name="arg">
                                                <param name="clientip">
                                                    <param name="value">$target$</param>
                                                </param>
                                            </param>
                                        </param>
                                        <module name="ViewRedirector">
                                            <param name="viewTarget">flashtimeline</param>
                                            <param name="popup">true</param>
                                        </module>
                                    </module>
                                </module>
                            </module>
                        </module>
                        <module name="ViewRedirectorLink">
                            <param name="label">View events...</param>
                            <param name="viewTarget">flashtimeline</param>
                        </module>
                    </module>
                </module>
                
              
              
                <module name="HiddenSearch" layoutPanel="panel_row2_col2" group="Drilldown to Application Server Logs User" autoRun="False">
                    <param name="search">`ps_app_index` `ps_prd_app_servers` sourcetype=psft_appsrv_appsrv "authentication succeeded" user="*" `extract_remote_host` | dnslookup forward remote_host ip `ps_local_ips` | rename ip as clientip |geoip clientip | search $clientip$</param>
                    <module name="ConvertToIntention">
                        <param name="settingToConvert">maps.drilldown</param>
                        <param name="intention">
                            <param name="name">stringreplace</param>
                            <param name="arg">
                                <param name="clientip">
                                    <param name="value">$target$</param>
                                </param>
                            </param>
                        </param>
                        <module name="JobProgressIndicator">
                        </module>
                        <module name="HiddenPostProcess">
                            <param name="search">stats count by user, clientip | localop | geoip clientip | rename clientip_country_code as code clientip_country_name as country clientip_city as city | table user clientip count | sort -count</param>
                            <module name="SimpleResultsTable">
                                <param name="drilldown">row</param>
                                <param name="count">50</param>
                                <param name="entityName">results</param>
                                <module name="HiddenSearch">
                                    <param name="search">( ( `ps_web_index` `ps_prd_web_servers` ) OR ( `ps_app_index` `ps_prd_app_servers` ) ) $user$ </param>
<!--                                    <param name="search">`ps_app_index` `ps_prd_app_servers` sourcetype=psft_appsrv_appsrv "authentication succeeded" user="*" `extract_remote_host` | dnslookup forward remote_host ip | rename ip as clientip |geoip clientip | search clientip="$clientip$"</param>-->
                                    <module name="ConvertToIntention">
                                        <param name="settingToConvert">click.value</param>
                                        <param name="intention">
                                            <param name="name">stringreplace</param>
                                            <param name="arg">
                                                <param name="user">
                                                    <param name="value">$target$</param>
                                                </param>
                                            </param>
                                        </param>
                                        <module name="ViewRedirector">
                                            <param name="viewTarget">flashtimeline</param>
                                            <param name="popup">true</param>
                                        </module>
                                    </module>
                                </module>
                            </module>
                        </module>
                        <module name="ViewRedirectorLink">
                            <param name="label">View events...</param>
                            <param name="viewTarget">flashtimeline</param>
                        </module>
                    </module>
                </module>
                
              
              <module name="HiddenSearch" layoutPanel="panel_row2_col3" group="Drilldown to Pages by IP" autoRun="False">
                    <param name="search">`ps_app_index` `ps_prd_app_servers` sourcetype=psft_appsrv_appsrv "authentication succeeded" user="*" `extract_remote_host` | dnslookup forward remote_host ip `ps_local_ips` | rename ip as clientip |geoip clientip | search $clientip$</param>
                    <module name="ConvertToIntention">
                        <param name="settingToConvert">maps.drilldown</param>
                        <param name="intention">
                            <param name="name">stringreplace</param>
                            <param name="arg">
                                <param name="clientip">
                                    <param name="value">$target$</param>
                                </param>
                            </param>
                        </param>
                        <module name="JobProgressIndicator">
                        </module>
                        <module name="HiddenPostProcess">
                            <param name="search">stats count by user, clientip | localop | geoip clientip | rename clientip_country_code as code clientip_country_name as country clientip_city as city | table clientip user count | sort -count</param>
                            <module name="SimpleResultsTable">
                                <param name="drilldown">row</param>
                                <param name="count">50</param>
                                <param name="entityName">results</param>
                                <module name="HiddenSearch">
                                    <param name="search">`ps_web_index` `ps_prd_web_servers` $clientip$ `extract_page_menu` | search page_name=* | dedup action menu_name page_name | table _time action menu_name page_name</param>
<!--                                    <param name="search">`ps_app_index` `ps_prd_app_servers` sourcetype=psft_appsrv_appsrv "authentication succeeded" user="*" `extract_remote_host` | dnslookup forward remote_host ip | rename ip as clientip |geoip clientip | search clientip="$clientip$"</param>-->
                                    <module name="ConvertToIntention">
                                        <param name="settingToConvert">click.value</param>
                                        <param name="intention">
                                            <param name="name">stringreplace</param>
                                            <param name="arg">
                                                <param name="clientip">
                                                    <param name="value">$target$</param>
                                                </param>
                                            </param>
                                        </param>
                                        <module name="ViewRedirector">
                                            <param name="viewTarget">flashtimeline</param>
                                            <param name="popup">true</param>
                                        </module>
                                    </module>
                                </module>
                            </module>
                        </module>
                        <module name="ViewRedirectorLink">
                            <param name="label">View events...</param>
                            <param name="viewTarget">flashtimeline</param>
                        </module>
                    </module>
                </module>
                                
              
              
              
              
            </module>
        </module>
    </module>

</view>