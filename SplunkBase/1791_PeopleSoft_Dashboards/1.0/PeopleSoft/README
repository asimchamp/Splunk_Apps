Splunk PeopleSoft app


***Installation:

Install Splunk and these Splunk app prereqs:

dnslookup
Google Maps
TA-peoplesoft_architecture
windows * if you have Windows PeopleSoft servers
Splunk_TA_nix * if you have Linux/UNIX PeopleSoft servers


Install the PeopleSoft app on the Splunk Server(s)


Install Technology Assistant apps appropriate to your environment included in the appserver/addons directory: 

TA-peoplesoft_linux_app
TA-peoplesoft_linux_oracle
TA-peoplesoft_linux_weblogic
TA-peoplesoft_windows_app
TA-peoplesoft_windows_psched


Install the Appropriate apps on the PeopleSoft servers.

Copy the default inputs.conf from default to local.  Fix the paths and enable the inputs in the local copy of inputs.conf.

Including either windows or Splunk_TA_nix, any TA apps that apply to the server's platform.  (Consider implementing deployment server.)

Notes about specific platforms:

I only made TA apps for platforms I use.  Hopefully you an adapt what is there to your platform.  If you do, let me know what you did and we can roll it into future releases.

Linux Application Server:

In TA-peoplesoft_linux_app/bin/psapp.sh edit your PS_HOME and PS_CFG_HOME.

You may need to add stanzas in inputs.conf if you have multiple application server domains installed. 

Linux Oracle server:

So far I'm only gathering the Listener and Database Statuses.  I intend to configure more Oracle logging in Spunk in the future.

Linux Weblogic Server:

NOTE: there is a Splunk Weblogic app and I'm not using it.

In TA-peoplesoft_linux_weblogic/bin/psweb.sh edit your PIA_HOME.

In the weblogic console enable the PIA_access.log and set the Log File Buffer to 0 (If you don't do this data won't roll to Splunk until the buffer fills.)
 
You may need to add stanzas in inputs.conf if you have multiple weblogic domains installed. 

Windows Application and Process Scheduler servers:

On your Windows PeopleSoft servers, enable the inputs in perfmon.conf, and change the index to windows, or change the windows_index search macro.

On Windows Application Servers and Process Scheduler servers I've had to run the SplunkForwarder service as the same domain user that runs the PeopleSoft services.

You may need to add stanzas in inputs.conf if you have multiple application server domains installed.  I've seen memory issues when I tried to replace the <instance> name with a wildcard.

Uses Gnu sed.

Same with Windows process schedulers:

You may need to add stanzas in inputs.conf if you have multiple process scheduler domains installed.  I've seen memory issues when I tried to replace the <instance> name with a wildcard.

Uses Gnu sed.


Configure search macros:

Configure the servers selection macros listed below to select the hosts that handle the function listed below.  For instance, if your production database servers are proddb1, proddb2, and proddb3, set ps_prd_db_servers to a search string that selects them such as:

	host=proddb1 OR host=proddb2 OR host=proddb3

ps_dev_app_servers
ps_dev_db_servers
ps_dev_web_servers
ps_prd_app_servers
ps_prd_db_servers
ps_prd_web_servers
ps_dev_psched_servers
ps_prd_psched_servers

If you are using different indexes than the defaults, edit these search macros:

linux_index
windows_index
ps_app_index
ps_db_index
ps_psched_index
ps_web_index


Configure the local IP lookup (optional):

If you want your private IP addresses to show up at your location on the maps, you can modify the peoplesoft.csv lookup, or add your own file and modify the ps_local_ips search macro.  If you leave it the default, all private IPs show up in Pleasanton, CA.

