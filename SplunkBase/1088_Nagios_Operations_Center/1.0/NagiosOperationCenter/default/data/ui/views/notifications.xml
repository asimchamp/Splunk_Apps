<?xml version='1.0' encoding='utf-8'?>
<view autoCancelInterval="90" isVisible="true" objectMode="SimpleDashboard" onunloadCancelJobs="true" refresh="-1" template="dashboard.html">
	<label>Notification Report</label>
	<module name="AccountBar" layoutPanel="appHeader"/>
	<module name="AppBar" layoutPanel="navigationHeader"/>
	<module name="Message" layoutPanel="messaging">
		<param name="filter">*</param>
		<param name="clearOnJobDispatch">False</param>
		<param name="maxSize">1</param>
	</module>
	<module name="Message" layoutPanel="messaging">
		<param name="filter">splunk.search.job</param>
		<param name="clearOnJobDispatch">True</param>
		<param name="maxSize">1</param>
	</module>
	<module name="TitleBar" layoutPanel="viewHeader">
		<param name="actionsMenuFilter">dashboard</param>
	</module>

	<module name="HiddenSearch" layoutPanel="panel_row1_col1" autoRun="True">
		<param name="search">
			<![CDATA[
			index="nagios_status" OR (index="nagios_action" NOTIFICATION) | rename service_name as service_description | transaction host_name,service_description | search NOTIFICATION | fields *
			]]>
		</param>
			<module name="ServerSideInclude">
				<param name="src">static_filter_basic.html</param>
			</module>


		<module name="TimeRangePicker" layoutPanel="panel_row1_col1">
			<param name="searchWhenChanged">True</param>
			<param name="selected">Last 15 minutes</param>

			<module name="SubmitButton">
				<param name="allowSoftSubmit">True</param>
				<param name="label">Search</param>
				<module name="HiddenPostProcess" layoutPanel="panel_row2_col1" group="Notifications by type" autoRun="True">
					<param name="search">eval State=if(current_state == 1,"WARNING",if(current_state == 2,"CRITICAL",if(current_state == 3,"UNKNOWN","OKAY"))) | stats count by State</param>
					<param name="groupLabel">Notifications by type</param>
					<module name="ViewstateAdapter">
						<param name="suppressionList">
							<item>drilldown</item>
						</param>
						<module name="HiddenFieldPicker">
							<param name="strictMode">True</param>
							<module name="JobProgressIndicator">
								<module name="EnablePreview">
									<param name="enable">True</param>
									<param name="display">False</param>
									<module name="HiddenChartFormatter">
										<param name="charting.chart">bar</param>
										<param name="charting.axisTitleX.text" />
										<param name="charting.legend.placement">none</param>
										<param name="charting.axisTitleY.text" />
										<module name="FlashChart">
											<param name="width">100%</param>
											<module name="ConvertToDrilldownSearch">
												<module name="ViewRedirector">
													<param name="viewTarget">flashtimeline</param>
												</module>
											</module>
										</module>
										<module name="ViewRedirectorLink">
											<param name="viewTarget">flashtimeline</param>
										</module>
									</module>
								</module>
							</module>
						</module>
					</module>
				</module>
				<module name="HiddenPostProcess" layoutPanel="panel_row2_col2" group="Top affected services" autoRun="True">
					<param name="search">top service_description | fields - percent</param>
					<param name="groupLabel">Top affected services</param>
					<module name="ViewstateAdapter">
						<param name="suppressionList">
							<item>drilldown</item>
						</param>
						<module name="HiddenFieldPicker">
							<param name="strictMode">True</param>
							<module name="JobProgressIndicator">
								<module name="EnablePreview">
									<param name="enable">True</param>
									<param name="display">False</param>
									<module name="HiddenChartFormatter">
										<param name="charting.chart">bar</param>
										<param name="charting.axisTitleX.text" />
										<param name="charting.axisTitleY.text" />
										<param name="charting.legend.placement">none</param>

										<module name="FlashChart">
											<param name="width">100%</param>
											<module name="ConvertToDrilldownSearch">
												<module name="ViewRedirector">
													<param name="viewTarget">flashtimeline</param>
												</module>
											</module>
										</module>
										<module name="ViewRedirectorLink">
											<param name="viewTarget">flashtimeline</param>
										</module>
									</module>
								</module>
							</module>
						</module>
					</module>
				</module>
				<module name="HiddenPostProcess" layoutPanel="panel_row2_col3" group="Top contacted people" autoRun="True">
					<param name="search">top name | fields - percent</param>
					<param name="groupLabel">Top contacted people</param>
					<module name="ViewstateAdapter">
						<param name="suppressionList">
							<item>drilldown</item>
						</param>
						<module name="HiddenFieldPicker">
							<param name="strictMode">True</param>
							<module name="JobProgressIndicator">
								<module name="EnablePreview">
									<param name="enable">True</param>
									<param name="display">False</param>
									<module name="HiddenChartFormatter">
										<param name="charting.chart">bar</param>
										<param name="charting.axisTitleX.text" />
										<param name="charting.axisTitleY.text" />

										<param name="charting.legend.placement">none</param>
										<module name="FlashChart">
											<param name="width">100%</param>
											<module name="ConvertToDrilldownSearch">
												<module name="ViewRedirector">
													<param name="viewTarget">flashtimeline</param>
												</module>
											</module>
										</module>
										<module name="ViewRedirectorLink">
											<param name="viewTarget">flashtimeline</param>
										</module>
									</module>
								</module>
							</module>
						</module>
					</module>
				</module>
				<module name="HiddenPostProcess" layoutPanel="panel_row3_col1" group="Notification number evolution by time" autoRun="True">
					<param name="search">eval State=if(current_state == 1,"WARNING",if(current_state == 2,"CRITICAL",if(current_state == 3,"UNKNOWN","OKAY"))) | timechart count by State</param>
					<param name="groupLabel">Notification number evolution by time</param>
					<module name="ViewstateAdapter">
						<param name="suppressionList">
							<item>drilldown</item>
						</param>
						<module name="HiddenFieldPicker">
							<param name="strictMode">True</param>
							<module name="JobProgressIndicator">
								<module name="EnablePreview">
									<param name="enable">True</param>
									<param name="display">False</param>
									<module name="HiddenChartFormatter">
										<param name="charting.chart">area</param>
										<param name="charting.axisTitleX.text" />
										<param name="charting.axisTitleY.text" />
										<param name="charting.legend.placement">right</param>
										<param name="charting.layout.splitSeries">false</param>
										<param name="charting.chart.stackMode">stacked</param>
										<module name="FlashChart">
											<param name="width">100%</param>
											<module name="ConvertToDrilldownSearch">
												<module name="ViewRedirector">
													<param name="viewTarget">flashtimeline</param>
												</module>
											</module>
										</module>
										<module name="ViewRedirectorLink">
											<param name="viewTarget">flashtimeline</param>
										</module>
									</module>
								</module>
							</module>
						</module>
					</module>
				</module>
			</module>
		</module>
	</module>
</view>
