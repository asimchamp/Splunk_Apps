function diff_match_patch(){this.Diff_Timeout=1;this.Diff_EditCost=4;this.Diff_DualThreshold=32;this.Match_Balance=0.5;this.Match_Threshold=0.5;this.Match_MinLength=100;this.Match_MaxLength=1000;this.Patch_Margin=4;function a(){var e=0;var d=1;var f=2;while(d!=f){e++;d=f;f=f<<1}return e}this.Match_MaxBits=a()}var DIFF_DELETE=-1;var DIFF_INSERT=1;var DIFF_EQUAL=0;diff_match_patch.prototype.diff_main=function(j,i,p){if(j==i){return[[DIFF_EQUAL,j]]}if(typeof p=="undefined"){p=true}var o=p;var n=this.diff_commonPrefix(j,i);var m=j.substring(0,n);j=j.substring(n);i=i.substring(n);n=this.diff_commonSuffix(j,i);var l=j.substring(j.length-n);j=j.substring(0,j.length-n);i=i.substring(0,i.length-n);var k=this.diff_compute(j,i,o);if(m){k.unshift([DIFF_EQUAL,m])}if(l){k.push([DIFF_EQUAL,l])}this.diff_cleanupMerge(k);return k};diff_match_patch.prototype.diff_compute=function(S,R,Q){var P;if(!S){return[[DIFF_INSERT,R]]}if(!R){return[[DIFF_DELETE,S]]}var O=S.length>R.length?S:R;var N=S.length>R.length?R:S;var L=O.indexOf(N);if(L!=-1){P=[[DIFF_INSERT,O.substring(0,L)],[DIFF_EQUAL,N],[DIFF_INSERT,O.substring(L+N.length)]];if(S.length>R.length){P[0][0]=P[2][0]=DIFF_DELETE}return P}O=N=null;var M=this.diff_halfMatch(S,R);if(M){var J=M[0];var I=M[1];var H=M[2];var G=M[3];var F=M[4];var E=this.diff_main(J,H,Q);var D=this.diff_main(I,G,Q);return E.concat([[DIFF_EQUAL,F]],D)}if(Q&&(S.length<100||R.length<100)){Q=false}var C;if(Q){var T=this.diff_linesToChars(S,R);S=T[0];R=T[1];C=T[2]}P=this.diff_map(S,R);if(!P){P=[[DIFF_DELETE,S],[DIFF_INSERT,R]]}if(Q){this.diff_charsToLines(P,C);this.diff_cleanupSemantic(P);P.push([DIFF_EQUAL,""]);var B=0;var A=0;var z=0;var y="";var x="";while(B<P.length){switch(P[B][0]){case DIFF_INSERT:z++;x+=P[B][1];break;case DIFF_DELETE:A++;y+=P[B][1];break;case DIFF_EQUAL:if(A>=1&&z>=1){var T=this.diff_main(y,x,false);P.splice(B-A-z,A+z);B=B-A-z;for(var K=T.length-1;K>=0;K--){P.splice(B,0,T[K])}B=B+T.length}z=0;A=0;y="";x="";break}B++}P.pop()}return P};diff_match_patch.prototype.diff_linesToChars=function(m,f){var e=[];var d={};e[0]="";function c(h){var g="";var l=0;var k=-1;var j=e.length;while(k<h.length-1){k=h.indexOf("\n",l);if(k==-1){k=h.length-1}var i=h.substring(l,k+1);l=k+1;if(d.hasOwnProperty?d.hasOwnProperty(i):(d[i]!==undefined)){g+=String.fromCharCode(d[i])}else{g+=String.fromCharCode(j);d[i]=j;e[j++]=i}}return g}var b=c(m);var a=c(f);return[b,a,e]};diff_match_patch.prototype.diff_charsToLines=function(g,f){for(var e=0;e<g.length;e++){var j=g[e][1];var h=[];for(var i=0;i<j.length;i++){h[i]=f[j.charCodeAt(i)]}g[e][1]=h.join("")}};diff_match_patch.prototype.diff_map=function(J,I){var G=(new Date()).getTime()+this.Diff_Timeout*1000;var F=J.length+I.length-1;var E=this.Diff_DualThreshold*2<F;var D=[];var C=[];var B={};var z={};B[1]=0;z[1]=0;var r,q;var w;var v={};var u=false;var s=!!(v.hasOwnProperty);var t=(J.length+I.length)%2;for(var H=0;H<F;H++){if(this.Diff_Timeout>0&&(new Date()).getTime()>G){return null}D[H]={};for(var A=-H;A<=H;A+=2){if(A==-H||A!=H&&B[A-1]<B[A+1]){r=B[A+1]}else{r=B[A-1]+1}q=r-A;if(E){w=r+","+q;if(t&&(s?v.hasOwnProperty(w):(v[w]!==undefined))){u=true}if(!t){v[w]=H}}while(!u&&r<J.length&&q<I.length&&J.charAt(r)==I.charAt(q)){r++;q++;if(E){w=r+","+q;if(t&&(s?v.hasOwnProperty(w):(v[w]!==undefined))){u=true}if(!t){v[w]=H}}}B[A]=r;D[H][r+","+q]=true;if(r==J.length&&q==I.length){return this.diff_path1(D,J,I)}else{if(u){C=C.slice(0,v[w]+1);var K=this.diff_path1(D,J.substring(0,r),I.substring(0,q));return K.concat(this.diff_path2(C,J.substring(r),I.substring(q)))}}}if(E){C[H]={};for(var A=-H;A<=H;A+=2){if(A==-H||A!=H&&z[A-1]<z[A+1]){r=z[A+1]}else{r=z[A-1]+1}q=r-A;w=(J.length-r)+","+(I.length-q);if(!t&&(s?v.hasOwnProperty(w):(v[w]!==undefined))){u=true}if(t){v[w]=H}while(!u&&r<J.length&&q<I.length&&J.charAt(J.length-r-1)==I.charAt(I.length-q-1)){r++;q++;w=(J.length-r)+","+(I.length-q);if(!t&&(s?v.hasOwnProperty(w):(v[w]!==undefined))){u=true}if(t){v[w]=H}}z[A]=r;C[H][r+","+q]=true;if(u){D=D.slice(0,v[w]+1);var K=this.diff_path1(D,J.substring(0,J.length-r),I.substring(0,I.length-q));return K.concat(this.diff_path2(C,J.substring(J.length-r),I.substring(I.length-q)))}}}}return null};diff_match_patch.prototype.diff_path1=function(i,h,n){var k=[];var g=h.length;var m=n.length;var j=null;for(var l=i.length-2;l>=0;l--){while(1){if(i[l].hasOwnProperty?i[l].hasOwnProperty((g-1)+","+m):(i[l][(g-1)+","+m]!==undefined)){g--;if(j===DIFF_DELETE){k[0][1]=h.charAt(g)+k[0][1]}else{k.unshift([DIFF_DELETE,h.charAt(g)])}j=DIFF_DELETE;break}else{if(i[l].hasOwnProperty?i[l].hasOwnProperty(g+","+(m-1)):(i[l][g+","+(m-1)]!==undefined)){m--;if(j===DIFF_INSERT){k[0][1]=n.charAt(m)+k[0][1]}else{k.unshift([DIFF_INSERT,n.charAt(m)])}j=DIFF_INSERT;break}else{g--;m--;if(j===DIFF_EQUAL){k[0][1]=h.charAt(g)+k[0][1]}else{k.unshift([DIFF_EQUAL,h.charAt(g)])}j=DIFF_EQUAL}}}}return k};diff_match_patch.prototype.diff_path2=function(o,n,l){var j=[];var i=0;var p=n.length;var m=l.length;var h=null;for(var k=o.length-2;k>=0;k--){while(1){if(o[k].hasOwnProperty?o[k].hasOwnProperty((p-1)+","+m):(o[k][(p-1)+","+m]!==undefined)){p--;if(h===DIFF_DELETE){j[i-1][1]+=n.charAt(n.length-p-1)}else{j[i++]=[DIFF_DELETE,n.charAt(n.length-p-1)]}h=DIFF_DELETE;break}else{if(o[k].hasOwnProperty?o[k].hasOwnProperty(p+","+(m-1)):(o[k][p+","+(m-1)]!==undefined)){m--;if(h===DIFF_INSERT){j[i-1][1]+=l.charAt(l.length-m-1)}else{j[i++]=[DIFF_INSERT,l.charAt(l.length-m-1)]}h=DIFF_INSERT;break}else{p--;m--;if(h===DIFF_EQUAL){j[i-1][1]+=n.charAt(n.length-p-1)}else{j[i++]=[DIFF_EQUAL,n.charAt(n.length-p-1)]}h=DIFF_EQUAL}}}}return j};diff_match_patch.prototype.diff_commonPrefix=function(h,g){if(!h||!g||h.charCodeAt(0)!==g.charCodeAt(0)){return 0}var l=0;var k=Math.min(h.length,g.length);var j=k;var i=0;while(l<j){if(h.substring(i,j)==g.substring(i,j)){l=j;i=l}else{k=j}j=Math.floor((k-l)/2+l)}return j};diff_match_patch.prototype.diff_commonSuffix=function(h,g){if(!h||!g||h.charCodeAt(h.length-1)!==g.charCodeAt(g.length-1)){return 0}var l=0;var k=Math.min(h.length,g.length);var j=k;var i=0;while(l<j){if(h.substring(h.length-j,h.length-i)==g.substring(g.length-j,g.length-i)){l=j;i=l}else{k=j}j=Math.floor((k-l)/2+l)}return j};diff_match_patch.prototype.diff_halfMatch=function(j,i){var g=j.length>i.length?j:i;var f=j.length>i.length?i:j;if(g.length<10||f.length<1){return null}var e=this;function u(z,s,l){var q=z.substring(l,l+Math.floor(z.length/4));var h=-1;var p="";var o,k,y,r;while((h=s.indexOf(q,h+1))!=-1){var n=e.diff_commonPrefix(z.substring(l),s.substring(h));var m=e.diff_commonSuffix(z.substring(0,l),s.substring(0,h));if(p.length<m+n){p=s.substring(h-m,h)+s.substring(h,h+n);o=z.substring(0,l-m);k=z.substring(l+n);y=s.substring(0,h-m);r=s.substring(h+n)}}if(p.length>=z.length/2){return[o,k,y,r,p]}else{return null}}var d=u(g,f,Math.ceil(g.length/4));var c=u(g,f,Math.ceil(g.length/2));var b;if(!d&&!c){return null}else{if(!c){b=d}else{if(!d){b=c}else{b=d[4].length>c[4].length?d:c}}}var a,t,w,v;if(j.length>i.length){a=b[0];t=b[1];w=b[2];v=b[3]}else{w=b[0];v=b[1];a=b[2];t=b[3]}var x=b[4];return[a,t,w,v,x]};diff_match_patch.prototype.diff_cleanupSemantic=function(j){var i=false;var p=[];var o=0;var n=null;var m=0;var l=0;var k=0;while(m<j.length){if(j[m][0]==DIFF_EQUAL){p[o++]=m;l=k;k=0;n=j[m][1]}else{k+=j[m][1].length;if(n!==null&&(n.length<=l)&&(n.length<=k)){j.splice(p[o-1],0,[DIFF_DELETE,n]);j[p[o-1]+1][0]=DIFF_INSERT;o--;o--;m=o>0?p[o-1]:-1;l=0;k=0;n=null;i=true}}m++}if(i){this.diff_cleanupMerge(j)}this.diff_cleanupSemanticLossless(j)};diff_match_patch.prototype.diff_cleanupSemanticLossless=function(I){var H=/[^a-zA-Z0-9]/;var G=/\s/;var F=/[\r\n]/;var E=/\n\r?\n$/;var D=/^\r?\n\r?\n/;function a(e,d){if(!e||!d){return 5}var f=0;if(e.charAt(e.length-1).match(H)||d.charAt(0).match(H)){f++;if(e.charAt(e.length-1).match(G)||d.charAt(0).match(G)){f++;if(e.charAt(e.length-1).match(F)||d.charAt(0).match(F)){f++;if(e.match(E)||d.match(D)){f++}}}}return f}var C=1;while(C<I.length-1){if(I[C-1][0]==DIFF_EQUAL&&I[C+1][0]==DIFF_EQUAL){var B=I[C-1][1];var A=I[C][1];var z=I[C+1][1];var y=this.diff_commonSuffix(B,A);if(y){var x=A.substring(A.length-y);B=B.substring(0,B.length-y);A=x+A.substring(0,A.length-y);z=x+z}var w=B;var v=A;var u=z;var c=a(B,A)+a(A,z);while(A.charAt(0)===z.charAt(0)){B+=A.charAt(0);A=A.substring(1)+z.charAt(0);z=z.substring(1);var b=a(B,A)+a(A,z);if(b>=c){c=b;w=B;v=A;u=z}}if(I[C-1][1]!=w){if(w){I[C-1][1]=w}else{I.splice(C-1,1);C--}I[C][1]=v;if(u){I[C+1][1]=u}else{I.splice(C+1,1);C--}}}C++}};diff_match_patch.prototype.diff_cleanupEfficiency=function(t){var s=false;var r=[];var q=0;var p="";var o=0;var n=false;var m=false;var l=false;var k=false;while(o<t.length){if(t[o][0]==DIFF_EQUAL){if(t[o][1].length<this.Diff_EditCost&&(l||k)){r[q++]=o;n=l;m=k;p=t[o][1]}else{q=0;p=""}l=k=false}else{if(t[o][0]==DIFF_DELETE){k=true}else{l=true}if(p&&((n&&m&&l&&k)||((p.length<this.Diff_EditCost/2)&&(n+m+l+k)==3))){t.splice(r[q-1],0,[DIFF_DELETE,p]);t[r[q-1]+1][0]=DIFF_INSERT;q--;p="";if(n&&m){l=k=true;q=0}else{q--;o=q>0?r[q-1]:-1;l=k=false}s=true}}o++}if(s){this.diff_cleanupMerge(t)}};diff_match_patch.prototype.diff_cleanupMerge=function(j){j.push([DIFF_EQUAL,""]);var i=0;var p=0;var o=0;var n="";var m="";var l;while(i<j.length){switch(j[i][0]){case DIFF_INSERT:o++;m+=j[i][1];i++;break;case DIFF_DELETE:p++;n+=j[i][1];i++;break;case DIFF_EQUAL:if(p!==0||o!==0){if(p!==0&&o!==0){l=this.diff_commonPrefix(m,n);if(l!==0){if((i-p-o)>0&&j[i-p-o-1][0]==DIFF_EQUAL){j[i-p-o-1][1]+=m.substring(0,l)}else{j.splice(0,0,[DIFF_EQUAL,m.substring(0,l)]);i++}m=m.substring(l);n=n.substring(l)}l=this.diff_commonSuffix(m,n);if(l!==0){j[i][1]=m.substring(m.length-l)+j[i][1];m=m.substring(0,m.length-l);n=n.substring(0,n.length-l)}}if(p===0){j.splice(i-p-o,p+o,[DIFF_INSERT,m])}else{if(o===0){j.splice(i-p-o,p+o,[DIFF_DELETE,n])}else{j.splice(i-p-o,p+o,[DIFF_DELETE,n],[DIFF_INSERT,m])}}i=i-p-o+(p?1:0)+(o?1:0)+1}else{if(i!==0&&j[i-1][0]==DIFF_EQUAL){j[i-1][1]+=j[i][1];j.splice(i,1)}else{i++}}o=0;p=0;n="";m="";break}}if(j[j.length-1][1]===""){j.pop()}var k=false;i=1;while(i<j.length-1){if(j[i-1][0]==DIFF_EQUAL&&j[i+1][0]==DIFF_EQUAL){if(j[i][1].substring(j[i][1].length-j[i-1][1].length)==j[i-1][1]){j[i][1]=j[i-1][1]+j[i][1].substring(0,j[i][1].length-j[i-1][1].length);j[i+1][1]=j[i-1][1]+j[i+1][1];j.splice(i-1,1);k=true}else{if(j[i][1].substring(0,j[i+1][1].length)==j[i+1][1]){j[i-1][1]+=j[i+1][1];j[i][1]=j[i][1].substring(j[i+1][1].length)+j[i+1][1];j.splice(i+1,1);k=true}}}i++}if(k){this.diff_cleanupMerge(j)}};diff_match_patch.prototype.diff_xIndex=function(i,h){var m=0;var l=0;var k=0;var j=0;var g;for(g=0;g<i.length;g++){if(i[g][0]!==DIFF_INSERT){m+=i[g][1].length}if(i[g][0]!==DIFF_DELETE){l+=i[g][1].length}if(m>h){break}k=m;j=l}if(i.length!=g&&i[g][0]===DIFF_DELETE){return j}return j+(h-k)};diff_match_patch.prototype.diff_prettyHtml=function(h){var g=[];var j=0;for(var f=0;f<h.length;f++){var m=h[f][0];var l=h[f][1];var k=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"&para;<BR>");switch(m){case DIFF_INSERT:g[f]='<INS STYLE="background:#E6FFE6;" TITLE="i='+j+'">'+k+"</INS>";break;case DIFF_DELETE:g[f]='<DEL STYLE="background:#FFE6E6;" TITLE="i='+j+'">'+k+"</DEL>";break;case DIFF_EQUAL:g[f]='<SPAN TITLE="i='+j+'">'+k+"</SPAN>";break}if(m!==DIFF_DELETE){j+=l.length}}return g.join("")};diff_match_patch.prototype.diff_text1=function(e){var d=[];for(var c=0;c<e.length;c++){if(e[c][0]!==DIFF_INSERT){d[c]=e[c][1]}}return d.join("")};diff_match_patch.prototype.diff_text2=function(e){var d=[];for(var c=0;c<e.length;c++){if(e[c][0]!==DIFF_DELETE){d[c]=e[c][1]}}return d.join("")};diff_match_patch.prototype.diff_toDelta=function(e){var d=[];for(var c=0;c<e.length;c++){switch(e[c][0]){case DIFF_INSERT:d[c]="+"+encodeURI(e[c][1]);break;case DIFF_DELETE:d[c]="-"+e[c][1].length;break;case DIFF_EQUAL:d[c]="="+e[c][1].length;break}}return d.join("\t").replace(/\0/g,"%00").replace(/%20/g," ")};diff_match_patch.prototype.diff_fromDelta=function(s,r){var q=[];var p=0;var m=0;r=r.replace(/%00/g,"\0");var l=r.split(/\t/g);for(var t=0;t<l.length;t++){var k=l[t].substring(1);switch(l[t].charAt(0)){case"+":try{q[p++]=[DIFF_INSERT,decodeURI(k)]}catch(o){throw new Error("Illegal escape in diff_fromDelta: "+k)}break;case"-":case"=":var i=parseInt(k,10);if(isNaN(i)||i<0){throw new Error("Invalid number in diff_fromDelta: "+k)}var j=s.substring(m,m+=i);if(l[t].charAt(0)=="="){q[p++]=[DIFF_EQUAL,j]}else{q[p++]=[DIFF_DELETE,j]}break;default:if(l[t]){throw new Error("Invalid diff operation in diff_fromDelta: "+l[t])}}}if(m!=s.length){throw new Error("Delta length ("+m+") does not equal source text length ("+s.length+").")}return q};diff_match_patch.prototype.match_main=function(e,d,f){f=Math.max(0,Math.min(f,e.length-d.length));if(e==d){return 0}else{if(e.length===0){return null}else{if(e.substring(f,f+d.length)==d){return f}else{return this.match_bitap(e,d,f)}}}};diff_match_patch.prototype.match_bitap=function(L,K,J){if(K.length>this.Match_MaxBits){throw new Error("Pattern too long for this browser.")}var u=this.match_alphabet(K);var H=L.length;H=Math.max(H,this.Match_MinLength);H=Math.min(H,this.Match_MaxLength);var G=this;function e(b,a){var c=Math.abs(J-a);return(b/K.length/G.Match_Balance)+(c/H/(1-G.Match_Balance))}var F=this.Match_Threshold;var E=L.indexOf(K,J);if(E!=-1){F=Math.min(e(0,E),F)}E=L.lastIndexOf(K,J+K.length);if(E!=-1){F=Math.min(e(0,E),F)}var C=1<<(K.length-1);E=null;var B,t;var A=Math.max(J+J,L.length);var z;for(var I=0;I<K.length;I++){var y=Array(L.length);B=J;t=A;while(B<t){if(e(I,t)<F){B=t}else{A=t}t=Math.floor((A-B)/2+B)}A=t;var x=Math.max(0,J-(t-J)-1);var w=Math.min(L.length-1,K.length+t);if(L.charAt(w)==K.charAt(K.length-1)){y[w]=(1<<(I+1))-1}else{y[w]=(1<<I)-1}for(var D=w-1;D>=x;D--){if(I===0){y[D]=((y[D+1]<<1)|1)&u[L.charAt(D)]}else{y[D]=((y[D+1]<<1)|1)&u[L.charAt(D)]|((z[D+1]<<1)|1)|((z[D]<<1)|1)|z[D+1]}if(y[D]&C){var v=e(I,D);if(v<=F){F=v;E=D;if(D>J){x=Math.max(0,J-(D-J))}else{break}}}}if(e(I+1,J)>F){break}z=y}return E};diff_match_patch.prototype.match_alphabet=function(b){var d={};for(var c=0;c<b.length;c++){d[b.charAt(c)]=0}for(var c=0;c<b.length;c++){d[b.charAt(c)]|=1<<(b.length-c-1)}return d};diff_match_patch.prototype.patch_addContext=function(h,g){var l=g.substring(h.start2,h.start2+h.length1);var k=0;while(g.indexOf(l)!=g.lastIndexOf(l)&&l.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin){k+=this.Patch_Margin;l=g.substring(h.start2-k,h.start2+h.length1+k)}k+=this.Patch_Margin;var j=g.substring(h.start2-k,h.start2);if(j!==""){h.diffs.unshift([DIFF_EQUAL,j])}var i=g.substring(h.start2+h.length1,h.start2+h.length1+k);if(i!==""){h.diffs.push([DIFF_EQUAL,i])}h.start1-=j.length;h.start2-=j.length;h.length1+=j.length+i.length;h.length2+=j.length+i.length};diff_match_patch.prototype.patch_make=function(D,B,A){var z,n,w;if(typeof B=="undefined"){w=D;z=this.diff_text1(w);n=""}else{z=D;n=B;if(typeof A!="undefined"){w=A}else{w=this.diff_main(z,n,true);if(w.length>2){this.diff_cleanupSemantic(w);this.diff_cleanupEfficiency(w)}}}if(w.length===0){return[]}var y=[];var v=new patch_obj();var u=0;var t=0;var s=0;var r=z;var q=z;for(var C=0;C<w.length;C++){var p=w[C][0];var o=w[C][1];if(!u&&p!==DIFF_EQUAL){v.start1=t;v.start2=s}switch(p){case DIFF_INSERT:v.diffs[u++]=w[C];v.length2+=o.length;q=q.substring(0,s)+o+q.substring(s);break;case DIFF_DELETE:v.length1+=o.length;v.diffs[u++]=w[C];q=q.substring(0,s)+q.substring(s+o.length);break;case DIFF_EQUAL:if(o.length<=2*this.Patch_Margin&&u&&w.length!=C+1){v.diffs[u++]=w[C];v.length1+=o.length;v.length2+=o.length}else{if(o.length>=2*this.Patch_Margin){if(u){this.patch_addContext(v,r);y.push(v);v=new patch_obj();u=0;r=q}}}break}if(p!==DIFF_INSERT){t+=o.length}if(p!==DIFF_DELETE){s+=o.length}}if(u){this.patch_addContext(v,r);y.push(v)}return y};diff_match_patch.prototype.patch_apply=function(J,I){if(J.length==0){return[I,[]]}var H=[];for(var r=0;r<J.length;r++){var G=J[r];var F=new patch_obj();F.diffs=G.diffs.slice();F.start1=G.start1;F.start2=G.start2;F.length1=G.length1;F.length2=G.length2;H[r]=F}J=H;var E=this.patch_addPadding(J);I=E+I+E;this.patch_splitMax(J);var D=0;var C=[];for(var r=0;r<J.length;r++){var B=J[r].start2+D;var A=this.diff_text1(J[r].diffs);var z=this.match_main(I,A,B);if(z===null){C[r]=false}else{C[r]=true;D=z-B;var w=I.substring(z,z+A.length);if(A==w){I=I.substring(0,z)+this.diff_text2(J[r].diffs)+I.substring(z+A.length)}else{var v=this.diff_main(A,w,false);this.diff_cleanupSemanticLossless(v);var u=0;var t;for(var q=0;q<J[r].diffs.length;q++){var s=J[r].diffs[q];if(s[0]!==DIFF_EQUAL){t=this.diff_xIndex(v,u)}if(s[0]===DIFF_INSERT){I=I.substring(0,z+t)+s[1]+I.substring(z+t)}else{if(s[0]===DIFF_DELETE){I=I.substring(0,z+t)+I.substring(z+this.diff_xIndex(v,u+s[1].length))}}if(s[0]!==DIFF_DELETE){u+=s[1].length}}}}}I=I.substring(E.length,I.length-E.length);return[I,C]};diff_match_patch.prototype.patch_addPadding=function(h){var g="";for(var f=0;f<this.Patch_Margin;f++){g+=String.fromCharCode(f)}for(var f=0;f<h.length;f++){h[f].start1+=g.length;h[f].start2+=g.length}var k=h[0];var j=k.diffs;if(j.length==0||j[0][0]!=DIFF_EQUAL){j.unshift([DIFF_EQUAL,g]);k.start1-=g.length;k.start2-=g.length;k.length1+=g.length;k.length2+=g.length}else{if(g.length>j[0][1].length){var i=g.length-j[0][1].length;j[0][1]=g.substring(j[0][1].length)+j[0][1];k.start1-=i;k.start2-=i;k.length1+=i;k.length2+=i}}k=h[h.length-1];j=k.diffs;if(j.length==0||j[j.length-1][0]!=DIFF_EQUAL){j.push([DIFF_EQUAL,g]);k.length1+=g.length;k.length2+=g.length}else{if(g.length>j[j.length-1][1].length){var i=g.length-j[j.length-1][1].length;j[j.length-1][1]+=g.substring(0,i);k.length1+=i;k.length2+=i}}return g};diff_match_patch.prototype.patch_splitMax=function(v){for(var w=0;w<v.length;w++){if(v[w].length1>this.Match_MaxBits){var u=v[w];v.splice(w,1);var t=this.Match_MaxBits;var s=u.start1;var r=u.start2;var q="";while(u.diffs.length!==0){var p=new patch_obj();var o=true;p.start1=s-q.length;p.start2=r-q.length;if(q!==""){p.length1=p.length2=q.length;p.diffs.push([DIFF_EQUAL,q])}while(u.diffs.length!==0&&p.length1<t-this.Patch_Margin){var n=u.diffs[0][0];var m=u.diffs[0][1];if(n===DIFF_INSERT){p.length2+=m.length;r+=m.length;p.diffs.push(u.diffs.shift());o=false}else{m=m.substring(0,t-p.length1-this.Patch_Margin);p.length1+=m.length;s+=m.length;if(n===DIFF_EQUAL){p.length2+=m.length;r+=m.length}else{o=false}p.diffs.push([n,m]);if(m==u.diffs[0][1]){u.diffs.shift()}else{u.diffs[0][1]=u.diffs[0][1].substring(m.length)}}}q=this.diff_text2(p.diffs);q=q.substring(q.length-this.Patch_Margin);var l=this.diff_text1(u.diffs).substring(0,this.Patch_Margin);if(l!==""){p.length1+=l.length;p.length2+=l.length;if(p.diffs.length!==0&&p.diffs[p.diffs.length-1][0]===DIFF_EQUAL){p.diffs[p.diffs.length-1][1]+=l}else{p.diffs.push([DIFF_EQUAL,l])}}if(!o){v.splice(w++,0,p)}}}}};diff_match_patch.prototype.patch_toText=function(e){var d=[];for(var c=0;c<e.length;c++){d[c]=e[c]}return d.join("")};diff_match_patch.prototype.patch_fromText=function(q){var p=[];if(!q){return p}q=q.replace(/%00/g,"\0");var o=q.split("\n");var n=0;while(n<o.length){var h=o[n].match(/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/);if(!h){throw new Error("Invalid patch string: "+o[n])}var k=new patch_obj();p.push(k);k.start1=parseInt(h[1],10);if(h[2]===""){k.start1--;k.length1=1}else{if(h[2]=="0"){k.length1=0}else{k.start1--;k.length1=parseInt(h[2],10)}}k.start2=parseInt(h[3],10);if(h[4]===""){k.start2--;k.length2=1}else{if(h[4]=="0"){k.length2=0}else{k.start2--;k.length2=parseInt(h[4],10)}}n++;while(n<o.length){var j=o[n].charAt(0);try{var i=decodeURI(o[n].substring(1))}catch(l){throw new Error("Illegal escape in patch_fromText: "+i)}if(j=="-"){k.diffs.push([DIFF_DELETE,i])}else{if(j=="+"){k.diffs.push([DIFF_INSERT,i])}else{if(j==" "){k.diffs.push([DIFF_EQUAL,i])}else{if(j=="@"){break}else{if(j===""){}else{throw new Error('Invalid patch mode "'+j+'" in: '+i)}}}}}n++}}return p};function patch_obj(){this.diffs=[];this.start1=null;this.start2=null;this.length1=0;this.length2=0}patch_obj.prototype.toString=function(){var f,h;if(this.length1===0){f=this.start1+",0"}else{if(this.length1==1){f=this.start1+1}else{f=(this.start1+1)+","+this.length1}}if(this.length2===0){h=this.start2+",0"}else{if(this.length2==1){h=this.start2+1}else{h=(this.start2+1)+","+this.length2}}var e=["@@ -"+f+" +"+h+" @@\n"];var g;for(var d=0;d<this.diffs.length;d++){switch(this.diffs[d][0]){case DIFF_INSERT:g="+";break;case DIFF_DELETE:g="-";break;case DIFF_EQUAL:g=" ";break}e[d+1]=g+encodeURI(this.diffs[d][1])+"\n"}return e.join("").replace(/\0/g,"%00").replace(/%20/g," ")};