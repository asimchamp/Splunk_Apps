<form script="nmon:ui_simple.js,nmon:active_button.js" stylesheet="nmon:ui_simple.css,nmon:panel_decoration.css,nmon:hover.css" isVisible="true">
    <label>NMON Performance - Wall Of Performance</label>
    <fieldset submitButton="false">
        <input type="time" searchWhenChanged="true" token="timerange">
            <label>Time range:</label>
            <default>
                <earliest>-24h</earliest>
                <latest>now</latest>
            </default>
            <change>
                <unset token="form.refresh"></unset>
            </change>
        </input>
        <input type="dropdown" token="osfilter" searchWhenChanged="true">
            <label>OStype:</label>
            <choice value="*">Any</choice>
            <choice value="AIX">AIX</choice>
            <choice value="Linux">Linux</choice>
            <choice value="Solaris">Solaris</choice>
            <prefix>OStype="</prefix>
            <suffix>"</suffix>
            <default>*</default>
        </input>
        <input id="host" type="multiselect" searchWhenChanged="true" token="host">
            <label>Host(s):</label>
            <choice value="*">ALL</choice>
            <search>
                <!-- Use tstats for performance purposes -->
                <query>| tstats count where `nmon_index` type=CPU_ALL $osfilter$ by host | sort host</query>
                <earliest>$timerange.earliest$</earliest>
                <latest>$timerange.latest$</latest>
                <!-- Progress event has access to job properties only -->
                <progress>
                    <condition match="'job.resultCount' == 0">
                        <set token="show_null_host">True</set>
                    </condition>
                    <condition>
                        <unset token="show_null_host"></unset>
                    </condition>
                </progress>
            </search>
            <fieldForLabel>host</fieldForLabel>
            <fieldForValue>host</fieldForValue>
            <valuePrefix>host="</valuePrefix>
            <valueSuffix>"</valueSuffix>
            <delimiter> OR </delimiter>
        </input>

        <input type="dropdown" token="refresh" searchWhenChanged="true">
            <label>Auto-refresh:</label>
            <fieldForLabel>label</fieldForLabel>
            <fieldForValue>value</fieldForValue>
            <selectFirstChoice>true</selectFirstChoice>
            <search>
                <query>| `def_auto_refresh`</query>
                <earliest>$timerange.earliest$</earliest>
                <latest>$timerange.latest$</latest>
            </search>
        </input>

    </fieldset>

    <!--
    Dynamic configuration
    The following searches are being used to define various tokens using event handlers
    -->

    <!-- OStype -->

    <search id="OSType_detection">
        <query>eventtype=nmon:performance $host$ | head 1 | stats count by OStype | fields OStype</query>
        <earliest>$timerange.earliest$</earliest>
        <latest>$timerange.latest$</latest>
        <progress>
            <condition match="'result.OStype'==&quot;Linux&quot;">
                <set token="is_Linux">true</set>
                <unset token="is_AIX"></unset>
                <unset token="is_Solaris"></unset>
            </condition>
            <condition match="'result.OStype'==&quot;AIX&quot;">
                <set token="is_AIX">true</set>
                <unset token="is_Linux"></unset>
                <unset token="is_Solaris"></unset>
            </condition>
            <condition match="'result.OStype'==&quot;Solaris&quot;">
                <set token="is_Solaris">true</set>
                <unset token="is_AIX"></unset>
                <unset token="is_Linux"></unset>
            </condition>
        </progress>
    </search>

    <!-- TOP data availability -->

    <search>
        <query>eventtype=nmon:performance type=TOP $host$ | head 100 | stats count | where count&gt;0</query>
        <earliest>$timerange.earliest$</earliest>
        <latest>$timerange.latest$</latest>
        <progress>
            <condition match="$job.resultCount$ == 0">
                <set token="show_null_top">true</set>
            </condition>
            <condition>
                <unset token="show_null_top"/>
                <set token="start_top_searches">true</set>
            </condition>
        </progress>
    </search>

    <!-- DG data availability -->

    <search>
        <query>eventtype=nmon:performance type=DGXFER $host$ value&gt;0 | head 100 | stats count | where count&gt;0</query>
        <earliest>$timerange.earliest$</earliest>
        <latest>$timerange.latest$</latest>
        <progress>
            <condition match="$job.resultCount$ == 0">
                    <set token="start_disk_stats_search">_time,*</set>
                    <unset token="start_dg_stats_search"></unset>
            </condition>
            <condition>
                    <set token="start_dg_stats_search">_time,*</set>
                    <unset token="start_disk_stats_search"></unset>
            </condition>
        </progress>
    </search>

    <!-- Help the user -->

    <row rejects="$host$">
        <panel>
            <html>
                <div class="red_help_user">
                    <p>- - - - - - - - - - ACTION REQUIRED: please select your server name(s) in the host selector above - - - - - - - - - -</p>
                </div>
            </html>
        </panel>
    </row>

    <row depends="$show_null_host$">
        <panel>
            <html>
                <p style="color:blue;margin-left:30px;font-size:14px">Searching for nmon performance data did not returned any result, please ensure at least one host is correctly configured to generate performance data. (search for eventtype=nmon:performance)</p>
            </html>
        </panel>
    </row>
    <row>
        <panel>
            <html>
                <div class="custom-sub-nav" style="text-align: center;">
                    <button class="button2_lowpadding glow" data-token-name="show_config" data-alt-label="HIDE HOSTS CONFIGURATION" data-token-value="fields - _time">SHOW HOSTS CONFIGURATION</button>
                </div>
            </html>
        </panel>
    </row>

    <row depends="$show_config$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>Start host configuration</h1>
                </div>
            </html>
        </panel>
    </row>

    <row depends="$show_config$">
        <panel>
            <table rejects="$show_null_config$">
                <title>NMON Inventory data:</title>
                <search depends="$show_config$">
                    <query>| inputlookup nmon_inventory
| rename hostname as host
| search $osfilter$ $host$
| eval "Operating System"=case(OStype=="AIX", ("IBM AIX " + AIX_LEVEL), OStype=="Linux", Linux_distribution, OStype=="Solaris", if(isnotnull(Solaris_version), Solaris_version, Solaris_sunOS_version))
| fields host,OStype,cpu_cores,Processor,Physical_mem_MB,Virtual_mem_MB,"Operating System",nmon_version
| fillnull value="N/A"
| rename Physical_mem_MB AS "Physical memory (MB)", Virtual_mem_MB AS "Virtual memory (MB)"</query>
                    <earliest>0</earliest>
                <!-- Progress event has access to job properties only -->
                <progress>
                    <condition match="'job.resultCount' == 0">
                        <set token="show_null_config">True</set>
                    </condition>
                    <condition>
                        <unset token="show_null_config"/>
                    </condition>
                </progress>
                </search>
                <option name="wrap">true</option>
                <option name="rowNumbers">false</option>
                <option name="drilldown">row</option>
                <option name="dataOverlayMode">none</option>
                <option name="count">10</option>
            </table>
            <html depends="$show_null_config$">
                <p style="color:blue;margin-left:30px;font-size:14px">SYSTEM SUMMARY OVERVIEW Search returned no results, The nmon inventory data may not be available yet, manually run the Nmon Inventory Generation report or wait for the auto update. (occurs every hour by default)</p>
            </html>
        </panel>
    </row>

    <row depends="$show_config$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>End host configuration</h1>
                </div>
            </html>
        </panel>
    </row>

    <row>
        <panel id="cpu">
            <title>CPU statistics</title>
        </panel>
        <panel id="memory1">
            <title>Physical memory</title>
        </panel>
        <panel id="memory2">
            <title>Swap memory</title>
        </panel>
    </row>
    <row>
        <panel>
            <single>
                <title>Average deployment CPU % usage</title>
                <search>
                    <query>eventtype=nmon:performance (type=CPU_ALL OR type=LPAR) $osfilter$ $host$
| eventstats count(eval(lpar_vp_usage_PCT>0)) as count_lpar by host
| eval usage=if(count_lpar>0, lpar_vp_usage_PCT, cpu_load_percent)
| timechart `nmon_span` avg(usage) AS value | where isnotnull(value)</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="colorBy">trend</option>
                <option name="colorMode">none</option>
                <option name="drilldown">none</option>
                <option name="numberPrecision">0.00</option>
                <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
                <option name="rangeValues">[0,30,70,100]</option>
                <option name="showSparkline">1</option>
                <option name="showTrendIndicator">1</option>
                <option name="trendColorInterpretation">inverse</option>
                <option name="trendDisplayMode">percent</option>
                <option name="unit">%</option>
                <option name="unitPosition">after</option>
                <option name="useColors">1</option>
                <option name="useThousandSeparators">1</option>
                <option name="refresh.display">preview</option>
            </single>
        </panel>
        <panel>
            <single>
                <title>Average deployment physical memory % usage</title>
                <search>
                    <query>eventtype=nmon:performance type=MEM $osfilter$ $host$ | timechart `nmon_span` avg(mem_used_effective_PCT) AS value | where isnotnull(value)</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="colorBy">trend</option>
                <option name="colorMode">none</option>
                <option name="drilldown">none</option>
                <option name="numberPrecision">0.00</option>
                <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
                <option name="rangeValues">[0,30,70,100]</option>
                <option name="showSparkline">1</option>
                <option name="showTrendIndicator">1</option>
                <option name="trendColorInterpretation">inverse</option>
                <option name="trendDisplayMode">percent</option>
                <option name="unit">%</option>
                <option name="unitPosition">after</option>
                <option name="useColors">1</option>
                <option name="useThousandSeparators">1</option>
                <option name="refresh.display">preview</option>
            </single>
        </panel>
        <panel>
            <single>
                <title>Average deployment swap memory % usage</title>
                <search>
                    <query>eventtype=nmon:performance type=MEM $osfilter$ $host$ | timechart `nmon_span` avg(swap_used_effective_PCT) AS value | where isnotnull(value)</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="colorBy">trend</option>
                <option name="colorMode">none</option>
                <option name="drilldown">none</option>
                <option name="numberPrecision">0.00</option>
                <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
                <option name="rangeValues">[0,30,70,100]</option>
                <option name="showSparkline">1</option>
                <option name="showTrendIndicator">1</option>
                <option name="trendColorInterpretation">inverse</option>
                <option name="trendDisplayMode">percent</option>
                <option name="unit">%</option>
                <option name="unitPosition">after</option>
                <option name="useColors">1</option>
                <option name="useThousandSeparators">1</option>
                <option name="refresh.display">preview</option>
            </single>
        </panel>
    </row>
    <row>
        <panel>
            <html>
                <div class="custom-sub-nav" style="text-align: center;">
                    <button class="button2_lowpadding glow" data-token-name="show_cpu" data-alt-label="HIDE EXTENDED CPU STATS" data-token-value="true">SHOW EXTENDED CPU STATS</button>
                </div>
            </html>
        </panel>
        <panel>
            <html>
                <div class="custom-sub-nav" style="text-align: center;">
                    <button class="button2_lowpadding glow" data-token-name="show_phymem" data-alt-label="HIDE EXTENDED MEMORY STATS" data-token-value="true">SHOW EXTENDED MEMORY STATS</button>
                </div>
            </html>
        </panel>
        <panel>
            <html>
                <div class="custom-sub-nav" style="text-align: center;">
                    <button class="button2_lowpadding glow" data-token-name="show_virtualmem" data-alt-label="HIDE EXTENDED SWAP STATS" data-token-value="true">SHOW EXTENDED SWAP STATS</button>
                </div>
            </html>
        </panel>
    </row>

    <!-- ######################################### CPU #########################################  -->

    <row depends="$show_cpu$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>Start extended CPU stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <row depends="$show_cpu$">
        <panel>
            <chart>
                <title>Deployment global % CPU stats over time</title>
                <search depends="$show_cpu$">
                    <query>eventtype=nmon:performance (type=CPU_ALL OR type=LPAR) $osfilter$ $host$
| eventstats count(eval(lpar_vp_usage_PCT>0)) as count_lpar by host
| eval usage=if(count_lpar>0,  lpar_vp_usage_PCT, cpu_load_percent)
| timechart `nmon_span` avg(usage) AS cpu_load_percent
| trendline sma5(cpu_load_percent) AS trend</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">% CPU</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
        <panel>
            <chart>
                <title>Deployment per category % CPU stats over time</title>
                <search depends="$show_cpu$">
                    <query>eventtype=nmon:performance (type=CPU_ALL OR type=LPAR) $osfilter$ $host$
| eventstats count(eval(lpar_vp_usage_PCT>0)) as count_lpar by host
| eval Sys_PCT=if(count_lpar>0, VP_Sys_PCT, Sys_PCT), User_PCT=if(count_lpar>0, VP_User_PCT, User_PCT), Wait_PCT=if(count_lpar>0, VP_Wait_PCT, Wait_PCT), Idle_PCT=if(count_lpar>0, VP_Idle_PCT, Idle_PCT)
| timechart `nmon_span` avg(Sys_PCT) AS Sys_PCT, avg(User_PCT) AS User_PCT, avg(Wait_PCT) AS Wait_PCT, avg(Idle_PCT) AS Idle_PCT
| fields _time,Idle_PCT,Wait_PCT,User_PCT,Sys_PCT</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">% CPU</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">area</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">connect</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">stacked100</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>
    <row depends="$show_cpu$">
        <panel>
            <chart>
                <title>By host global % CPU stats over time</title>
                <search depends="$show_cpu$">
                    <query>eventtype=nmon:performance (type=CPU_ALL OR type=LPAR) $osfilter$ $host$
| eventstats count(eval(lpar_vp_usage_PCT>0)) as count_lpar by host
| eval usage=if(count_lpar>0, lpar_vp_usage_PCT, cpu_load_percent)
| timechart `nmon_span` avg(usage) AS cpu_load_percent by host</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">% CPU</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>

    <row depends="$show_cpu$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>End extended CPU stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <!-- ######################################### Physical Memory #########################################  -->

    <row depends="$show_phymem$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>Start extended physical memory stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <row depends="$show_phymem$">
        <panel>
            <chart>
                <title>Deployment physical memory MB usage per category over time</title>
                <search depends="$show_phymem$">
                    <query>eventtype=nmon:performance:memory type=MEM $osfilter$ $host$
| dedup _time,host
| stats sum(cached) AS cached, sum(buffers) AS buffers, sum(mem_free) AS mem_free, sum(mem_used_effective) AS mem_used_effective, sum(memtotal) AS memtotal by _time
| timechart `nmon_span` avg(*) AS * | fields _time,mem_free,cached,buffers,mem_used_effective,memtotal</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.chart">area</option>
                <option name="charting.chart.nullValueMode">connect</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">stacked</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">bottom</option>
                <option name="height">400</option>
                <option name="charting.axisTitleX.text">Time</option>
                <option name="charting.axisTitleY.text">volume (MB)</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.overlayFields">memtotal</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.fieldColors">{"memtotal": 0xe50000}</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
        <panel>
            <chart>
                <title>Deployment physical memory % usage over time</title>
                <search depends="$show_phymem$">
                    <query>eventtype=nmon:performance type=MEM $osfilter$ $host$
| timechart `nmon_span` avg(mem_used_effective_PCT) AS mem_used_effective_PCT
| trendline sma5(mem_used_effective_PCT) AS trend</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">% mem</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">connect</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">stacked100</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>
    <row depends="$show_phymem$">
        <panel>
            <chart>
                <title>By host physical memory % usage over time</title>
                <search depends="$show_phymem$">
                    <query>eventtype=nmon:performance type=MEM $osfilter$ $host$
| timechart `nmon_span` avg(mem_used_effective_PCT) AS mem_used_effective_PCT by host</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">% mem</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>

    <row depends="$show_phymem$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>End extended physical memory stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <!-- ######################################### Virtual Memory #########################################  -->

    <row depends="$show_virtualmem$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>Start extended vitual memory stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <row depends="$show_virtualmem$">
        <panel>
            <chart>
                <title>Deployment swap memory MB usage per category over time</title>
                <search depends="$show_virtualmem$">
                    <query>eventtype=nmon:performance:memory type=MEM $osfilter$ $host$
| dedup _time,host
| stats sum(swap_used) AS swap_used, sum(swap) AS swaptotal, sum(swap_free) AS swap_free by _time
| timechart `nmon_span` avg(*) AS *</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.chart">area</option>
                <option name="charting.chart.nullValueMode">connect</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">stacked</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">bottom</option>
                <option name="height">400</option>
                <option name="charting.axisTitleX.text">Time</option>
                <option name="charting.axisTitleY.text">volume (MB)</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.overlayFields">swaptotal</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.fieldColors">{"swaptotal": 0xe50000}</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
        <panel>
            <chart>
                <title>Deployment swap memory % usage over time</title>
                <search depends="$show_virtualmem$">
                    <query>eventtype=nmon:performance type=MEM $osfilter$ $host$
| timechart `nmon_span` avg(swap_used_effective_PCT) AS swap_used_effective_PCT
| trendline sma5(swap_used_effective_PCT) AS trend</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">% mem</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">connect</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">stacked100</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>
    <row depends="$show_virtualmem$">
        <panel>
            <chart>
                <title>By host swap memory % usage over time</title>
                <search depends="$show_virtualmem$">
                    <query>eventtype=nmon:performance type=MEM $osfilter$ $host$
| timechart `nmon_span` avg(swap_used_effective_PCT) AS swap_used_effective_PCT by host</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">% mem</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>

    <row depends="$show_virtualmem$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>End extended vitual memory stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <row>
        <panel id="disk">
            <title>Disks activity</title>
        </panel>
    </row>

    <row>
        <panel>
            <single rejects="$start_disk_stats_search$">
                <title>Average deployment I/O per sec</title>
                <search depends="$start_dg_stats_search$">
                    <query>eventtype=nmon:performance type=DGXFER $osfilter$ $host$
| dedup _time,host,device,disk_total_iops
| stats sum(disk_total_iops) AS disk_total_iops by _time
| timechart `nmon_span` avg(disk_total_iops) AS disk_total_iops | where isnotnull(disk_total_iops)</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="colorBy">trend</option>
                <option name="colorMode">none</option>
                <option name="drilldown">none</option>
                <option name="numberPrecision">0.00</option>
                <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
                <option name="rangeValues">[0,30,70,100]</option>
                <option name="showSparkline">1</option>
                <option name="showTrendIndicator">1</option>
                <option name="trendColorInterpretation">inverse</option>
                <option name="trendDisplayMode">percent</option>
                <option name="unit">iops</option>
                <option name="unitPosition">after</option>
                <option name="useColors">1</option>
                <option name="useThousandSeparators">1</option>
                <option name="refresh.display">preview</option>
            </single>
            <single rejects="$start_dg_stats_search$">
                <title>Average deployment I/O per sec</title>
                <search depends="$start_disk_stats_search$">
                    <query>eventtype=nmon:performance type=DISKXFER $osfilter$ $host$
| dedup _time,host,value
| stats sum(value) AS value by _time
| timechart `nmon_span` avg(value) AS value | where isnotnull(value)</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="colorBy">trend</option>
                <option name="colorMode">none</option>
                <option name="drilldown">none</option>
                <option name="numberPrecision">0.00</option>
                <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
                <option name="rangeValues">[0,30,70,100]</option>
                <option name="showSparkline">1</option>
                <option name="showTrendIndicator">1</option>
                <option name="trendColorInterpretation">inverse</option>
                <option name="trendDisplayMode">percent</option>
                <option name="unit">iops</option>
                <option name="unitPosition">after</option>
                <option name="useColors">1</option>
                <option name="useThousandSeparators">1</option>
                <option name="refresh.display">preview</option>
            </single>
        </panel>
        <panel>
            <single rejects="$start_disk_stats_search$">
                <title>Average deployment % of time busy disks</title>
                <search depends="$start_dg_stats_search$">
                    <query>eventtype=nmon:performance type=DGBUSY $osfilter$ $host$
| dedup _time,host,device,disk_busy_time_pct
| timechart `nmon_span` avg(disk_busy_time_pct) AS disk_busy_time_pct | where isnotnull(disk_busy_time_pct)</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="colorBy">trend</option>
                <option name="colorMode">none</option>
                <option name="drilldown">none</option>
                <option name="numberPrecision">0.00</option>
                <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
                <option name="rangeValues">[0,30,70,100]</option>
                <option name="showSparkline">1</option>
                <option name="showTrendIndicator">1</option>
                <option name="trendColorInterpretation">inverse</option>
                <option name="trendDisplayMode">percent</option>
                <option name="unit">%</option>
                <option name="unitPosition">after</option>
                <option name="useColors">1</option>
                <option name="useThousandSeparators">1</option>
                <option name="refresh.display">preview</option>
            </single>
            <single rejects="$start_dg_stats_search$">
                <title>Average deployment % of time busy disks</title>
                <search depends="$start_disk_stats_search$">
                    <query>eventtype=nmon:performance type=DISKBUSY $osfilter$ $host$
| dedup _time,host,value
| timechart `nmon_span` avg(value) AS value | where isnotnull(value)</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="colorBy">trend</option>
                <option name="colorMode">none</option>
                <option name="drilldown">none</option>
                <option name="numberPrecision">0.00</option>
                <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
                <option name="rangeValues">[0,30,70,100]</option>
                <option name="showSparkline">1</option>
                <option name="showTrendIndicator">1</option>
                <option name="trendColorInterpretation">inverse</option>
                <option name="trendDisplayMode">percent</option>
                <option name="unit">%</option>
                <option name="unitPosition">after</option>
                <option name="useColors">1</option>
                <option name="useThousandSeparators">1</option>
                <option name="refresh.display">preview</option>
            </single>
        </panel>
        <panel>
            <single rejects="$start_disk_stats_search$">
                <title>Average deployment disk data transfer size</title>
                <search depends="$start_dg_stats_search$">
                    <query>eventtype=nmon:performance type=DGSIZE $osfilter$ $host$
| timechart `nmon_span` avg(disk_block_size_KB) AS disk_block_size_KB | where isnotnull(disk_block_size_KB)</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="colorBy">trend</option>
                <option name="colorMode">none</option>
                <option name="drilldown">none</option>
                <option name="numberPrecision">0.00</option>
                <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
                <option name="rangeValues">[0,30,70,100]</option>
                <option name="showSparkline">1</option>
                <option name="showTrendIndicator">1</option>
                <option name="trendColorInterpretation">inverse</option>
                <option name="trendDisplayMode">percent</option>
                <option name="unit">KBytes</option>
                <option name="unitPosition">after</option>
                <option name="useColors">1</option>
                <option name="useThousandSeparators">1</option>
                <option name="refresh.display">preview</option>
            </single>
            <single rejects="$start_dg_stats_search$">
                <title>Average deployment disk data transfer size</title>
                <search depends="$start_disk_stats_search$">
                    <query>eventtype=nmon:performance type=DISKBSIZE $osfilter$ $host$
| timechart `nmon_span` avg(value) AS value | where isnotnull(value)</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="colorBy">trend</option>
                <option name="colorMode">none</option>
                <option name="drilldown">none</option>
                <option name="numberPrecision">0.00</option>
                <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
                <option name="rangeValues">[0,30,70,100]</option>
                <option name="showSparkline">1</option>
                <option name="showTrendIndicator">1</option>
                <option name="trendColorInterpretation">inverse</option>
                <option name="trendDisplayMode">percent</option>
                <option name="unit">KBytes</option>
                <option name="unitPosition">after</option>
                <option name="useColors">1</option>
                <option name="useThousandSeparators">1</option>
                <option name="refresh.display">preview</option>
            </single>
        </panel>
    </row>
    <row>
        <panel>
            <html>
                <div class="custom-sub-nav" style="text-align: center;">
                    <button class="button2_lowpadding glow" data-token-name="show_diskxfer" data-alt-label="HIDE EXTENDED DISKXFER STATS" data-token-value="true">SHOW EXTENDED DISKXFER STATS</button>
                </div>
            </html>
        </panel>
        <panel>
            <html>
                <div class="custom-sub-nav" style="text-align: center;">
                    <button class="button2_lowpadding glow" data-token-name="show_diskbusy" data-alt-label="HIDE EXTENDED DISKBUSY STATS" data-token-value="true">SHOW EXTENDED DISKBUSY STATS</button>
                </div>
            </html>
        </panel>
        <panel>
            <html>
                <div class="custom-sub-nav" style="text-align: center;">
                    <button class="button2_lowpadding glow" data-token-name="show_diskbsize" data-alt-label="HIDE EXTENDED DISKBSIZE STATS" data-token-value="true">SHOW EXTENDED DISKBSIZE STATS</button>
                </div>
            </html>
        </panel>
    </row>

    <!-- ######################################### DISKXFER #########################################  -->

    <row depends="$show_diskxfer$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>Start extended diskxfer stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <row depends="$show_diskxfer$ $start_dg_stats_search$">
        <panel>
            <chart>
                <title>Deployment global I/O per sec over time</title>
                <search depends="$show_diskxfer$ $start_dg_stats_search$">
                    <query>eventtype=nmon:performance type=DGXFER $osfilter$ $host$
| dedup _time,host,device,disk_total_iops
| stats sum(disk_total_iops) AS disk_total_iops by _time
| timechart `nmon_span` avg(disk_total_iops) AS iops
| trendline sma5(iops) AS trend</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">I/O per sec</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>
    <row depends="$show_diskxfer$ $start_dg_stats_search$">
        <panel>
            <chart>
                <title>By host I/O per sec over time</title>
                <search depends="$show_diskxfer$ $start_dg_stats_search$">
                    <query>eventtype=nmon:performance type=DGXFER $osfilter$ $host$
| dedup _time,host,device,disk_total_iops
| stats sum(disk_total_iops) AS disk_total_iops by _time,host
| timechart `nmon_span` avg(disk_total_iops) AS iops by host</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">I/O per sec</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>

    <row depends="$show_diskxfer$ $start_disk_stats_search$">
        <panel>
            <chart>
                <title>Deployment global I/O per sec over time</title>
                <search depends="$show_diskxfer$ $start_disk_stats_search$">
                    <query>eventtype=nmon:performance type=DISKXFER $osfilter$ $host$
| dedup _time,host,device,value
| stats sum(value) AS value by _time
| timechart `nmon_span` avg(value) AS iops
| trendline sma5(iops) AS trend</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">I/O per sec</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>
    <row depends="$show_diskxfer$ $start_disk_stats_search$">
        <panel>
            <chart>
                <title>By host I/O per sec over time</title>
                <search depends="$show_diskxfer$ $start_disk_stats_search$">
                    <query>eventtype=nmon:performance type=DISKXFER $osfilter$ $host$
| dedup _time,host,value
| stats sum(value) AS value by _time,host
| timechart `nmon_span` avg(value) AS iops by host</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">I/O per sec</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>

    <row depends="$show_diskxfer$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>End extended diskxfer stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <!-- ######################################### DISKBUSY #########################################  -->

    <row depends="$show_diskbusy$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>Start extended diskbusy stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <row depends="$show_diskbusy$ $start_dg_stats_search$">
        <panel>
            <chart>
                <title>Deployment global % time busy disk over time</title>
                <search depends="$show_diskbusy$ $start_dg_stats_search$">
                    <query>eventtype=nmon:performance type=DGBUSY $osfilter$ $host$
| dedup _time,host,device,disk_busy_time_pct
| timechart `nmon_span` avg(disk_busy_time_pct) AS busy_disk
| trendline sma5(busy_disk) AS trend</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">% time busy</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>
    <row depends="$show_diskbusy$ $start_dg_stats_search$">
        <panel>
            <chart>
                <title>By host % time busy disk over time</title>
                <search depends="$show_diskbusy$ $start_dg_stats_search$">
                    <query>eventtype=nmon:performance type=DGBUSY $osfilter$ $host$
| dedup _time,host,device,disk_busy_time_pct
| timechart `nmon_span` avg(disk_busy_time_pct) AS busydisk by host</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">% time busy</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>

    <row depends="$show_diskbusy$ $start_disk_stats_search$">
        <panel>
            <chart>
                <title>Deployment global % time busy disk over time</title>
                <search depends="$show_diskbusy$ $start_disk_stats_search$">
                    <query>eventtype=nmon:performance type=DISKBUSY $osfilter$ $host$
| dedup _time,host,value
| timechart `nmon_span` avg(value) AS busy_disk
| trendline sma5(busy_disk) AS trend</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">% time busy</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>
    <row depends="$show_diskbusy$ $start_disk_stats_search$">
        <panel>
            <chart>
                <title>By host % time busy disk over time</title>
                <search depends="$show_diskbusy$ $start_disk_stats_search$">
                    <query>eventtype=nmon:performance type=DISKBUSY $osfilter$ $host$
| dedup _time,host,value
| timechart `nmon_span` avg(value) AS busydisk by host</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">% time busy</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>

    <row depends="$show_diskbusy$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>End extended diskbusy stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <!-- ######################################### DISKBSIZE #########################################  -->

    <row depends="$show_diskbsize$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>Start extended diskbsize stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <row depends="$show_diskbsize$ $start_dg_stats_search$">
        <panel>
            <chart>
                <title>Deployment global disk data transfer (KBytes per transfer) over time</title>
                <search depends="$show_diskbsize$ $start_dg_stats_search$">
                    <query>eventtype=nmon:performance type=DGSIZE $osfilter$ $host$
| dedup _time,host,device,disk_block_size_KB
| timechart `nmon_span` avg(disk_block_size_KB) AS tranfer_rate
| trendline sma5(tranfer_rate) AS trend</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">KBytes</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>
    <row depends="$show_diskbsize$ $start_dg_stats_search$">
        <panel>
            <chart>
                <title>By host disk data transfer (KBytes per transfer) over time</title>
                <search depends="$show_diskbsize$ $start_dg_stats_search$">
                    <query>eventtype=nmon:performance type=DGSIZE $osfilter$ $host$
| dedup _time,host,device,disk_block_size_KB
| timechart `nmon_span` avg(disk_block_size_KB) AS tranfer_rate by host</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">KBytes</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>

    <row depends="$show_diskbsize$ $start_disk_stats_search$">
        <panel>
            <chart>
                <title>Deployment global disk data transfer (KBytes per transfer) over time</title>
                <search depends="$show_diskbsize$ $start_disk_stats_search$">
                    <query>eventtype=nmon:performance type=DISKBSIZE $osfilter$ $host$
| dedup _time,host,value
| timechart `nmon_span` avg(value) AS tranfer_rate
| trendline sma5(tranfer_rate) AS trend</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">KBytes</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>
    <row depends="$show_diskbsize$ $start_disk_stats_search$">
        <panel>
            <chart>
                <title>By host disk data transfer (KBytes per transfer) over time</title>
                <search depends="$show_diskbsize$ $start_disk_stats_search$">
                    <query>eventtype=nmon:performance type=DISKBSIZE $osfilter$ $host$
| dedup _time,host,value
| timechart `nmon_span` avg(value) AS tranfer_rate by host</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">KBytes</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">line</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">default</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>

    <row depends="$show_diskbsize$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>End extended diskbsize stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <!-- ######################################### PROCESS AND NETWORK #########################################  -->

    <row>
        <panel id="process1">
            <title>Processes CPU usage</title>
        </panel>
        <panel id="process2">
            <title>Processes Memory usage</title>
        </panel>
        <panel id="network">
            <title>Network traffic</title>
        </panel>
    </row>
    <row>
        <panel>
            <single rejects="$show_null_top$">
                <title>Average deployment CPU usage main process</title>
                <search depends="$start_top_searches$">
                    <query>eventtype=nmon:performance type=TOP $osfilter$ $host$ Command=*
| dedup _time,host,Command,PID
| stats max(pct_CPU) AS pct_CPU, max(logical_cpus) AS logical_cpus, max(virtual_cpus) AS virtual_cpus by _time,host,Command,PID
| eval limit=(logical_cpus*100)
| where (pct_CPU&lt;=limit)
| eval smt_threads=(logical_cpus/virtual_cpus) | eval pct_CPU=case(isnum(smt_threads) AND smt_threads&gt;="2", pct_CPU*1.2, isnum(smt_threads) AND smt_threads&gt;="4", pct_CPU*1.4, isnum(smt_threads), pct_CPU)
| stats sum(pct_CPU) As pct_CPU, last(logical_cpus) As logical_cpus by _time,host,Command
| eval value=(pct_CPU/100)
| bucket _time `nmon_span`
| stats max(value) As value by _time,host,Command
| stats sum(value) AS value by _time,Command
| stats avg(value) AS value by Command
| sort - value</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="colorBy">trend</option>
                <option name="colorMode">none</option>
                <option name="drilldown">none</option>
                <option name="numberPrecision">0</option>
                <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
                <option name="rangeValues">[0,30,70,100]</option>
                <option name="showSparkline">1</option>
                <option name="showTrendIndicator">1</option>
                <option name="trendColorInterpretation">inverse</option>
                <option name="trendDisplayMode">percent</option>
                <option name="unitPosition">after</option>
                <option name="useColors">0</option>
                <option name="useThousandSeparators">1</option>
                <option name="refresh.display">preview</option>
            </single>
            <html depends="$show_null_top$">
                <p style="color:blue;margin-left:30px;font-size:14px">Search returned no results, TOP collection (processes activity) may have not been activated at nmon binary startup or no processes activity could be captured. (use the -t or -T option to activate the TOP collection)</p>
            </html>
        </panel>
        <panel>
            <single rejects="$show_null_top$">
                <title>Average deployment Memory usage main process</title>
                <search depends="$start_top_searches$">
                    <query>eventtype=nmon:performance type=TOP $osfilter$ $host$ Command=*
| dedup _time,host,Command,PID
| eval mem_usage_mb=case(match(OStype, "Linux"), ((ResSet)/1024), match(OStype, "AIX"), ((ResData+ResText)/1024), match(OStype, "Solaris"), (ResSize/1024) )
| stats sum(mem_usage_mb) As mem_usage_mb by _time,host,Command
| stats avg(mem_usage_mb) AS mem_usage_mb by _time,Command
| stats avg(mem_usage_mb) AS mem_usage_mb by Command | sort - mem_usage_mb</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="colorBy">trend</option>
                <option name="colorMode">none</option>
                <option name="drilldown">none</option>
                <option name="numberPrecision">0</option>
                <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
                <option name="rangeValues">[0,30,70,100]</option>
                <option name="showSparkline">1</option>
                <option name="showTrendIndicator">1</option>
                <option name="trendColorInterpretation">inverse</option>
                <option name="trendDisplayMode">percent</option>
                <option name="unitPosition">after</option>
                <option name="useColors">0</option>
                <option name="useThousandSeparators">1</option>
                <option name="refresh.display">preview</option>
            </single>
            <html depends="$show_null_top$">
                <p style="color:blue;margin-left:30px;font-size:14px">Search returned no results, TOP collection (processes activity) may have not been at nmon binary startup or no processes activity could be captured. (use the -t or -T option to activate the TOP collection)</p>
            </html>
        </panel>
        <panel>
            <single>
                <title>Deployment MBps network traffic (total)</title>
                <search>
                    <query>eventtype=nmon:performance type=NET $osfilter$ $host$ device!=*lo*
| eval traffic_type=case(match(device, ".+read.+"), "In", match(device, ".+write.+"), "Out")
| stats sum(value) as value by _time,traffic_type
| eval value=round((value/1000),3)
| chart latest(value) AS value by traffic_type | eval value=round(value, 3)
| fields value | transpose | eval value='row 1' + " / " + 'row 2' | fields value | where isnotnull(value)</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="underLabel">IN / OUT  NETWORK TRAFFIC</option>
                <option name="colorBy">trend</option>
                <option name="colorMode">none</option>
                <option name="drilldown">none</option>
                <option name="numberPrecision">0</option>
                <option name="rangeColors">["0x65a637","0x6db7c6","0xf7bc38","0xf58f39","0xd93f3c"]</option>
                <option name="rangeValues">[0,30,70,100]</option>
                <option name="showSparkline">1</option>
                <option name="showTrendIndicator">1</option>
                <option name="trendColorInterpretation">inverse</option>
                <option name="trendDisplayMode">percent</option>
                <option name="unit">MBps</option>
                <option name="unitPosition">after</option>
                <option name="useColors">0</option>
                <option name="useThousandSeparators">1</option>
                <option name="refresh.display">preview</option>
            </single>
        </panel>
    </row>
    <row>
        <panel>
            <html>
                <div class="custom-sub-nav" style="text-align: center;">
                    <button class="button2_lowpadding glow" data-token-name="show_cpuprocess" data-alt-label="HIDE EXTENDED CPU PROCESSES STATS" data-token-value="true">SHOW EXTENDED CPU PROCESSES STATS</button>
                </div>
            </html>
        </panel>
        <panel>
            <html>
                <div class="custom-sub-nav" style="text-align: center;">
                    <button class="button2_lowpadding glow" data-token-name="show_memprocess" data-alt-label="HIDE EXTENDED MEM PROCESSES STATS" data-token-value="true">SHOW EXTENDED MEM PROCESSES STATS</button>
                </div>
            </html>
        </panel>
        <panel>
            <html>
                <div class="custom-sub-nav" style="text-align: center;">
                    <button class="button2_lowpadding glow" data-token-name="show_net" data-alt-label="HIDE EXTENDED NETWORK STATS" data-token-value="true">SHOW EXTENDED NETWORK STATS</button>
                </div>
            </html>
        </panel>
    </row>

    <!-- ######################################### TOP CPU #########################################  -->

    <row depends="$show_cpuprocess$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>Start extended CPU processes stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <row depends="$show_cpuprocess$">
        <panel>
            <chart>
                <title>Deployment TOP 10 CPU processes usage</title>
                <search depends="$show_cpuprocess$">
                    <query>eventtype=nmon:performance type=TOP $osfilter$ $host$ Command=*
| stats max(pct_CPU) AS pct_CPU, max(logical_cpus) AS logical_cpus, max(virtual_cpus) AS virtual_cpus by _time,host,Command,PID
| eval limit=(logical_cpus*100) | where (pct_CPU&lt;=limit)
| eval smt_threads=(logical_cpus/virtual_cpus) | eval pct_CPU=case(isnum(smt_threads) AND smt_threads&gt;="2", pct_CPU*1.2, isnum(smt_threads) AND smt_threads&gt;="4", pct_CPU*1.4, isnum(smt_threads), pct_CPU)
| stats sum(pct_CPU) As pct_CPU, last(logical_cpus) As logical_cpus by _time,host,Command
| eval value=(pct_CPU/100)
| bucket _time `nmon_span`
| stats max(value) As value by _time,host,Command
| stats sum(value) AS value by _time,Command
| timechart `nmon_span` limit=10 useother=f max(value) AS value by Command</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">logical CPUs</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">area</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">0</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">stacked</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>
    <row depends="$show_cpuprocess$">
        <panel>
            <chart>
                <title>By host TOP 10 CPU processes usage</title>
                <search depends="$show_cpuprocess$">
                    <query>eventtype=nmon:performance type=TOP $osfilter$ $host$ Command=*
| stats max(pct_CPU) AS pct_CPU, max(logical_cpus) AS logical_cpus by _time,host,Command,PID
| eval limit=(logical_cpus*100) | where (pct_CPU&lt;=limit)
| stats sum(pct_CPU) As pct_CPU, last(logical_cpus) As logical_cpus by _time,host,Command
| eval value=(pct_CPU/100)
| eval key=host+":"+Command
| timechart `nmon_span` limit=10 useother=f max(value) As value by key</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">logical CPUs</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">area</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">0</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">stacked</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>

    <row depends="$show_cpuprocess$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>End extended CPU processes stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <!-- ######################################### TOP Memory #########################################  -->

    <row depends="$show_memprocess$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>Start extended processes memory stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <row depends="$show_memprocess$">
        <panel>
            <chart>
                <title>Deployment TOP 10 Memory processes usage</title>
                <search depends="$show_memprocess$">
                    <query>eventtype=nmon:performance type=TOP $osfilter$ $host$ Command=*
| dedup _time,host,Command,PID
| eval mem_usage_mb=case(match(OStype, "Linux"), ((ResSet)/1024), match(OStype, "AIX"), ((ResData+ResText)/1024), match(OStype, "Solaris"), (ResSize/1024) )
| stats sum(mem_usage_mb) As mem_usage_mb by _time,host,Command
| stats avg(mem_usage_mb) AS mem_usage_mb by _time,Command
| timechart `nmon_span` limit=10 useother=f max(mem_usage_mb) AS mem_usage_mb by Command</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">MB</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">area</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">0</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">stacked</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>
    <row depends="$show_memprocess$">
        <panel>
            <chart>
                <title>By host TOP 10 Memory processes usage</title>
                <search depends="$show_memprocess$">
                    <query>eventtype=nmon:performance type=TOP $osfilter$ $host$ Command=*
| dedup _time,host,Command,PID
| eval mem_usage_mb=case(match(OStype, "Linux"), ((ResSet)/1024), match(OStype, "AIX"), ((ResData+ResText)/1024), match(OStype, "Solaris"), (ResSize/1024) )
| stats max(mem_usage_mb) AS mem_usage_mb by _time,host,Command,PID
| stats sum(mem_usage_mb) As mem_usage_mb by _time,host,Command
| eval key=host+":"+Command
| timechart `nmon_span` limit=10 useother=f max(mem_usage_mb) As mem_usage_mb by key</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">MB</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.minimumNumber">0</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">area</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">0</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">stacked</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>

    <row depends="$show_memprocess$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>End extended processes memory stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <!-- ######################################### Network #########################################  -->

    <row depends="$show_net$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>Start extended networking stats</h1>
                </div>
            </html>
        </panel>
    </row>

    <row depends="$show_net$">
        <panel>
            <chart>
                <title>Deployment Inbound/Outbound network traffic</title>
                <search depends="$show_net$">
                    <query>eventtype=nmon:performance type=NET $osfilter$ $host$ device!=*lo*
| eval traffic_type=case(match(device, ".+read.+"), "Inbound", match(device, ".+write.+"), "Outbound")
| eval value=case(traffic_type="Outbound", "-" . value, traffic_type="Inbound", value)
| timechart `nmon_span` avg(value) AS KBps by traffic_type</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">KBps</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">area</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">stacked</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>
    <row depends="$show_net$">
        <panel>
            <chart>
                <title>By host Inbound/Outbound network traffic</title>
                <search depends="$show_net$">
                    <query>eventtype=nmon:performance type=NET $osfilter$ $host$ device!=*lo*
| eval traffic_type=case(match(device, ".+read.+"), "Inbound", match(device, ".+write.+"), "Outbound")
| eval key=host+":"+traffic_type
| eval value=case(traffic_type="Outbound", "-" . value, traffic_type="Inbound", value)
| timechart `nmon_span` useother=f limit=0 avg(value) AS KBps by key</query>
                    <earliest>$timerange.earliest$</earliest>
                    <latest>$timerange.latest$</latest>
                    <refresh>$refresh$</refresh>
                    <refreshType>delay</refreshType>
                </search>
                <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
                <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
                <option name="charting.axisTitleX.visibility">visible</option>
                <option name="charting.axisTitleY.text">Kbps</option>
                <option name="charting.axisTitleY.visibility">visible</option>
                <option name="charting.axisTitleY2.visibility">visible</option>
                <option name="charting.axisX.scale">linear</option>
                <option name="charting.axisY.scale">linear</option>
                <option name="charting.axisY2.enabled">0</option>
                <option name="charting.axisY2.scale">inherit</option>
                <option name="charting.chart">area</option>
                <option name="charting.chart.bubbleMaximumSize">50</option>
                <option name="charting.chart.bubbleMinimumSize">10</option>
                <option name="charting.chart.bubbleSizeBy">area</option>
                <option name="charting.chart.nullValueMode">gaps</option>
                <option name="charting.chart.showDataLabels">none</option>
                <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
                <option name="charting.chart.stackMode">stacked</option>
                <option name="charting.chart.style">shiny</option>
                <option name="charting.drilldown">all</option>
                <option name="charting.layout.splitSeries">0</option>
                <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
                <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
                <option name="charting.legend.placement">top</option>
                <option name="height">400</option>
                <option name="refresh.display">none</option>
            </chart>
        </panel>
    </row>

    <row depends="$show_net$">
        <panel>
            <html>
                <div class="dashseparator">
                    <h1>End extended networking stats</h1>
                </div>
            </html>
        </panel>
    </row>

</form>
