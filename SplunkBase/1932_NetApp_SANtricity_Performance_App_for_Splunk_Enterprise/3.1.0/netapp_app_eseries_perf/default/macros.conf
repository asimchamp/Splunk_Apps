[get_nesa_index]
definition = index=eseries

[expand_json_array(1)]
args = field
definition = spath $field${} output=$field$ | fields - _raw | mvexpand $field$ | spath input=$field$ | fields - $field$

[_bytes_to_GiB(1)]
args = nbytes
definition = eval $nbytes$=round($nbytes$ / 1024 / 1024 / 1024, 2)

# This is to match the time stamp formatting done to _time by default.
[ctime(1)]
args = epoch_stamp
definition = convert timeformat="%Y-%m-%d %H:%M:%S" ctime($epoch_stamp$)

[nesa_full_volume_group_table_field_list]
definition = table label, state, status, raidLevel, securityType, protectionInformationCapabilities.protectionInformationCapable, protectionInformationCapabilities.protectionType,  spindleSpeed, spindleSpeedMatch, freeSpace, usedSpace, totalRaidedSpace

[nesa_full_volume_group_field_renames]
definition = rename label AS "Volume Groups/Pools", state AS State, status AS Status, raidLevel AS "RAID Level", securityType AS "Encryption", protectionInformationCapabilities.protectionInformationCapable AS "Data Assurance", protectionInformationCapabilities.protectionType AS "Protection Type", spindleSpeed AS "Spindle RPM", spindleSpeedMatch AS "Speeds Match", freeSpace AS "Unallocated Capacity (GiB)", usedSpace AS "Allocated Capacity (GiB)", totalRaidedSpace AS "Total Capacity (GiB)"

[nesa_full_disk_pool_table_field_list]
definition = table label, state, status, securityType, protectionInformationCapabilities.protectionInformationCapable, protectionInformationCapabilities.protectionType, volumeGroupData.diskPoolData.*Priority, reservations, spindleSpeed, spindleSpeedMatch, freeSpace, usedSpace, totalRaidedSpace

[nesa_full_disk_pool_field_renames]
definition = rename label AS "Disk Pool", volumeGroupRef AS "VolGroup ID", volumeGroupData.diskPoolData.backgroundOperationPriority AS "Background Priority", volumeGroupData.diskPoolData.criticalReconstructPriority AS "Critical Reconstruct Priority", volumeGroupData.diskPoolData.degradedReconstructPriority AS "Degraded Reconstruct Priority", reservations AS "Preservation Capacity", state AS State, status AS Status, securityType AS "Encryption", protectionInformationCapabilities.protectionInformationCapable AS "Data Assurance", protectionInformationCapabilities.protectionType AS "Protection Type", spindleSpeed AS "Spindle RPM", spindleSpeedMatch AS "Speeds Match", freeSpace AS "Unallocated Capacity (GiB)", usedSpace AS "Allocated Capacity (GiB)", totalRaidedSpace AS "Total Capacity (GiB)"

[nesa_short_volume_table_field_list]
definition = table label, status, capacity, currentManager, preferredManager, Preferred

[nesa_short_volume_table_field_renames]
definition = rename label AS Volume, currentManager AS "Current Controller", preferredManager AS "Preferred Controller", status AS Status, capacity AS Capacity

[nesa_full_volume_table_field_list]
definition = table label, volumeGroup, status, action, cache.readCacheActive, cache.writeCacheActive, perms.flashReadCache, volumeUse, raidLevel, capacity, blkSize, currentManager, preferredManager, Preferred

[nesa_full_volume_table_field_renames]
definition = rename label AS Volume, volumeGroup AS "Volume Groups/Pools", status AS Status, cache.readCacheActive AS "Read Cache Active", cache.writeCacheActive AS "Write Cache Active", perms.flashReadCache AS "SSD Read cache", action AS Action, volumeUse AS "Volume Role", raidLevel AS "RAID Level", capacity AS "Capacity (GiB)", blkSize AS "Block Size", currentManager AS "Current Controller", preferredManager AS "Preferred Controller"

[nesa_full_drive_table_field_list]
definition = table driveLabel, status, available, manufacturer, softwareVersion, driveMediaType, interfaceType.driveType, averageEraseCountPercent, spareBlocksRemainingPercent, spindleSpeed, currentSpeed, maxSpeed, driveTemperature.currentTemp, usableCapacity

[nesa_full_drive_table_field_renames]
definition = rename driveLabel AS Location, available AS Available, status AS Status, cause AS Cause, hotSpare AS "Hot Spare", manufacturer AS Manufacturer, softwareVersion AS Firmware, driveMediaType AS "Drive Type", interfaceType.driveType AS Interface, averageEraseCountPercent AS "SSD Erase Count %", spareBlocksRemainingPercent AS "SSD Spare Blocks %", spindleSpeed AS "Spindle RPM", currentSpeed AS "Current Speed", maxSpeed AS "Max Speed", driveTemperature.currentTemp AS "Drive Temp.", usableCapacity AS "Usable Capacity (GiB)"

